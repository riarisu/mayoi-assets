"undefined"==typeof global&&"undefined"!=typeof window?global=window:"undefined"==typeof window&&"undefined"!=typeof self&&(global=self),function(){function t(t,e){for(var i in e)_t.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t}var v,U,_,u,s,d,c,n,x,o,i,a,e,M,h,A,j,G,l,p,P,$,r,tt,f,m,y,g,b,C,I,E,w,F,L,k,V,T,B,S,R,O,D,N,H,W,X,z,Y,K,q,Q,Z,J,et,it,rt,st,nt,ot,at,ht,lt,ct,ut,dt,pt,ft,mt,yt,_t={}.hasOwnProperty;function gt(){}function vt(t,e){null==t&&(t=0),null==e&&(e=0),this._=Y.available?new Float32Array(2):[],this._[0]=t,this._[1]=e}function xt(t,e,i,r,s,n){this._=Y.available?new Float32Array(6):[],null!=t?(this._[0]=t,this._[1]=r,this._[2]=i,this._[3]=e,this._[4]=s,this._[5]=n):this.clear()}function Mt(t,e,i,r){this._=Y.available?new Float32Array(4):[],null!=t?(this._[0]=t,this._[1]=e,this._[2]=i,this._[3]=r):(this._[0]=0,this._[1]=0,this._[2]=0,this._[3]=0)}function bt(t){this._=Y.available?new Float32Array(1):[],this._[0]=t}function Ct(t,e,i,r,s,n,o,a){this.multi=new j(t,e,i,r),this.add=new j(s,n,o,a),null==t&&this.clear()}function It(){}function Et(){}function wt(t,e,i,r,s){this.stringId=t,this.format=e,this.width=i,this.height=r,this.scale=s}function Ft(t,e,i,r,s,n,o,a,h,l,c){this.stringId=t,this.textureId=e,this.rotated=i,this.x=r,this.y=s,this.u=n,this.v=o,this.w=a,this.h=h,this.ow=l,this.oh=c}function Lt(){}function kt(t,e,i,r,s,n,o){this.matrixId=t,this.textureFragmentId=e,this.attribute=i,this.u=r,this.v=s,this.w=n,this.h=o}function Tt(){}function Bt(t,e,i,r,s,n,o,a,h,l,c,u,d,p){this.maxLength=t,this.fontId=e,this.fontHeight=i,this.align=r,this.leftMargin=s,this.rightMargin=n,this.letterSpacing=o,this.leading=a,this.strokeColorId=h,this.strokeWidth=l,this.shadowColorId=c,this.shadowOffsetX=u,this.shadowOffsetY=d,this.shadowBlur=p}function St(t,e,i,r,s){this.width=e,this.height=i,this.matrixId=r,this.colorTransformId=s,St.__super__.constructor.call(this,t)}function At(){}function Pt(t,e){this.graphicObjectType=t,this.graphicObjectId=e}function Rt(){}function Ot(t,e){this.objectType=t,this.objectId=e}function Dt(){}function Nt(t,e,i){this.condition=t,this.keyCode=e,this.animationId=i}function Ht(t,e){this.frameNo=e,Ht.__super__.constructor.call(this,t)}function Wt(t){Wt.__super__.constructor.call(this,t)}function Ut(t){Ut.__super__.constructor.call(this,t)}function jt(){}function Gt(t,e){this.controlType=t,this.controlId=e}function Vt(){}function Xt(t,e){this.clipEvent=t,this.animationId=e}function zt(t,e){this.movieId=e,zt.__super__.constructor.call(this,t)}function Yt(){}function Kt(t,e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B,S,A,P,R){var O,D,N,H,W;this.header=t,this.translates=e,this.matrices=i,this.colors=r,this.alphaTransforms=s,this.colorTransforms=n,this.objects=o,this.textures=a,this.textureFragments=h,this.bitmaps=l,this.bitmapExs=c,this.fonts=u,this.textProperties=d,this.texts=p,this.particleDatas=f,this.particles=m,this.programObjects=y,this.graphicObjects=_,this.graphics=g,this.animations=v,this.buttonConditions=x,this.buttons=M,this.labels=b,this.instanceNames=C,this.events=I,this.places=E,this.controlMoveMs=w,this.controlMoveCs=F,this.controlMoveMCs=L,this.controlMoveMCBs=k,this.controls=T,this.frames=B,this.movieClipEvents=S,this.movies=A,this.movieLinkages=P,this.strings=R,null!=this.header.header?(N=this.header,this.header=N.header,this.translates=function(){for(var t=N.translates,e=[],i=0,r=t.length;i<r;i++)W=t[i],e.push(new X(W._[0],W._[1]));return e}(),this.matrices=function(){for(var t=N.matrices,e=[],i=0,r=t.length;i<r;i++)H=t[i],e.push(new V(H._[0],H._[3],H._[2],H._[1],H._[4],H._[5]));return e}(),this.colors=function(){for(var t=N.colors,e=[],i=0,r=t.length;i<r;i++)D=t[i],e.push(new j(D._[0],D._[1],D._[2],D._[3]));return e}(),this.alphaTransforms=function(){for(var t=N.alphaTransforms,e=[],i=0,r=t.length;i<r;i++)O=t[i],e.push(new U(O._[0]));return e}(),this.colorTransforms=function(){for(var t=N.colorTransforms,e=[],i=0,r=t.length;i<r;i++)D=t[i],e.push(new G(D.multi._[0],D.multi._[1],D.multi._[2],D.multi._[3],D.add._[0],D.add._[1],D.add._[2],D.add._[3]));return e}(),this.objects=N.objects,this.textures=N.textures,this.textureFragments=N.textureFragments,this.bitmaps=N.bitmaps,this.bitmapExs=N.bitmapExs,this.fonts=N.fonts,this.textProperties=N.textProperties,this.texts=N.texts,this.particleDatas=N.particleDatas,this.particles=N.particles,this.programObjects=N.programObjects,this.graphicObjects=N.graphicObjects,this.graphics=N.graphics,this.animations=N.animations,this.buttonConditions=N.buttonConditions,this.buttons=N.buttons,this.labels=N.labels,this.instanceNames=N.instanceNames,this.events=N.events,this.places=N.places,this.controlMoveMs=N.controlMoveMs,this.controlMoveCs=N.controlMoveCs,this.controlMoveMCs=N.controlMoveMCs,this.controlMoveMCBs=N.controlMoveMCBs,this.controls=N.controls,this.frames=N.frames,this.movieClipEvents=N.movieClipEvents,this.movies=N.movies,this.movieLinkages=N.movieLinkages,this.strings=N.strings,this.stringMap=N.stringMap,this.eventMap=N.eventMap,this.instanceNameMap=N.instanceNameMap,this.movieLinkageMap=N.movieLinkageMap,this.movieLinkageNameMap=N.movieLinkageNameMap,this.programObjectMap=N.programObjectMap,this.labelMap=N.labelMap,this.bitmapMap=N.bitmapMap,this.useScript=N.useScript,this.useTextureAtlas=N.useTextureAtlas):(this.stringMap={},this.eventMap={},this.instanceNameMap={},this.movieLinkageMap={},this.movieLinkageNameMap={},this.programObjectMap={},this.labelMap=[],this.bitmapMap={},null!=this.header?(this.useScript=0!=(this.header.option&tt.Constant.OPTION_USE_SCRIPT),this.useTextureAtlas=0!=(this.header.option&tt.Constant.OPTION_USE_TEXTUREATLAS)):(this.useScript=!1,this.useTextureAtlas=!1))}function qt(){}function Qt(){return Qt.__super__.constructor.apply(this,arguments)}function Zt(){this.int32Array=new Int32Array,this.float32Array=new Float32Array}function Jt(){}function $t(){}function te(){}function ee(t,e,i,r){this.lwf=t,this.parent=e,this.type=i,this.objectId=r,this.matrixId=null,this.colorTransformId=null,this.matrixIdChanged=!0,this.colorTransformIdChanged=!0,this.matrix=new V(0,0,0,0,0,0),this.colorTransform=new G(0,0,0,0,0,0,0,0),this.execCount=0,this.updated=!1,this.isButton=this.type===z.BUTTON,this.isMovie=this.type===z.MOVIE||this.type===z.ATTACHEDMOVIE,this.isParticle=this.type===z.PARTICLE,this.isProgramObject=this.type===z.PROGRAMOBJECT,this.isText=this.type===z.TEXT,this.isBitmapClip=!1}function ie(t,e,i){var r,s,n,o,a,h,l,c;for(ie.__super__.constructor.call(this,t,e,z.GRAPHIC,i),h=(r=t.data.graphics[i]).graphicObjects,this.displayList=[],o=t.data.graphicObjects,a=c=0;0<=h?c<h:h<c;a=0<=h?++c:--c)if(-1!==(n=(s=o[r.graphicObjectId+a]).graphicObjectId)){switch(s.graphicObjectType){case f.BITMAP:l=new u(t,e,n);break;case f.BITMAPEX:l=new d(t,e,n);break;case f.TEXT:l=new W(t,e,n)}l.exec(),this.displayList[a]=l}}function re(t,e,i){re.__super__.constructor.call(this,t,e,z.BITMAP,i),this.dataMatrixId=t.data.bitmaps[i].matrixId,this.renderer=t.rendererFactory.constructBitmap(t,i,this)}function se(t,e,i){se.__super__.constructor.call(this,t,e,z.BITMAPEX,i),this.dataMatrixId=t.data.bitmapExs[i].matrixId,this.renderer=t.rendererFactory.constructBitmapEx(t,i,this)}function ne(t,e,i,r){var s,n;null==r&&(r=-1),ne.__super__.constructor.call(this,t,e,z.TEXT,i),n=t.data.texts[i],this.dataMatrixId=n.matrixId,-1!==n.nameStringId?this.name=t.data.strings[n.nameStringId]:0<=r&&r<t.data.instanceNames.length&&-1!==(s=t.getInstanceNameStringId(r))&&(this.name=t.data.strings[s]),this.renderer=t.rendererFactory.constructText(t,i,this)}function oe(t,e,i){oe.__super__.constructor.call(this,t,e,z.PARTICLE,i),this.dataMatrixId=t.data.particles[i].matrixId,this.renderer=t.rendererFactory.constructParticle(t,i,this)}function ae(t,e,i){var r,s;ae.__super__.constructor.call(this,t,e,z.PROGRAMOBJECT,i),s=t.data.programObjects[i],this.dataMatrixId=s.matrixId,null!=(r=t.getProgramObjectConstructor(i))&&(this.renderer=r(this,i,s.width,s.height))}function he(t,e,i,r,s){var n,o;he.__super__.constructor.call(this,t,e,i,r),this.prevInstance=null,this.nextInstance=null,this.linkInstance=null,this.instanceId=s>=t.data.instanceNames.length?-1:s,0<=this.instanceId&&(-1!==(o=t.getInstanceNameStringId(this.instanceId))&&(this.name=t.data.strings[o],null!=e&&(e[this.name]=this)),null!=(n=this.lwf.getInstance(this.instanceId))&&(n.prevInstance=this),this.nextInstance=n,this.lwf.setInstance(this.instanceId,this))}function le(t,e,i,r,s,n){null==s&&(s=null),null==n&&(n=null),le.__super__.constructor.call(this,t,e,z.BUTTON,i,r),this.matrixId=s,this.colorTransformId=n,this.invert=new V,this.hitX=Number.MIN_VALUE,this.hitY=Number.MIN_VALUE,0<=i?(this.data=t.data.buttons[i],this.dataMatrixId=this.data.matrixId,this.width=this.data.width,this.height=this.data.height):(this.width=0,this.height=0),this.handler=t.getButtonEventHandlers(this),null!=this.handler&&this.handler.call("load",this)}function ce(t,e){this.parent=t,this.child=e,this.lwf=this.parent.lwf}function ue(t){this.lwf=t,this.matrix=new V,this.colorTransform=new G,this.scaleX=1,this.scaleY=1,this.rotation=0,this.hasMatrix=!1,this.hasColorTransform=!1,this.clearRenderingOffset()}function de(t,e,i){var r,s,n;de.__super__.constructor.call(this,t,e,z.BITMAP,i),this.isBitmapClip=!0,r=t.data.bitmaps[i],s=t.data.textureFragments[r.textureFragmentId],n=t.data.textures[s.textureId],this.width=s.w/n.scale,this.height=s.h/n.scale,this.offsetX=s.x,this.offsetY=s.y,this.originalWidth=s.ow,this.originalHeight=s.oh,this.dataMatrixId=r.matrixId,this.renderer=t.rendererFactory.constructBitmap(t,i,this),this.depth=-1,this.visible=!0,this.regX=0,this.regY=0,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.alpha=1,this._scaleX=this.scaleX,this._scaleY=this.scaleY,this._rotation=this.rotation,this._cos=1,this._sin=0,this._=Y.available?new Float32Array(8):[],this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0,this._[6]=0,this._[7]=0}function pe(t,e,i,r,s,n,o,a,h){var l,c,u;null==s&&(s=null),null==n&&(n=null),null==o&&(o=!1),null==a&&(a=null),null==h&&(h=null),c=o?z.ATTACHEDMOVIE:z.MOVIE,pe.__super__.constructor.call(this,t,e,c,i,r),null!=h&&(this.name=h),this.matrixId=s,this.colorTransformId=n,this.data=t.data.movies[i],this.totalFrames=this.data.frames,this.instanceHead=null,this.instanceTail=null,this.currentFrameInternal=-1,this.execedFrame=-1,this.animationPlayedFrame=-1,this.lastControlOffset=-1,this.lastControls=-1,this.lastHasButton=!1,this.lastControlAnimationOffset=-1,this.skipped=!1,this.postLoaded=!1,this.active=!0,this.visible=!0,this.playing=!0,this.jumped=!1,this.overriding=!1,this.attachMovieExeced=!1,this.attachMoviePostExeced=!1,this.movieExecCount=-1,this.postExecCount=-1,this.eventHandlers={},this.requestedCalculateBounds=!1,this.calculateBoundsCallback=null,this.currentLabelsCache=null,this.currentLabelCache={},this.property=new N(t),this.matrix0=new V,this.matrix1=new V,this.colorTransform0=new G,this.colorTransform1=new G,this.blendMode="normal",this.displayList=[],this.attachName=null,this.depth=null,this.hasButton=!1,this.getMovieFunctions(),i===this.lwf.data.header.rootMovieId&&null!=(l=null!=(u=this.lwf.functions)?u.init:void 0)&&l.call(this),null!=this.loadFunc&&this.loadFunc.call(this),this.playAnimation(A.LOAD),this.handler=new B,this.handler.concat(t.getMovieEventHandlers(this)),this.handler.concat(a),this.handler.empty||this.handler.call("load",this),t.execMovieCommand()}function fe(){this.clear()}function me(){this.types=ft,me.__super__.constructor.apply(this,arguments)}function ye(){this.types=mt,ye.__super__.constructor.apply(this,arguments)}function _e(t,e,i,r){null==e&&(e=null),null==i&&(i=null),this.privateData=null!=r?r:null,this.data=t,null!=i&&(this.functions=i()),this.width=this.data.header.width,this.height=this.data.header.height,this.backgroundColor=this.data.header.backgroundColor,this.name=this.data.strings[this.data.header.nameStringId],this.interactive=0<this.data.buttonConditions.length,this.url=null,this.lwfInstanceId=null,this.frameRate=this.data.header.frameRate,this.active=!0,this.fastForwardTimeout=15,this.fastForward=!1,this.frameSkip=!0,this.execLimit=3,this.tick=1/this.frameRate,this.roundOffTick=1/60*.05,this.time=0,this.attachVisible=!0,this.execCount=0,this.renderCount=0,this.isExecDisabled=!1,this.isPropertyDirty=!1,this.isLWFAttached=!1,this.interceptByNotAllowOrDenyButtons=!0,this.intercepted=!1,this.needsUpdate=!1,this.needsUpdateForAttachLWF=!1,this.textScale=1,this.pointX=Number.MIN_VALUE,this.pointY=Number.MIN_VALUE,this.pressing=!1,this.buttonHead=null,this.blendModes=[],this.maskModes=[],this._tweens=null,this.useVertexColor=!1,this.interactive||1!==this.data.frames.length||this.functions&&(this.functions._root_load||this.functions._root_postLoad||this.functions._root_unload||this.functions._root_enterFrame||this.functions._root_update||this.functions._root_render)||this.disableExec(),this.property=new N(this),this.instances=[],this.execHandlers=null,this.eventHandlers=[],this.genericEventHandlers=[],this.movieEventHandlers=[],this.buttonEventHandlers=[],this.movieCommands={},this.programObjectConstructors=[],this.loadedLWFs={},this.parent=null,this.attachName=null,this.depth=null,this.matrix=new V,this.matrixIdentity=new V,this.execMatrix=new V,this.colorTransform=new G,this.colorTransformIdentity=new G,this.execColorTransform=new G,this.setRendererFactory(e),this.init()}function ge(t,e,i,r,s,n,o,a){var h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C;for(this.resourceCache=e,this.cache=i,this.stage=r,this.textInSubpixel=s,this.use3D=n,this.recycleTextCanvas=o,this.quirkyClearRect=a,this.needsRenderForInactive=!0,this.maskMode="normal",this.bitmapContexts=[],f=0,_=(x=t.bitmaps).length;f<_;f++)-1!==(h=x[f]).textureFragmentId&&((l=new tt.BitmapEx).matrixId=h.matrixId,l.textureFragmentId=h.textureFragmentId,l.u=0,l.v=0,l.w=1,l.h=1,l.attribute=0,this.bitmapContexts.push(new ot(this,t,l)));for(this.bitmapExContexts=[],m=0,g=(M=t.bitmapExs).length;m<g;m++)-1!==(l=M[m]).textureFragmentId&&this.bitmapExContexts.push(new ot(this,t,l));for(this.textContexts=[],y=0,v=(b=t.texts).length;y<v;y++)d=b[y],this.textContexts.push(new dt(this,t,d));(u=this.stage.style).display="block",u.overflow="hidden",u.webkitUserSelect="none",this.use3D&&(u.webkitTransform="translateZ(0)",u.webkitTransformStyle="preserve-3d"),p=(C=this.getStageSize())[0],c=C[1],0===p&&0===c&&(u.width=t.header.width+"px",u.height=t.header.height+"px"),this.initCommands(),this.destructedRenderers=[]}function ve(t,e,i){var r,s,n,o,a,h,l,c,u,d,p,f,m,y,_;this.factory=t,this.data=e,this.fragment=e.textureFragments[i.textureFragmentId],d=e.textures[this.fragment.textureId],a=(o=this.factory.cache[d.filename]).width/d.width,this.scale=1/(d.scale*a),y=this.fragment.x,_=this.fragment.y,p=this.fragment.u,f=this.fragment.v,m=this.fragment.w,n=this.fragment.h,y+=r=i.u*m,_+=s=i.v*n,p+=r,f+=s,m*=i.w,n*=i.h,this.x=Math.round(y*a),this.y=Math.round(_*a),l=Math.round(p*a),c=Math.round(f*a),h=this.fragment.rotated?(u=Math.round(n*a),Math.round(m*a)):(u=Math.round(m*a),Math.round(n*a)),this.h=Math.round(n*a),this.node=document.createElement("div"),null!=o.src?this.node.style.background="url("+o.src+") transparent":void 0!==document.getCSSCanvasContext?this.node.style.background="-webkit-canvas("+o.name+") transparent":this.node.style.background="url("+o.toDataURL("image/png")+") transparent",this.node.style.backgroundPosition=-l+"px "+-c+"px",this.node.style.width=u+"px",this.node.style.height=h+"px",this.node.style.display="block",this.node.style.pointerEvents="none",this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.width=u,this.height=h,this.cache=[]}function xe(t){this.context=t,this.matrix=new V(0,0,0,0,0,0),this.alpha=-1,this.zIndex=-1,this.visible=!0,!this.context.fragment.rotated&&0===this.context.x&&0===this.context.y&&1===this.context.scale||(this.matrixForAtlas=new V),this.cmd={}}function Me(t,e,i){var r;this.factory=t,this.data=e,this.text=i,this.str=this.data.strings[this.text.stringId],this.textProperty=this.data.textProperties[this.text.textPropertyId],r=this.data.fonts[this.textProperty.fontId],this.textColor=this.data.colors[this.text.colorId],-1!==this.textProperty.strokeColorId&&(this.strokeColor=this.data.colors[this.textProperty.strokeColorId]),-1!==this.textProperty.shadowColorId&&(this.shadowColor=this.data.colors[this.textProperty.shadowColorId]),this.fontName=this.data.strings[r.stringId]+",sans-serif",this.fontChanged=!0,this.letterSpacing=r.letterSpacing+this.textProperty.letterSpacing}function be(t,e,i){var r;this.lwf=t,this.context=e,this.textObject=i,this.str=null!=(r=this.textObject.parent[this.textObject.name])?r:this.context.str,null!=this.str&&(this.str=String(this.str)),this.matrixForCheck=new V(0,0,0,0,0,0),this.matrix=new V,this.color=new j,this.textRendered=!1,this.textScale=this.lwf.textScale,this.currentShadowMarginY=0,this.changed=!1,this.initCanvas()}function Ce(){return Ce.__super__.constructor.apply(this,arguments)}function Ie(t,e,i){this.lwf=t,this.context=e,this.textObject=i,Ie.__super__.constructor.call(this,this.lwf,this.context,this.textObject),this.alpha=-1,this.zIndex=-1,this.visible=!1,this.node=null,this.currentCanvas=null,this.cmd={}}function Ee(t,e){this.factory=t,this.node=e,this.appended=!1,this.node.style.visibility="hidden",this.matrix=new V(0,0,0,0,0,0),this.matrixForDom=new V(0,0,0,0,0,0),this.matrixForRender=new V(0,0,0,0,0,0),this.alpha=-1,this.zIndex=-1,this.visible=!1}function we(){}function Fe(){this.cache={},this.lwfInstanceIndex=0,this.canvasIndex=0}function Le(t,e,i,r,s,n,o){var a,h,l,c,u,d,p,f,m,y,_,g;for(this.resourceCache=e,this.cache=i,this.stage=r,this.textInSubpixel=s,this.needsClear=n,this.quirkyClearRect=o,this.blendMode="normal",this.maskMode="normal",this.stage.style.webkitUserSelect="none",this.stage.style.webkitTransform="translateZ(0)",this.stageContext=this.stage.getContext("2d"),0===this.stage.width&&0===this.stage.height&&(this.stage.width=t.header.width,this.stage.height=t.header.height),this.bitmapContexts=[],c=0,p=(y=t.bitmaps).length;c<p;c++)-1!==(a=y[c]).textureFragmentId&&((h=new tt.BitmapEx).matrixId=a.matrixId,h.textureFragmentId=a.textureFragmentId,h.u=0,h.v=0,h.w=1,h.h=1,h.attribute=0,this.bitmapContexts.push(new x(this,t,h)));for(this.bitmapExContexts=[],u=0,f=(_=t.bitmapExs).length;u<f;u++)-1!==(h=_[u]).textureFragmentId&&this.bitmapExContexts.push(new x(this,t,h));for(this.textContexts=[],d=0,m=(g=t.texts).length;d<m;d++)l=g[d],this.textContexts.push(new M(this,t,l));this.initCommands()}function ke(t,e,i){var r,s,n,o,a,h,l,c,u,d,p,f,m;this.factory=t,this.data=e,this.fragment=this.data.textureFragments[i.textureFragmentId],l=this.data.textures[this.fragment.textureId],this.image=this.factory.cache[l.filename],a=this.image.width,(p=!!l.filename.match(/_withpadding/))&&(a-=2),o=a/l.width,this.scale=1/(l.scale*o),h=null,0!=(i.attribute&tt.BitmapEx.Attribute.REPEAT_S)&&(h="repeat-x"),0!=(i.attribute&tt.BitmapEx.Attribute.REPEAT_T)&&(h=null!=h?"repeat":"repeat-y"),this.pattern=null!=h?this.factory.stageContext.createPattern(this.image,h):null,f=this.fragment.x,m=this.fragment.y,c=this.fragment.u,u=this.fragment.v,d=this.fragment.w,n=this.fragment.h,p&&(--f,--m,d+=2,n+=2),f+=r=i.u*d,m+=s=i.v*n,c+=r,u+=s,d*=i.w,n*=i.h,this.x=Math.round(f*o),this.y=Math.round(m*o),this.u=Math.round(c*o),this.v=Math.round(u*o),this.fragment.rotated?(this.w=Math.round(n*o),this.h=Math.round(d*o)):(this.w=Math.round(d*o),this.h=Math.round(n*o)),this.u+this.w>this.image.width&&(this.w=this.image.width-this.u),this.v+this.h>this.image.height&&(this.h=this.image.height-this.v),this.imageHeight=n*o}function Te(t){var e;this.context=t,e=this.context.fragment,this.matrix=new V(0,0,0,0,0,0),!e.rotated&&0===this.context.x&&0===this.context.y&&1===this.context.scale||(this.matrixForAtlas=new V),this.cmd=new i}function Be(){return Be.__super__.constructor.apply(this,arguments)}function Se(){Se.__super__.constructor.apply(this,arguments),this.cmd=new i}function Ae(){return Ae.__super__.constructor.apply(this,arguments)}function Pe(t,e,i){var r,s;switch(this.name=e,this.attributes=i.attributes,this.aTextureCoordSize=i.aTextureCoordSize,s=this.loadShader(t,t.VERTEX_SHADER,i.vertex),r=this.loadShader(t,t.FRAGMENT_SHADER,i.fragment),this.shaderProgram=t.createProgram(),t.attachShader(this.shaderProgram,s),t.attachShader(this.shaderProgram,r),t.linkProgram(this.shaderProgram),t.getProgramParameter(this.shaderProgram,t.LINK_STATUS)||alert("Unable to initialize the shader program."),t.useProgram(this.shaderProgram),this.aVertexPosition=t.getAttribLocation(this.shaderProgram,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(this.shaderProgram,"aTextureCoord"),this.uPMatrix=t.getUniformLocation(this.shaderProgram,"uPMatrix"),this.uMatrix=t.getUniformLocation(this.shaderProgram,"uMatrix"),this.uTexture=t.getUniformLocation(this.shaderProgram,"uTexture"),this.name){case"vertexColor":this.aColor=t.getAttribLocation(this.shaderProgram,"aColor"),this.aAdditionalColor=null,this.isVertexColor=!0,this.isAdditionalColor=!1;break;case"additionalColor":this.aColor=t.getAttribLocation(this.shaderProgram,"aColor"),this.aAdditionalColor=t.getAttribLocation(this.shaderProgram,"aAdditionalColor"),this.isVertexColor=!1,this.isAdditionalColor=!0;break;default:this.aColor=null,this.aAdditionalColor=null,this.isVertexColor=!1,this.isAdditionalColor=!1}}function Re(t,e,i,r,s,n,o,a){var h,l,c,u,d,p,f,m,y,_,g,v;for(this.data=t,this.resourceCache=e,this.cache=i,this.stage=r,this.textInSubpixel=s,this.needsClear=n,this.useVertexColor=o,this.useAlwaysAdditionalColorShader=a,this.maxAttributes=this.useVertexColor?12:5,this.initGL(),this.drawCalls=0,this.blendMode="normal",this.maskMode="normal",this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.propertyMatrix=new V,this.vertexData=new Float32Array(1),this.indexData=new Uint16Array(1),this.useVertexColor&&(this.color=new Float32Array(8)),this.backGroundColor=[0,0,0,1],this.bitmapContexts=[],u=0,f=(_=t.bitmaps).length;u<f;u++)-1!==(h=_[u]).textureFragmentId&&((l=new tt.BitmapEx).matrixId=h.matrixId,l.textureFragmentId=h.textureFragmentId,l.u=0,l.v=0,l.w=1,l.h=1,l.attribute=0,this.bitmapContexts.push(new q(this,t,l)));for(this.bitmapExContexts=[],d=0,m=(g=t.bitmapExs).length;d<m;d++)-1!==(l=g[d]).textureFragmentId&&this.bitmapExContexts.push(new q(this,t,l));for(this.textContexts=[],p=0,y=(v=t.texts).length;p<y;p++)c=v[p],this.textContexts.push(new st(this,t,c));this.initCommands()}function Oe(t,e,i){var r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B;this.factory=t,a=(this.data=e).textureFragments[i.textureFragmentId],m=e.textures[a.textureId],this.preMultipliedAlpha=m.format===tt.Constant.TEXTUREFORMAT_PREMULTIPLIEDALPHA,o=m.filename,u=null!=(B=(c=this.factory.cache[o]).src)?B:c.name,(d=0!=(i.attribute&tt.BitmapEx.Attribute.REPEAT_S))&&(u+="_REPEAT_S"),p=0!=(i.attribute&tt.BitmapEx.Attribute.REPEAT_T),d&&(u+="_REPEAT_T"),null!=(n=this.factory.textures[u])?(this.texture=n[0],f=n[1],n[2]):(f=1/m.scale,h=this.factory.glContext,this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,c),this.factory.setTexParameter(h,d,p),this.factory.textures[u]=[this.texture,f,i.attribute]),_=m.width,y=m.height,E=a.x,L=a.y,g=a.u,M=a.v,I=a.w,l=a.h,g+=r=i.u*I,M+=s=i.v*l,w=(E+=r)*f,k=(L+=s)*f,F=(E+(I*=i.w))*f,T=(L+(l*=i.h))*f,this.vertexData=new Float32Array(8),this.vertexData[0]=F,this.vertexData[1]=T,this.vertexData[2]=F,this.vertexData[3]=k,this.vertexData[4]=w,this.vertexData[5]=T,this.vertexData[6]=w,this.vertexData[7]=k,this.uv=new Float32Array(8),0===a.rotated?(v=g/_,b=M/y,x=(g+I)/_,C=(M+l)/y,this.uv[0]=x,this.uv[1]=C,this.uv[2]=x,this.uv[3]=b,this.uv[4]=v,this.uv[5]=C,this.uv[6]=v):(v=g/_,b=M/y,x=(g+l)/_,C=(M+I)/y,this.uv[0]=v,this.uv[1]=C,this.uv[2]=x,this.uv[3]=C,this.uv[4]=v,this.uv[5]=b,this.uv[6]=x),this.uv[7]=b}function De(t){this.context=t,this.cmd=new Z(this.context,this.context.texture,null)}function Ne(){return Ne.__super__.constructor.apply(this,arguments)}function He(t,e,i){var r,s,n,o,a,h,l,c,u,d;this.factory=t,this.data=e,this.text=i,He.__super__.constructor.call(this,this.factory,this.data,this.text),this.preMultipliedAlpha=!1,u=o=this.text.width,d=n=this.text.height,this.vertexData=new Float32Array(8),this.vertexData[0]=u,this.vertexData[1]=d,this.vertexData[2]=u,this.vertexData[3]=0,this.vertexData[4]=0,this.vertexData[5]=d,this.vertexData[6]=0,this.vertexData[7]=0,h=(a=1/(s=2*o))+(2*o-2)/s,c=(l=1/(r=2*n))+(2*n-1)/r,this.uv=new Float32Array(8),this.uv[0]=h,this.uv[1]=c,this.uv[2]=h,this.uv[3]=l,this.uv[4]=a,this.uv[5]=c,this.uv[6]=a,this.uv[7]=l}function We(t,e,i){this.lwf=t,this.context=e,this.textObject=i,We.__super__.constructor.call(this,this.lwf,this.context,this.textObject),this.cmd=new Z(this.context,null,this.matrix)}gt.available="undefined"!=typeof Float32Array,Y=gt,O=function(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0},vt.prototype.getTranslateX=function(){return this._[0]},vt.prototype.setTranslateX=function(t){this._[0]=t},vt.prototype.getTranslateY=function(){return this._[1]},vt.prototype.setTranslateY=function(t){this._[1]=t},void 0!==(X=vt).prototype.__defineGetter__?(X.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),X.prototype.__defineSetter__("translateX",function(t){return this.setTranslateX(t)}),X.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),X.prototype.__defineSetter__("translateY",function(t){return this.setTranslateY(t)})):void 0!==Object.defineProperty&&(Object.defineProperty(X.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(t){return this.setTranslateX(t)}}),Object.defineProperty(X.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(t){return this.setTranslateY(t)}})),xt.prototype.clear=function(){this._[0]=1,this._[1]=0,this._[2]=0,this._[3]=1,this._[4]=0,this._[5]=0},xt.prototype.set=function(t){for(var e,i=e=0;e<6;i=++e)this._[i]=t._[i];return this},xt.prototype.setWithComparing=function(t){var e,i,r;if(null===t)return!1;for(e=!1,i=r=0;r<6;i=++r)this._[i]!==t._[i]&&(this._[i]=t._[i],e=!0);return e},xt.prototype.getScaleX=function(){return this._[0]},xt.prototype.setScaleX=function(t){this._[0]=t},xt.prototype.getSkew1=function(){return this._[1]},xt.prototype.setSkew1=function(t){this._[1]=t},xt.prototype.getSkew0=function(){return this._[2]},xt.prototype.setSkew0=function(t){this._[2]=t},xt.prototype.getScaleY=function(){return this._[3]},xt.prototype.setScaleY=function(t){this._[3]=t},xt.prototype.getTranslateX=function(){return this._[4]},xt.prototype.setTranslateX=function(t){this._[4]=t},xt.prototype.getTranslateY=function(){return this._[5]},xt.prototype.setTranslateY=function(t){this._[5]=t},void 0!==(V=xt).prototype.__defineGetter__?(V.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),V.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),V.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),V.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),V.prototype.__defineGetter__("skew0",function(){return this.getSkew0()}),V.prototype.__defineSetter__("skew0",function(t){return this.setSkew0(t)}),V.prototype.__defineGetter__("skew1",function(){return this.getSkew1()}),V.prototype.__defineSetter__("skew1",function(t){return this.setSkew1(t)}),V.prototype.__defineGetter__("translateX",function(){return this.getTranslateX()}),V.prototype.__defineSetter__("translateX",function(t){return this.setTranslateX(t)}),V.prototype.__defineGetter__("translateY",function(){return this.getTranslateY()}),V.prototype.__defineSetter__("translateY",function(t){return this.setTranslateY(t)})):void 0!==Object.defineProperty&&(Object.defineProperty(V.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(V.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(V.prototype,"skew0",{get:function(){return this.getSkew0()},set:function(t){return this.setSkew0(t)}}),Object.defineProperty(V.prototype,"skew1",{get:function(){return this.getSkew1()},set:function(t){return this.setSkew1(t)}}),Object.defineProperty(V.prototype,"translateX",{get:function(){return this.getTranslateX()},set:function(t){return this.setTranslateX(t)}}),Object.defineProperty(V.prototype,"translateY",{get:function(){return this.getTranslateY()},set:function(t){return this.setTranslateY(t)}})),Mt.prototype.set=function(t,e,i,r){var s,n,o;if("object"==typeof t)for(s=t,n=o=0;o<4;n=++o)this._[n]=s._[n];else this._[0]=t,this._[1]=e,this._[2]=i,this._[3]=r},Mt.prototype.isZero=function(){return 0===this._[0]&&0===this._[1]&&0===this._[2]&&0===this._[3]},Mt.prototype.getRed=function(){return this._[0]},Mt.prototype.setRed=function(t){this._[0]=t},Mt.prototype.getGreen=function(){return this._[1]},Mt.prototype.setGreen=function(t){this._[1]=t},Mt.prototype.getBlue=function(){return this._[2]},Mt.prototype.setBlue=function(t){this._[2]=t},Mt.prototype.getAlpha=function(){return this._[3]},Mt.prototype.setAlpha=function(t){this._[3]=t},void 0!==(j=Mt).prototype.__defineGetter__?(j.prototype.__defineGetter__("red",function(){return this.getRed()}),j.prototype.__defineSetter__("red",function(t){return this.setRed(t)}),j.prototype.__defineGetter__("green",function(){return this.getGreen()}),j.prototype.__defineSetter__("green",function(t){return this.setGreen(t)}),j.prototype.__defineGetter__("blue",function(){return this.getBlue()}),j.prototype.__defineSetter__("blue",function(t){return this.setBlue(t)}),j.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),j.prototype.__defineSetter__("alpha",function(t){return this.setAlpha(t)})):void 0!==Object.defineProperty&&(Object.defineProperty(j.prototype,"red",{get:function(){return this.getRed()},set:function(t){return this.setRed(t)}}),Object.defineProperty(j.prototype,"green",{get:function(){return this.getGreen()},set:function(t){return this.setGreen(t)}}),Object.defineProperty(j.prototype,"blue",{get:function(){return this.getBlue()},set:function(t){return this.setBlue(t)}}),Object.defineProperty(j.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(t){return this.setAlpha(t)}})),bt.prototype.getAlpha=function(){return this._[0]},bt.prototype.setAlpha=function(t){this._[0]=t},void 0!==(U=bt).prototype.__defineGetter__?(U.prototype.__defineGetter__("alpha",function(){return this.getAlpha()}),U.prototype.__defineSetter__("alpha",function(t){return this.setAlpha(t)})):void 0!==Object.defineProperty&&Object.defineProperty(U.prototype,"alpha",{get:function(){return this.getAlpha()},set:function(t){return this.setAlpha(t)}}),Ct.prototype.clear=function(){this.multi.set(1,1,1,1),this.add.set(0,0,0,0)},Ct.prototype.set=function(t){return this.multi.set(t.multi),this.add.set(t.add),this},Ct.prototype.hasAdd=function(){return!this.add.isZero()},Ct.prototype.setWithComparing=function(t){var e,i,r,s,n,o,a,h;if(null===t)return!1;for(r=!1,s=t.multi,o=this.multi,n=a=0;a<4;n=++a)o._[n]!==s._[n]&&(o._[n]=s._[n],r=!0);for(i=t.add,e=this.add,n=h=0;h<4;n=++h)e._[n]!==i._[n]&&(e._[n]=i._[n],r=!0);return r},G=Ct,It.Constant=(Et.HEADER_SIZE=332,Et.FORMAT_VERSION_0=20,Et.FORMAT_VERSION_1=18,Et.FORMAT_VERSION_2=17,Et.FORMAT_VERSION_141211=1315345,Et.HEADER_SIZE_COMPAT0=324,Et.FORMAT_VERSION_COMPAT0_0=19,Et.FORMAT_VERSION_COMPAT0_1=18,Et.FORMAT_VERSION_COMPAT0_2=17,Et.HEADER_SIZE_COMPAT1=324,Et.FORMAT_VERSION_COMPAT1_0=18,Et.FORMAT_VERSION_COMPAT1_1=16,Et.FORMAT_VERSION_COMPAT1_2=16,Et.FORMAT_TYPE=0,Et.OPTION_OFFSET=7,Et.OPTION_USE_SCRIPT=1,Et.OPTION_USE_TEXTUREATLAS=2,Et.OPTION_COMPRESSED=4,Et.OPTION_USE_LUASCRIPT=8,Et.MATRIX_FLAG=1<<31,Et.COLORTRANSFORM_FLAG=1<<31,Et.TEXTUREFORMAT_NORMAL=0,Et.TEXTUREFORMAT_PREMULTIPLIEDALPHA=1,Et.BLEND_MODE_NORMAL=0,Et.BLEND_MODE_ADD=1,Et.BLEND_MODE_LAYER=2,Et.BLEND_MODE_ERASE=3,Et.BLEND_MODE_MASK=4,Et.BLEND_MODE_MULTIPLY=5,Et.BLEND_MODE_SCREEN=6,Et.BLEND_MODE_SUBTRACT=7,Et),It.StringBase=function(t){this.stringId=t},It.Texture=(wt.prototype.setFilename=function(t){this.filename=t.strings[this.stringId]},wt),It.TextureReplacement=function(t,e,i,r,s){this.filename=t,this.format=e,this.width=i,this.height=r,this.scale=s},It.TextureFragment=(Ft.prototype.setFilename=function(t){this.filename=t.strings[this.stringId]},Ft),It.TextureFragmentReplacement=function(t,e,i,r,s,n,o,a,h,l,c){this.filename=t,this.textureId=e,this.rotated=i,this.x=r,this.y=s,this.u=n,this.v=o,this.w=a,this.h=h,this.ow=l,this.oh=c},It.Bitmap=function(t,e){this.matrixId=t,this.textureFragmentId=e},It.BitmapEx=(kt.Attribute=(Lt.REPEAT_S=1,Lt.REPEAT_T=2,Lt),kt),It.Font=function(t,e){this.stringId=t,this.letterSpacing=e},It.TextProperty=(Bt.Align=(Tt.LEFT=0,Tt.RIGHT=1,Tt.CENTER=2,Tt.ALIGN_MASK=3,Tt.VERTICAL_BOTTOM=4,Tt.VERTICAL_MIDDLE=8,Tt.VERTICAL_MASK=12,Tt),Bt),It.Text=function(t,e,i,r,s,n,o){this.matrixId=t,this.nameStringId=e,this.textPropertyId=i,this.stringId=r,this.colorId=s,this.width=n,this.height=o},It.ParticleData=function(t){this.stringId=t},It.Particle=function(t,e,i){this.matrixId=t,this.colorTransformId=e,this.particleDataId=i},It.ProgramObject=(t(St,It.StringBase),St),It.GraphicObject=(Pt.Type=(At.BITMAP=0,At.BITMAPEX=1,At.TEXT=2,At.GRAPHIC_OBJECT_MAX=3,At),Pt),It.Graphic=function(t,e){this.graphicObjectId=t,this.graphicObjects=e},It.LObject=(Ot.Type=(Rt.BUTTON=0,Rt.GRAPHIC=1,Rt.MOVIE=2,Rt.BITMAP=3,Rt.BITMAPEX=4,Rt.TEXT=5,Rt.PARTICLE=6,Rt.PROGRAMOBJECT=7,Rt.ATTACHEDMOVIE=8,Rt.OBJECT_MAX=9,Rt),Ot),It.Animation=function(t,e){this.animationOffset=t,this.animationLength=e},It.ButtonCondition=(Nt.Condition=(Dt.ROLLOVER=1,Dt.ROLLOUT=2,Dt.PRESS=4,Dt.RELEASE=8,Dt.DRAGOUT=16,Dt.DRAGOVER=32,Dt.RELEASEOUTSIDE=64,Dt.KEYPRESS=128,Dt),Nt),It.Button=function(t,e,i,r,s,n){this.width=t,this.height=e,this.matrixId=i,this.colorTransformId=r,this.conditionId=s,this.conditions=n},It.Label=(t(Ht,It.StringBase),Ht),It.InstanceName=(t(Wt,It.StringBase),Wt),It.Event=(t(Ut,It.StringBase),Ut),It.String=function(t,e){this.stringOffset=t,this.stringLength=e},It.Place=function(t,e,i,r,s){this.depth=t,this.objectId=e,this.instanceId=i,this.matrixId=r,this.blendMode=s},It.ControlMoveM=function(t,e){this.placeId=t,this.matrixId=e},It.ControlMoveC=function(t,e){this.placeId=t,this.colorTransformId=e},It.ControlMoveMC=function(t,e,i){this.placeId=t,this.matrixId=e,this.colorTransformId=i},It.ControlMoveMCB=function(t,e,i,r){this.placeId=t,this.matrixId=e,this.colorTransformId=i,this.blendMode=r},It.Control=(Gt.Type=(jt.MOVE=0,jt.MOVEM=1,jt.MOVEC=2,jt.MOVEMC=3,jt.ANIMATION=4,jt.MOVEMCB=5,jt.CONTROL_MAX=6,jt),Gt),It.Frame=function(t,e){this.controlOffset=t,this.controls=e},It.MovieClipEvent=(Xt.ClipEvent=(Vt.LOAD=1,Vt.UNLOAD=2,Vt.ENTERFRAME=4,Vt),Xt),It.Movie=function(t,e,i,r,s,n,o){this.depths=t,this.labelOffset=e,this.labels=i,this.frameOffset=r,this.frames=s,this.clipEventId=n,this.clipEvents=o},It.MovieLinkage=(t(zt,It.StringBase),zt),It.ItemArray=function(t,e){this.offset=t,this.length=e},It.Header=function(t,e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B,S,A,P,R,O,D,N,H,W,U,j,G,V,X,z,Y,K,q,Q,Z,J){this.id0=t,this.id1=e,this.id2=i,this.id3=r,this.formatVersion0=s,this.formatVersion1=n,this.formatVersion2=o,this.formatVersion=a,this.option=h,this.width=l,this.height=c,this.frameRate=u,this.rootMovieId=d,this.nameStringId=p,this.backgroundColor=f,this.stringBytes=m,this.animationBytes=y,this.translate=_,this.matrix=g,this.color=v,this.alphaTransform=x,this.colorTransform=M,this.objectData=b,this.texture=C,this.textureFragment=I,this.bitmap=E,this.bitmapEx=w,this.font=F,this.textProperty=L,this.text=k,this.particleData=T,this.particle=B,this.programObject=S,this.graphicObject=A,this.graphic=P,this.animation=R,this.buttonCondition=O,this.button=D,this.label=N,this.instanceName=H,this.eventData=W,this.place=U,this.controlMoveM=j,this.controlMoveC=G,this.controlMoveMC=V,this.controlMoveMCB=X,this.control=z,this.frame=Y,this.movieClipEvent=K,this.movie=q,this.movieLinkage=Q,this.stringData=Z,this.lwfLength=J},v=(tt=It).TextProperty.Align,A=tt.MovieClipEvent.ClipEvent,l=tt.ButtonCondition.Condition,p=tt.Constant,z=tt.LObject.Type,P=tt.Control.Type,f=tt.GraphicObject.Type,Yt.END=0,Yt.PLAY=1,Yt.STOP=2,Yt.NEXTFRAME=3,Yt.PREVFRAME=4,Yt.GOTOFRAME=5,Yt.GOTOLABEL=6,Yt.SETTARGET=7,Yt.EVENT=8,Yt.CALL=9,Yt.INSTANCE_TARGET_ROOT=-1,Yt.INSTANCE_TARGET_PARENT=-2,_=Yt,Kt.prototype.check=function(){var t=this.header.formatVersion0,e=this.header.formatVersion1,i=this.header.formatVersion2;return null!=this.header&&"L"===this.header.id0&&"W"===this.header.id1&&"F"===this.header.id2&&(t===tt.Constant.FORMAT_VERSION_0&&e===tt.Constant.FORMAT_VERSION_1&&i===tt.Constant.FORMAT_VERSION_2||t===tt.Constant.FORMAT_VERSION_COMPAT0_0&&e===tt.Constant.FORMAT_VERSION_COMPAT0_1&&i===tt.Constant.FORMAT_VERSION_COMPAT0_2||t===tt.Constant.FORMAT_VERSION_COMPAT1_0&&e===tt.Constant.FORMAT_VERSION_COMPAT1_1&&i===tt.Constant.FORMAT_VERSION_COMPAT1_2)},Kt.prototype.name=function(){return this.strings[this.header.nameStringId]},Kt.prototype.replaceTexture=function(t,e){return!(t<0||t>=textures.length||(textures[t]=e,0))},Kt.prototype.replaceTextureFragment=function(t,e){return!(t<0||t>=textureFragments.length||(textureFragments[t]=e,0))},$=Kt,qt.prototype.readByte=function(){return 255&this.d.charCodeAt(this.index++)},qt.prototype.readChar=function(){return String.fromCharCode(this.readByte())},qt.prototype.readBytes=function(t){var e=this.d.substr(this.index,t);return this.index+=t,e},qt.prototype.readInt32=function(){return(this.readByte()<<0)+(this.readByte()<<8)+(this.readByte()<<16)+(this.readByte()<<24)},qt.prototype.readSingle=function(){var t=this.readByte(),e=this.readByte(),i=this.readByte(),r=this.readByte(),s=(r<<1&255|i>>7)-127,n=(127&i)<<16|e<<8|t;return 0==n&&-127==s?0:(1-2*(r>>7))*(1+n*Math.pow(2,-23))*Math.pow(2,s)},qt.prototype.loadTranslate=function(){return new X(this.readSingle(),this.readSingle())},qt.prototype.loadMatrix=function(){return new V(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},qt.prototype.loadColor=function(){return new j(this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},qt.prototype.loadAlphaTransform=function(){return new U(this.readSingle())},qt.prototype.loadColorTransform=function(){var t=this.loadColor(),e=this.loadColor();return new G(t.red,t.green,t.blue,t.alpha,e.red,e.green,e.blue,e.alpha)},qt.prototype.loadTexture=function(){return new tt.Texture(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle())},qt.prototype.loadTextureFragment=function(){return new tt.TextureFragment(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadTextureFragmentCompat=function(){var t=this.readInt32(),e=this.readInt32(),i=this.readInt32(),r=this.readInt32(),s=this.readInt32(),n=this.readInt32(),o=this.readInt32(),a=this.readInt32(),h=this.readInt32();return new tt.TextureFragment(t,e,i,r,s,n,o,a,h,a,h)},qt.prototype.loadBitmap=function(){return new tt.Bitmap(this.readInt32(),this.readInt32())},qt.prototype.loadBitmapEx=function(){return new tt.BitmapEx(this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readSingle(),this.readSingle(),this.readSingle())},qt.prototype.loadFont=function(){return new tt.Font(this.readInt32(),this.readSingle())},qt.prototype.loadTextProperty=function(){return new tt.TextProperty(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readSingle(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadText=function(){return new tt.Text(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadParticleData=function(){return new tt.ParticleData(this.readInt32())},qt.prototype.loadParticle=function(){return new tt.Particle(this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadProgramObject=function(){return new tt.ProgramObject(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadGraphicObject=function(){return new tt.GraphicObject(this.readInt32(),this.readInt32())},qt.prototype.loadGraphic=function(){return new tt.Graphic(this.readInt32(),this.readInt32())},qt.prototype.loadObject=function(){return new tt.LObject(this.readInt32(),this.readInt32())},qt.prototype.loadAnimation=function(){return new tt.Animation(this.readInt32(),this.readInt32())},qt.prototype.loadButtonCondition=function(){return new tt.ButtonCondition(this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadButton=function(){return new tt.Button(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadLabel=function(){return new tt.Label(this.readInt32(),this.readInt32())},qt.prototype.loadInstanceName=function(){return new tt.InstanceName(this.readInt32())},qt.prototype.loadEvent=function(){return new tt.Event(this.readInt32())},qt.prototype.loadString=function(){return new tt.String(this.readInt32(),this.readInt32())},qt.prototype.loadPlace=function(){var t=this.readInt32(),e=this.readInt32(),i=this.readInt32(),r=this.readInt32();return new tt.Place(16777215&t,e,i,r,t>>24)},qt.prototype.loadControlMoveM=function(){return new tt.ControlMoveM(this.readInt32(),this.readInt32())},qt.prototype.loadControlMoveC=function(){return new tt.ControlMoveC(this.readInt32(),this.readInt32())},qt.prototype.loadControlMoveMC=function(){return new tt.ControlMoveMC(this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadControlMoveMCB=function(){return new tt.ControlMoveMCB(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadControl=function(){return new tt.Control(this.readInt32(),this.readInt32())},qt.prototype.loadFrame=function(){return new tt.Frame(this.readInt32(),this.readInt32())},qt.prototype.loadMovieClipEvent=function(){return new tt.MovieClipEvent(this.readInt32(),this.readInt32())},qt.prototype.loadMovie=function(){return new tt.Movie(this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32(),this.readInt32())},qt.prototype.loadMovieLinkage=function(){return new tt.MovieLinkage(this.readInt32(),this.readInt32())},qt.prototype.loadItemArray=function(){return new tt.ItemArray(this.readInt32(),this.readInt32())},qt.prototype.loadHeader=function(){var t,e,i,r,s,n,o,a=this.readChar(),h=this.readChar(),l=this.readChar(),c=this.readChar(),u=this.readByte(),d=this.readByte(),p=this.readByte(),f=u<<16|d<<8|p,m=this.readByte(),y=this.readInt32(),_=this.readInt32(),g=this.readInt32(),v=this.readInt32(),x=this.readInt32(),M=this.readInt32(),b=this.loadItemArray(),C=this.loadItemArray(),I=this.loadItemArray(),E=this.loadItemArray(),w=this.loadItemArray(),F=this.loadItemArray(),L=this.loadItemArray(),k=this.loadItemArray(),T=this.loadItemArray(),B=this.loadItemArray(),S=this.loadItemArray(),A=this.loadItemArray(),P=this.loadItemArray(),R=this.loadItemArray(),O=this.loadItemArray(),D=this.loadItemArray(),N=this.loadItemArray(),H=this.loadItemArray(),W=this.loadItemArray(),U=this.loadItemArray(),j=this.loadItemArray(),G=this.loadItemArray(),V=this.loadItemArray(),X=this.loadItemArray(),z=this.loadItemArray(),Y=this.loadItemArray(),K=this.loadItemArray(),q=this.loadItemArray(),Q=this.loadItemArray(),Z=this.loadItemArray(),J=null;return J=f>=tt.Constant.FORMAT_VERSION_141211?this.loadItemArray():new tt.ItemArray(0,0),t=this.loadItemArray(),e=this.loadItemArray(),s=this.loadItemArray(),r=this.loadItemArray(),n=this.loadItemArray(),o=this.loadItemArray(),i=this.readInt32(),new tt.Header(a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B,S,A,P,R,O,D,N,H,W,U,j,G,V,X,z,Y,K,q,Q,Z,J,t,e,s,r,n,o,i)},qt.prototype.load=function(t){var e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B,S,A,P,R,O,D,N,H,W,U,j,G,V,X,z,Y,K,q,Q,Z,J;if(this.d=t,this.index=0,u=this.loadHeader(),!(h=new $(u)).check())return null;for(I=this.readBytes(u.stringBytes.length),i=this.readBytes(u.animationBytes.length),h.translates=function(){var t,e,i=[];for(d=t=0,e=u.translate.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadTranslate());return i}.call(this),h.matrices=function(){var t,e,i=[];for(d=t=0,e=u.matrix.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadMatrix());return i}.call(this),h.colors=function(){var t,e,i=[];for(d=t=0,e=u.color.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadColor());return i}.call(this),h.alphaTransforms=function(){var t,e,i=[];for(d=t=0,e=u.alphaTransform.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadAlphaTransform());return i}.call(this),h.colorTransforms=function(){var t,e,i=[];for(d=t=0,e=u.colorTransform.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadColorTransform());return i}.call(this),h.objects=function(){var t,e,i=[];for(d=t=0,e=u.objectData.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadObject());return i}.call(this),h.textures=function(){var t,e,i=[];for(d=t=0,e=u.texture.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadTexture());return i}.call(this),u.formatVersion>=tt.Constant.FORMAT_VERSION_141211?h.textureFragments=function(){var t,e,i=[];for(d=t=0,e=u.textureFragment.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadTextureFragment());return i}.call(this):h.textureFragments=function(){var t,e,i=[];for(d=t=0,e=u.textureFragment.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadTextureFragmentCompat());return i}.call(this),h.bitmaps=function(){var t,e,i=[];for(d=t=0,e=u.bitmap.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadBitmap());return i}.call(this),h.bitmapExs=function(){var t,e,i=[];for(d=t=0,e=u.bitmapEx.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadBitmapEx());return i}.call(this),h.fonts=function(){var t,e,i=[];for(d=t=0,e=u.font.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadFont());return i}.call(this),h.textProperties=function(){var t,e,i=[];for(d=t=0,e=u.textProperty.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadTextProperty());return i}.call(this),h.texts=function(){var t,e,i=[];for(d=t=0,e=u.text.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadText());return i}.call(this),h.particleDatas=function(){var t,e,i=[];for(d=t=0,e=u.particleData.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadParticleData());return i}.call(this),h.particles=function(){var t,e,i=[];for(d=t=0,e=u.particle.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadParticle());return i}.call(this),h.programObjects=function(){var t,e,i=[];for(d=t=0,e=u.programObject.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadProgramObject());return i}.call(this),h.graphicObjects=function(){var t,e,i=[];for(d=t=0,e=u.graphicObject.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadGraphicObject());return i}.call(this),h.graphics=function(){var t,e,i=[];for(d=t=0,e=u.graphic.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadGraphic());return i}.call(this),r=function(){var t,e,i=[];for(d=t=0,e=u.animation.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadAnimation());return i}.call(this),h.buttonConditions=function(){var t,e,i=[];for(d=t=0,e=u.buttonCondition.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadButtonCondition());return i}.call(this),h.buttons=function(){var t,e,i=[];for(d=t=0,e=u.button.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadButton());return i}.call(this),h.labels=function(){var t,e,i=[];for(d=t=0,e=u.label.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadLabel());return i}.call(this),h.instanceNames=function(){var t,e,i=[];for(d=t=0,e=u.instanceName.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadInstanceName());return i}.call(this),h.events=function(){var t,e,i=[];for(d=t=0,e=u.eventData.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadEvent());return i}.call(this),h.places=function(){var t,e,i=[];for(d=t=0,e=u.place.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadPlace());return i}.call(this),h.controlMoveMs=function(){var t,e,i=[];for(d=t=0,e=u.controlMoveM.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadControlMoveM());return i}.call(this),h.controlMoveCs=function(){var t,e,i=[];for(d=t=0,e=u.controlMoveC.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadControlMoveC());return i}.call(this),h.controlMoveMCs=function(){var t,e,i=[];for(d=t=0,e=u.controlMoveMC.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadControlMoveMC());return i}.call(this),h.controlMoveMCBs=function(){var t,e,i=[];for(d=t=0,e=u.controlMoveMCB.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadControlMoveMCB());return i}.call(this),h.controls=function(){var t,e,i=[];for(d=t=0,e=u.control.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadControl());return i}.call(this),h.frames=function(){var t,e,i=[];for(d=t=0,e=u.frame.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadFrame());return i}.call(this),h.movieClipEvents=function(){var t,e,i=[];for(d=t=0,e=u.movieClipEvent.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadMovieClipEvent());return i}.call(this),h.movies=function(){var t,e,i=[];for(d=t=0,e=u.movie.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadMovie());return i}.call(this),h.movieLinkages=function(){var t,e,i=[];for(d=t=0,e=u.movieLinkage.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadMovieLinkage());return i}.call(this),E=function(){var t,e,i=[];for(d=t=0,e=u.stringData.length;0<=e?t<e:e<t;d=0<=e?++t:--t)i.push(this.loadString());return i}.call(this),h.animations=[],L=0,S=r.length;L<S;L++)x=(e=r[L]).animationOffset,h.animations.push(this.readAnimation(i.slice(x,x+e.animationLength)));for(h.strings=[],w=h.stringMap,k=0,A=E.length;k<A;k++){for(x=(e=E[k]).stringOffset,b=I.slice(x,x+e.stringLength),C="",d=0;d<b.length;)(n=255&b.charCodeAt(d))<128?(C+=String.fromCharCode(n),++d):n>>5==6?(o=b.charCodeAt(d+1),C+=String.fromCharCode((31&n)<<6|63&o),d+=2):n>>4==14?(a=(15&n)<<12|(63&(o=b.charCodeAt(d+1)))<<6|63&b.charCodeAt(d+2),C+=String.fromCharCode(a),d+=3):(a=(7&n)<<18|(63&(o=b.charCodeAt(d+1)))<<12|(63&b.charCodeAt(d+2))<<6|b.charCodeAt(d+3)<<63,C+=String.fromCharCode(a),d+=4);w[C]=h.strings.length,h.strings.push(C)}for(p=h.instanceNameMap,d=T=0,G=h.instanceNames.length;0<=G?T<G:G<T;d=0<=G?++T:--T)p[h.instanceNames[d].stringId]=d;for(l=h.eventMap,d=B=0,V=h.events.length;0<=V?B<V:V<B;d=0<=V?++B:--B)l[h.events[d].stringId]=d;for(g=h.movieLinkageMap,d=D=0,X=h.movieLinkages.length;0<=X?D<X:X<D;d=0<=X?++D:--D)g[h.movieLinkages[d].stringId]=d;for(v=h.movieLinkageNameMap,d=N=0,z=h.movieLinkages.length;0<=z?N<z:z<N;d=0<=z?++N:--N)v[h.movieLinkages[d].movieId]=h.movieLinkages[d].stringId;for(M=h.programObjectMap,d=H=0,Y=h.programObjects.length;0<=Y?H<Y:Y<H;d=0<=Y?++H:--H)M[h.programObjects[d].stringId]=d;for(m=h.labelMap,W=0,P=(K=h.movies).length;W<P;W++){for(x=(y=K[W]).labelOffset,_={},U=0,R=(q=h.labels.slice(x,x+y.labels)).length;U<R;U++)_[(f=q[U]).stringId]=f.frameNo;m.push(_)}for(j=0,O=(Q=h.textures).length;j<O;j++)(F=Q[j]).setFilename(h);for(s=h.bitmapMap,d=J=0,Z=h.textureFragments.length;0<=Z?J<Z:Z<J;d=0<=Z?++J:--J)(F=h.textureFragments[d]).setFilename(h),null!=(y=(c=F.filename).match(/(.+)_atlas_.+_info_.+(_.+){6}/))&&(c=y[1]),s[c]=h.bitmaps.length,h.bitmaps.push(new tt.Bitmap(0,d));return h},qt.prototype.readByteFromBytes=function(t,e){var i=255&t.charCodeAt(e++);return[e,i]},qt.prototype.readInt32FromBytes=function(t,e){var i,r,s,n,o,a,h=this.readByteFromBytes(t,e);return e=h[0],i=h[1],e=(n=this.readByteFromBytes(t,e))[0],r=n[1],e=(o=this.readByteFromBytes(t,e))[0],s=o[1],[e=(a=this.readByteFromBytes(t,e))[0],(i<<0)+(r<<8)+(s<<16)+(a[1]<<24)]},qt.prototype.readAnimation=function(t){for(var e,i,r,s,n,o,a,h,l,c=[],u=0;;)switch(u=(o=this.readByteFromBytes(t,u))[0],e=o[1],c.push(e),e){case _.GOTOFRAME:case _.GOTOLABEL:case _.EVENT:case _.CALL:u=(a=this.readInt32FromBytes(t,u))[0],r=a[1],c.push(r);break;case _.SETTARGET:for(u=(h=this.readInt32FromBytes(t,u))[0],i=h[1],c.push(i),r=n=0;0<=i?n<i:i<n;r=0<=i?++n:--n)u=(l=this.readInt32FromBytes(t,u))[0],s=l[1],c.push(s);break;case _.END:return c}},t(Qt,w=qt),Qt.prototype.readByte=function(){return this.d[this.index++]},Qt.prototype.readBytes=function(t){var e,i="";for(e=0;0<=t?e<t:t<e;0<=t?++e:--e)i+=String.fromCharCode(this.d[this.index++]);return i},F=Qt,t(Zt,w),Zt.prototype.readByte=function(){return this.d[this.index++]},Zt.prototype.readBytes=function(t){var e,i="";for(e=0;0<=t?e<t:t<e;0<=t?++e:--e)i+=String.fromCharCode(this.d[this.index++]);return i},Zt.prototype.readInt32=function(){var t=this.dInt32[this.index/4];return this.index+=4,t},Zt.prototype.readSingle=function(){var t=this.dFloat32[this.index/4];return this.index+=4,t},Zt.prototype.load=function(t){return this.d=new Uint8Array(t),this.dInt32=new Int32Array(t),this.dFloat32=new Float32Array(t),Zt.__super__.load.call(this,this.d)},L=Zt,Jt.load=function(t){if(null!=t&&"string"==typeof t)return(new w).load(t)},Jt.loadArray=function(t){if(null!=t)return(new F).load(t)},Jt.loadArrayBuffer=function(t){if(null!=t)return(new L).load(t)},k=Jt,$t.calcMatrixToPoint=function(t,e,i){var r=i._;return[r[0]*t+r[2]*e+r[4],r[1]*t+r[3]*e+r[5]]},$t.getMatrixDeterminant=function(t){var e=t._;return e[0]*e[3]-e[2]*e[1]<0},$t.syncMatrix=function(t){var e,i,r,s,n,o,a,h,l=null!=(h=t.matrixId)?h:0;0==(l&p.MATRIX_FLAG)?(o=n=1,s=0,a=t.lwf.data.translates[l]._,e=new V(n,o,0,0,a[0],a[1])):(l&=~p.MATRIX_FLAG,e=t.lwf.data.matrices[l],i=this.getMatrixDeterminant(e),r=e._,n=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i&&(n=-n),o=Math.sqrt(r[3]*r[3]+r[2]*r[2]),s=(s=i?Math.atan2(r[1],-r[0]):Math.atan2(r[1],r[0]))/Math.PI*180),t.property.setMatrix(e,n,o,s)},$t.getX=function(t){var e,i=null!=(e=t.matrixId)?e:0;return 0==(i&p.MATRIX_FLAG)?t.lwf.data.translates[i]._[0]:(i&=~p.MATRIX_FLAG,t.lwf.data.matrices[i]._[4])},$t.getY=function(t){var e,i=null!=(e=t.matrixId)?e:0;return 0==(i&p.MATRIX_FLAG)?t.lwf.data.translates[i]._[1]:(i&=~p.MATRIX_FLAG,t.lwf.data.matrices[i]._[5])},$t.getScaleX=function(t){var e,i,r,s,n,o=null!=(n=t.matrixId)?n:0;return 0==(o&p.MATRIX_FLAG)?1:(o&=~p.MATRIX_FLAG,e=t.lwf.data.matrices[o],i=this.getMatrixDeterminant(e),r=e._,s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i&&(s=-s),s)},$t.getScaleY=function(t){var e,i,r=null!=(i=t.matrixId)?i:0;return 0==(r&p.MATRIX_FLAG)?1:(r&=~p.MATRIX_FLAG,e=t.lwf.data.matrices[r]._,Math.sqrt(e[3]*e[3]+e[2]*e[2]))},$t.getRotation=function(t){var e,i,r,s,n=null!=(s=t.matrixId)?s:0;return 0==(n&p.MATRIX_FLAG)?0:(n&=~p.MATRIX_FLAG,e=t.lwf.data.matrices[n],i=this.getMatrixDeterminant(e),r=e._,(i?Math.atan2(r[1],-r[0]):Math.atan2(r[1],r[0]))/Math.PI*180)},$t.syncColorTransform=function(t){var e,i,r=null!=(i=t.colorTransformId)?i:0,s=0==(r&p.COLORTRANSFORM_FLAG)?(e=t.lwf.data.alphaTransforms[r],new G(1,1,1,e._[0],0,0,0,0)):(r&=~p.COLORTRANSFORM_FLAG,t.lwf.data.colorTransforms[r]);t.property.setColorTransform(s)},$t.getAlpha=function(t){var e,i=null!=(e=t.colorTransformId)?e:0;return 0==(i&p.COLORTRANSFORM_FLAG)?t.lwf.data.alphaTransforms[i]._[0]:(i&=~p.COLORTRANSFORM_FLAG,t.lwf.data.colorTransforms[i]._[3])},$t.calcMatrixId=function(t,e,i,r){var s,n,o,a,h,l;return 0===r?e.set(i):0==(r&p.MATRIX_FLAG)?(l=t.data.translates[r],s=e._,o=i._,h=l._,s[0]=o[0],s[2]=o[2],s[4]=o[0]*h[0]+o[2]*h[1]+o[4],s[1]=o[1],s[3]=o[3],s[5]=o[1]*h[0]+o[3]*h[1]+o[5]):(n=r&~p.MATRIX_FLAG,a=t.data.matrices[n],this.calcMatrix(e,i,a)),e},$t.calcMatrix=function(t,e,i){var r=t._,s=e._,n=i._;return r[0]=s[0]*n[0]+s[2]*n[1],r[2]=s[0]*n[2]+s[2]*n[3],r[4]=s[0]*n[4]+s[2]*n[5]+s[4],r[1]=s[1]*n[0]+s[3]*n[1],r[3]=s[1]*n[2]+s[3]*n[3],r[5]=s[1]*n[4]+s[3]*n[5]+s[5],t},$t.rotateMatrix=function(t,e,i,r,s){var n,o;return r*=i,s*=i,n=t._,o=e._,n[0]=-o[2]*i,n[2]=o[0]*i,n[4]=o[0]*r+o[2]*s+o[4],n[1]=-o[3]*i,n[3]=o[1]*i,n[5]=o[1]*r+o[3]*s+o[5],t},$t.scaleMatrix=function(t,e,i,r,s){var n,o;return r*=i,s*=i,n=t._,o=e._,n[0]=o[0]*i,n[2]=o[2]*i,n[4]=o[0]*r+o[2]*s+o[4],n[1]=o[1]*i,n[3]=o[3]*i,n[5]=o[1]*r+o[3]*s+o[5],t},$t.fitForHeight=function(t,e,i){var r=i/t.height;t.setTextScale(r),t.property.scale(r,r),t.property.move((e-t.width*r)/2,0)},$t.fitForWidth=function(t,e,i){var r=e/t.width;t.setTextScale(r),t.property.scale(r,r),t.property.move(0,(i-t.height*r)/2)},$t.scaleForHeight=function(t,e,i){var r=i/t.height;t.setTextScale(r),t.property.scale(r,r)},$t.scaleForWidth=function(t,e,i){var r=e/t.width;t.setTextScale(r),t.property.scale(r,r)},$t.copyMatrix=function(t,e){return null!==e?t.set(e):t.clear(),t},$t.invertMatrix=function(t,e){var i=t._,r=e._,s=r[0]*r[3]-r[2]*r[1];0!=s?(i[0]=r[3]/s,i[2]=-r[2]/s,i[4]=(r[2]*r[5]-r[4]*r[3])/s,i[1]=-r[1]/s,i[3]=r[0]/s,i[5]=(r[4]*r[1]-r[0]*r[5])/s):t.clear()},$t.calcColorTransformId=function(t,e,i,r){var s,n,o,a,h;if(0===r)t.useVertexColor?e.set(i):e.multi._[3]=i.multi._[3];else if(0==(r&p.COLORTRANSFORM_FLAG))if(s=t.data.alphaTransforms[r],t.useVertexColor){for(o=h=0;h<3;o=++h)e.multi._[o]=i.multi._[o];e.multi._[3]=i.multi._[3]*s._[0],e.add.set(i.add)}else e.multi._[3]=i.multi._[3]*s._[0];else n=r&~p.COLORTRANSFORM_FLAG,a=t.data.colorTransforms[n],this.calcColorTransform(t,e,i,a);return e},$t.calcColorTransform=function(t,e,i,r){var s,n,o,a,h,l,c,u,d;if(t.useVertexColor){for(s=e.multi._,a=i.multi._,l=r.multi._,o=u=0;u<4;o=++u)s[o]=a[o]*l[o];for(n=e.add._,h=i.add._,c=r.add._,o=d=0;d<4;o=++d)n[o]=h[o]*l[o]+c[o]}else e.multi._[3]=i.multi._[3]*r.multi._[3];return e},$t.copyColorTransform=function(t,e,i){return t.useVertexColor?null!==i?e.set(i):e.clear():e.multi.alpha=null!==i?i.multi.alpha:1,e},$t.calcColor=function(t,e,i,r){var s,n,o,a,h,l,c;if(t.useVertexColor)for(n=e._,s=i._,h=r.multi._,a=r.add._,o=l=0;l<4;o=++l)n[o]=s[o]*h[o]+a[o];else{for(n=e._,s=i._,o=c=0;c<3;o=++c)n[o]=s[o];n[3]=s[3]*r.multi._[3]}},$t.newIntArray=function(){return[]},$t.clearIntArray=function(t){t.length=0},$t.insertIntArray=function(t,e){var i;0===t.length||e>t[t.length-1]?t.push(e):t[i=this.locationOfIntArray(t,e,0,t.length-1)]!==e&&t.splice(i,0,e)},$t.deleteIntArray=function(t,e){var i=this.locationOfIntArray(t,e,0,t.length-1);t[i]===e&&t.splice(i,1)},$t.locationOfIntArray=function(t,e,i,r){for(var s;i<=r;)if(e>t[s=(i+r)/2>>0])i=1+s;else{if(!(e<t[s]))return s;r=s-1}return i},K=$t,te.prototype.constructBitmap=function(t,e,i){return null},te.prototype.constructBitmapEx=function(t,e,i){return null},te.prototype.constructText=function(t,e,i){return null},te.prototype.constructParticle=function(t,e,i){return null},te.prototype.init=function(t){},te.prototype.beginRender=function(t){},te.prototype.endRender=function(t){},te.prototype.destruct=function(){},S=te,ee.prototype.exec=function(t,e){null==t&&(t=0),null==e&&(e=0),this.matrixId!==t&&(this.matrixIdChanged=!0,this.matrixId=t),this.colorTransformId!==e&&(this.colorTransformIdChanged=!0,this.colorTransformId=e)},ee.prototype.update=function(t,e){this.updated=!0,null!==t&&(K.calcMatrixId(this.lwf,this.matrix,t,this.dataMatrixId),this.matrixIdChanged=!1),null!==e&&(K.copyColorTransform(this.lwf,this.colorTransform,e),this.colorTransformIdChanged=!1),this.lwf.renderObject()},ee.prototype.render=function(t,e){var i,r,s;null!=this.renderer&&(r=this.lwf.renderingIndex,s=this.lwf.renderingIndexOffsetted,i=this.lwf.renderingCount,e!==Number.MIN_VALUE&&(r=s-e+i),this.renderer.render(this.matrix,this.colorTransform,r,i,t)),this.lwf.renderObject()},ee.prototype.inspect=function(t,e,i,r){var s=this.lwf.renderingIndex,n=this.lwf.renderingIndexOffsetted,o=this.lwf.renderingCount;r!==Number.MIN_VALUE&&(s=n+r+o),t(this,e,i,s),this.lwf.renderObject()},ee.prototype.destroy=function(){this.renderer&&(this.renderer.destruct(),this.renderer=null),this.parent=null,this.lwf=null},t(ie,C=ee),ie.prototype.update=function(t,e){for(var i,r,s,n=this.matrix.setWithComparing(t),o=this.colorTransform.setWithComparing(e),a=this.displayList,h=0,l=a.length;h<l;h++)i=a[h],s=n||!i.updated||i.matrixIdChanged?t:null,r=o||!i.updated||i.colorTransformIdChanged?e:null,i.update(s,r)},ie.prototype.render=function(t,e){for(var i=this.displayList,r=0,s=i.length;r<s;r++)i[r].render(t,e)},ie.prototype.inspect=function(t,e,i,r){var s,n,o;for(ie.__super__.inspect.call(this,t,e,i,r),++e,s=0,n=(o=this.displayList).length;s<n;s++)o[s].inspect(t,e,i,r)},ie.prototype.destroy=function(){for(var t=this.displayList,e=0,i=t.length;e<i;e++)t[e].destroy();this.displayList=null},m=ie,t(re,C),u=re,t(se,C),d=se,t(ne,C),W=ne,t(oe,C),oe.prototype.update=function(t,e){oe.__super__.update.call(this,t,e),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},R=oe,t(ae,C),ae.prototype.update=function(t,e){ae.__super__.update.call(this,t,e),null!=this.renderer&&this.renderer.update(this.matrix,this.colorTransform)},D=ae,t(he,C),he.prototype.destroy=function(){this.type!==z.ATTACHEDMOVIE&&0<=this.instanceId&&(this.lwf.getInstance(this.instanceId)===this&&this.lwf.setInstance(this.instanceId,this.nextInstance),null!=this.nextInstance&&(this.nextInstance.prevInstance=this.prevInstance),null!=this.prevInstance&&(this.prevInstance.nextInstance=this.nextInstance)),null!=this.name&&null!=this.parent&&delete this.parent[this.name],this.prevInstance=null,this.nextInstance=null,this.linkInstance=null,he.__super__.destroy.call(this)},he.prototype.linkButton=function(){},he.prototype.getFullName=function(){for(var t="",e="",i=this;null!=i;){if(null==i.name)return null;t=(null!=i.parent&&i.objectId===i.lwf.data.header.rootMovieId?i.lwf.attachName:i.name)+e+t,e=".",i=i.parent}return t},t(le,b=he),le.prototype.setHandlers=function(t){null!=this.handler?this.handler.concat(t):this.handler=t},le.prototype.exec=function(t,e){null==t&&(t=0),null==e&&(e=0),le.__super__.exec.call(this,t,e),this.enterFrame()},le.prototype.update=function(t,e){le.__super__.update.call(this,t,e),null!=this.handler&&this.handler.call("update",this)},le.prototype.render=function(t,e){null!=this.handler&&this.handler.call("render",this)},le.prototype.destroy=function(){this.lwf.clearFocus(this),this.lwf.clearPressed(this),null!=this.handler&&this.handler.call("unload",this),le.__super__.destroy.call(this)},le.prototype.linkButton=function(){this.lwf.focus===this&&(this.lwf.focusOnLink=!0),this.buttonLink=this.lwf.buttonHead,this.lwf.buttonHead=this},le.prototype.checkHit=function(t,e){var i,r,s;return K.invertMatrix(this.invert,this.matrix),i=(s=K.calcMatrixToPoint(t,e,this.invert))[0],r=s[1],0<=i&&i<this.data.width&&0<=r&&r<this.data.height?(this.hitX=i,this.hitY=r,!0):(this.hitX=Number.MIN_VALUE,this.hitY=Number.MIN_VALUE,!1)},le.prototype.enterFrame=function(){null!=this.handler&&this.handler.call("enterFrame",this)},le.prototype.rollOver=function(){null!=this.handler&&this.handler.call("rollOver",this),this.playAnimation(l.ROLLOVER)},le.prototype.rollOut=function(){null!=this.handler&&this.handler.call("rollOut",this),this.playAnimation(l.ROLLOUT)},le.prototype.press=function(){null!=this.handler&&this.handler.call("press",this),this.playAnimation(l.PRESS)},le.prototype.release=function(){null!=this.handler&&this.handler.call("release",this),this.playAnimation(l.RELEASE)},le.prototype.keyPress=function(t){null!=this.handler&&this.handler.call("keyPress",this),this.playAnimation(l.KEYPRESS,t)},le.prototype.playAnimation=function(t,e){var i,r,s,n,o;for(null==e&&(e=0),r=this.lwf.data.buttonConditions,s=n=0,o=this.data.conditions;0<=o?n<o:o<n;s=0<=o?++n:--n)0==((i=r[this.data.conditionId+s]).condition&t)||t===l.KEYPRESS&&i.keyCode!==e||this.lwf.playAnimation(i.animationId,this.parent,this)},le.prototype.addEventHandler=function(t,e){switch(t){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":this.lwf.setInteractive(),this.lwf.enableExec(),null==this.handler&&this.setHandlers(new n),this.handler.addHandler(t,e)}},le.prototype.removeEventHandler=function(t,e){switch(t){case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.removeHandler(t,e)}},le.prototype.clearEventHandler=function(t){switch(null==t&&(t=null),t){case null:null!=this.handler&&this.handler.clear();break;case"load":case"unload":case"enterFrame":case"update":case"render":case"press":case"release":case"rollOver":case"rollOut":case"keyPress":null!=this.handler&&this.handler.clear(t)}},le.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},t(ce,c=le),ce.prototype.checkHit=function(t,e){return null!==this.child.inputPoint(t,e)},ce.prototype.rollOver=function(){},ce.prototype.rollOut=function(){null!=this.child.focus&&(this.child.focus.rollOut(),this.child.clearFocus(this.child.focus))},ce.prototype.press=function(){this.child.inputPress()},ce.prototype.release=function(){this.child.inputRelease()},ce.prototype.keyPress=function(t){this.child.inputKeyPress(t)},E=ce,ue.prototype.clear=function(){this.scaleX=1,this.scaleY=1,this.rotation=0,this.matrix.clear(),this.colorTransform.clear(),(this.hasMatrix||this.hasColorTransform)&&this.lwf.setPropertyDirty(),this.hasMatrix=!1,this.hasColorTransform=!1,this.clearRenderingOffset()},ue.prototype.move=function(t,e){this.matrix._[4]+=t,this.matrix._[5]+=e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},ue.prototype.moveTo=function(t,e){this.matrix._[4]=t,this.matrix._[5]=e,this.hasMatrix=!0,this.lwf.setPropertyDirty()},ue.prototype.rotate=function(t){this.rotateTo(this.rotation+t)},ue.prototype.rotateTo=function(t){this.rotation=t,this.setScaleAndRotation()},ue.prototype.scale=function(t,e){this.scaleX*=t,this.scaleY*=e,this.setScaleAndRotation()},ue.prototype.scaleTo=function(t,e){this.scaleX=t,this.scaleY=e,this.setScaleAndRotation()},ue.prototype.setScaleAndRotation=function(){var t,e=this.rotation*Math.PI/180,i=0==e?(t=1,0):(t=Math.cos(e),Math.sin(e));this.matrix._[0]=this.scaleX*t,this.matrix._[2]=this.scaleY*-i,this.matrix._[1]=this.scaleX*i,this.matrix._[3]=this.scaleY*t,this.hasMatrix=!0,this.lwf.setPropertyDirty()},ue.prototype.setMatrix=function(t,e,i,r){this.scaleX=null!=e?e:1,this.scaleY=null!=i?i:1,this.rotation=null!=r?r:0,this.matrix.set(t),this.hasMatrix=!0,this.lwf.setPropertyDirty()},ue.prototype.setAlpha=function(t){this.colorTransform.multi._[3]=t,this.hasColorTransform=!0,this.lwf.setPropertyDirty()},ue.prototype.setColorTransform=function(t){this.colorTransform.set(t),this.hasColorTransform=!0,this.lwf.setPropertyDirty()},ue.prototype.setRenderingOffset=function(t){this.renderingOffset=t,this.hasRenderingOffset=!0},ue.prototype.clearRenderingOffset=function(){this.renderingOffset=Number.MIN_VALUE,this.hasRenderingOffset=!1},N=ue,t(de,C),de.prototype.update=function(t,e){var i,r,s,n,o,a=this.matrix._,h=t._,l=this._,c=this.rotation!==this._rotation&&(this._rotation=this.rotation,0==(s=this._rotation*Math.PI/180)?(this._cos=1,this._sin=0):(this._cos=Math.cos(s),this._sin=Math.sin(s)),!0);if(!c&&this._scaleX===this.scaleX&&this._scaleY===this.scaleY||(this._scaleX=this.scaleX,this._scaleY=this.scaleY,l[0]=this._scaleX*this._cos,l[1]=this._scaleX*this._sin,l[2]=this._scaleY*-this._sin,l[3]=this._scaleY*this._cos),l[4]=this.x,l[6]=this.regX,l[4]-=l[6],l[5]=this.y,l[7]=this.regY,l[5]-=l[7],a[0]=h[0]*l[0]+h[2]*l[1],a[2]=h[0]*l[2]+h[2]*l[3],a[4]=h[0]*l[4]+h[2]*l[5]+h[4]+h[0]*l[6]+h[2]*l[7]+a[0]*-l[6]+a[2]*-l[7],a[1]=h[1]*l[0]+h[3]*l[1],a[3]=h[1]*l[2]+h[3]*l[3],a[5]=h[1]*l[4]+h[3]*l[5]+h[5]+h[1]*l[6]+h[3]*l[7]+a[1]*-l[6]+a[3]*-l[7],a=this.colorTransform.multi._,i=e.multi._,this.lwf.useVertexColor)if(1===this.alpha)for(r=n=0;n<4;r=++n)a[r]=i[r];else{for(r=o=0;o<3;r=++o)a[r]=i[r];a[3]=this.alpha*i[3]}else a[3]=this.alpha*i[3];this.lwf.renderObject()},de.prototype.setMatrix=function(t){for(var e,i=e=0;e<6;i=++e)this._[i]=t._[i]},de.prototype.detachFromParent=function(){null!=this.parent&&(this.parent.detachBitmap(this.depth),this.parent=null)},s=de,t(pe,b),pe.prototype.getMovieFunctions=function(){var t=this.lwf.getMovieFunctions(this.objectId);this.loadFunc=t[0],this.postLoadFunc=t[1],this.unloadFunc=t[2],this.enterFrameFunc=t[3]},pe.prototype.setHandlers=function(t){this.handler.concat(t)},pe.prototype.play=function(){return this.playing=!0,this},pe.prototype.stop=function(){return this.playing=!1,this},pe.prototype.nextFrame=function(){return this.jumped=!0,this.stop(),this.currentFrameInternal<this.totalFrames-1&&++this.currentFrameInternal,this},pe.prototype.prevFrame=function(){return this.jumped=!0,this.stop(),0<this.currentFrameInternal&&--this.currentFrameInternal,this},pe.prototype.gotoFrame=function(t){return this.gotoFrameInternal(t-1)},pe.prototype.gotoFrameInternal=function(t){return this.jumped=!0,this.stop(),this.currentFrameInternal=t,this},pe.prototype.setVisible=function(t){return this.visible=t,this},pe.prototype.globalToLocal=function(t){var e,i,r,s=this.property.hasMatrix?(s=new V,K.calcMatrix(s,this.matrix,this.property.matrix)):this.matrix,n=new V;return K.invertMatrix(n,s),e=(r=K.calcMatrixToPoint(t.x,t.y,n))[0],i=r[1],new O(e,i)},pe.prototype.localToGlobal=function(t){var e=this.property.hasMatrix?(e=new V,K.calcMatrix(e,this.matrix,this.property.matrix)):this.matrix,i=K.calcMatrixToPoint(t.x,t.y,e),r=i[0],s=i[1];return new O(r,s)},pe.prototype.getDepth=function(t){return 0===t.length?0:t[t.length-1]+1},pe.prototype.reorderList=function(t,e,i,r,s,n){var o,a,h,l;if(K.insertIntArray(e,r),i[r]=s,t){for(a in o=0,h={},i)n(l=i[a],o),h[e[o]=o]=l,++o;i=h}return i},pe.prototype.deleteAttachedMovie=function(t,e,i,r){var s,n;if(null==i&&(i=!0),null==r&&(r=!0),s=e.attachName,n=e.depth,delete t.attachedMovies[s],delete t.attachedMovieList[n],K.deleteIntArray(t.attachedMovieListKeys,n),r&&delete t.detachedMovies[s],delete t[s],i)return e.destroy()},pe.prototype.attachMovie=function(t,e,i){var r,s,n,o,a,h,l;if(null==i&&(i=null),t instanceof I)return this.attachLWF(t,e,i);if(null==i&&(i={}),s=i.depth,h=null!=(l=i.reorder)&&l,t instanceof pe&&t.lwf===this.lwf)o=t,this.deleteAttachedMovie(o.parent,o,!1);else{if("string"!=typeof t)return null;if(-1===(a=this.lwf.searchMovieLinkage(this.lwf.getStringId(t))))return null}return null==this.attachedMovies&&(this.attachedMovies={},this.detachedMovies={},this.attachedMovieList={},this.attachedMovieListKeys=K.newIntArray()),null!=(r=this.attachedMovies[e])&&this.deleteAttachedMovie(this,r),h||null==s||null!=(r=this.attachedMovieList[s])&&this.deleteAttachedMovie(this,r),(n=new B).add(i),null!=o?(o.parent=this,o.setHandlers(n)):(o=new pe(this.lwf,this,a,-1,0,0,!0,n,e),this.attachMovieExeced&&o.exec(),this.attachMoviePostExeced&&o.postExec(!0)),o.attachName=e,null==s&&(s=this.getDepth(this.attachedMovieListKeys)),o.depth=s,this.attachedMovies[e]=o,this.attachedMovieList=this.reorderList(h,this.attachedMovieListKeys,this.attachedMovieList,o.depth,o,function(t,e){return t.depth=e}),this[e]=o},pe.prototype.attachEmptyMovie=function(t,e){return null==e&&(e=null),this.attachMovie("_empty",t,e)},pe.prototype.swapAttachedMovieDepth=function(t,e){var i,r;null!=this.attachedMovies&&t!==e&&(i=this.attachedMovieList[t],r=this.attachedMovieList[e],null!=i?(i.depth=e,this.attachedMovieList[e]=i,K.insertIntArray(this.attachedMovieListKeys,e)):(delete this.attachedMovieList[e],K.deleteIntArray(this.attachedMovieListKeys,e)),null!=r?(r.depth=t,this.attachedMovieList[t]=r,K.insertIntArray(this.attachedMovieListKeys,t)):(delete this.attachedMovieList[t],K.deleteIntArray(this.attachedMovieListKeys,t)))},pe.prototype.getAttachedMovie=function(t){if(null==this.attachedMovies)return null;switch(typeof t){case"string":return this.attachedMovies[t];case"number":return this.attachedMovieList[t]}},pe.prototype.searchAttachedMovie=function(t,e){var i,r,s;if(null==e&&(e=!0),null!=(s=this.getAttachedMovie(t)))return s;if(!e)return null;for(r=this.instanceHead;null!==r;){if(r.isMovie&&null!==(i=r.searchAttachedMovie(t,e)))return i;r=r.linkInstance}return null},pe.prototype.detachMovie=function(t){var e,i;if(null!=this.detachedMovies)if(t instanceof pe)null!=(null!=t?t.attachName:void 0)&&(this.detachedMovies[t.attachName]=!0);else switch(typeof t){case"string":this.detachedMovies[t]=!0;break;case"number":null!=(null!=(e=null!=(i=this.attachedMovieList)?i[t]:void 0)?e.attachName:void 0)&&(this.detachedMovies[e.attachName]=!0)}},pe.prototype.detachFromParent=function(){this.type===z.ATTACHEDMOVIE&&(this.active=!1,null!=this.parent&&this.parent.detachMovie(this))},pe.prototype.removeMovieClip=function(){null!=this.attachName?null!=this.parent&&this.parent.detachMovie(this):null!=this.lwf.attachName&&null!=this.lwf.parent&&this.lwf.parent.detachLWF(this.lwf)},pe.prototype.attachBitmap=function(t,e){var i,r=this.lwf.data.bitmapMap[t];return null==r?null:(i=new s(this.lwf,this,r),null!=this.bitmapClips?this.detachBitmap(e):this.bitmapClips=[],(this.bitmapClips[e]=i).depth=e,i.name=t,i)},pe.prototype.getAttachedBitmaps=function(){return this.bitmapClips},pe.prototype.getAttachedBitmap=function(t){return null==this.bitmapClips?null:this.bitmapClips[t]},pe.prototype.detachBitmap=function(t){var e;null!=this.bitmapClips&&null!=(e=this.bitmapClips[t])&&(e.destroy(),this.bitmapClips[t]=null)},pe.prototype.execDetachHandler=function(t){var e=t.child;null==e.detachHandler||e.detachHandler(e)?e.destroy():(e.setAttachVisible(!1),e.render()),(e.parent=null)!=e.rootMovie&&(e.rootMovie.parent=null),e.detachHandler=null,e.attachName=null},pe.prototype.deleteAttachedLWF=function(t,e,i,r){var s,n;if(null==i&&(i=!0),null==r&&(r=!0),s=e.child.attachName,n=e.child.depth,delete t.attachedLWFs[s],delete t.attachedLWFList[n],K.deleteIntArray(t.attachedLWFListKeys,n),r&&delete t.detachedLWFs[s],delete t[s],i)return this.execDetachHandler(e)},pe.prototype.attachLWF=function(t,e,i){var r,s,n,o,a;null==i&&(i=null),null==i&&(i={}),r=i.depth,o=null!=(a=i.reorder)&&a,s=i.detach,null==this.attachedLWFs&&(this.attachedLWFs={},this.detachedLWFs={},this.attachedLWFList={},this.attachedLWFListKeys=K.newIntArray(),this.needsUpdateAttachedLWFs=!1,this.matrixForAttachedLWFs=new V,this.colorTransformForAttachedLWFs=new G),null!=t.parent&&(n=t.parent.attachedLWFs[t.attachName],this.deleteAttachedLWF(t.parent,n,!1)),null!=(n=this.attachedLWFs[e])&&this.deleteAttachedLWF(this,n),o||null==r||null!=(n=this.attachedLWFList[r])&&this.deleteAttachedLWF(this,n),n=new E(this,t),t.interactive&&this.lwf.setInteractive(),t.setParent(this),t.detachHandler=s,t.attachName=e,null==r&&(r=this.getDepth(this.attachedLWFListKeys)),t.depth=r,this.attachedLWFs[e]=n,this.attachedLWFList=this.reorderList(o,this.attachedLWFListKeys,this.attachedLWFList,t.depth,n,function(t,e){return t.child.depth=e}),this[e]=t.rootMovie,null!=t.lwfInstanceId&&delete this.lwf.loadedLWFs[t.lwfInstanceId],this.lwf.setLWFAttached()},pe.prototype.swapAttachedLWFDepth=function(t,e){var i,r;null!=this.attachedLWFs&&t!==e&&(i=this.attachedLWFList[t],r=this.attachedLWFList[e],null!=i?(i.child.depth=e,this.attachedLWFList[e]=i,K.insertIntArray(this.attachedLWFListKeys,e)):(delete this.attachedLWFList[e],K.deleteIntArray(this.attachedLWFListKeys,e)),null!=r?(r.child.depth=t,this.attachedLWFList[t]=r,K.insertIntArray(this.attachedLWFListKeys,t)):(delete this.attachedLWFList[t],K.deleteIntArray(this.attachedLWFListKeys,t)))},pe.prototype.swapDepths=function(t){var e;t instanceof pe?(e=t,null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,e.depth):this.lwf===e.lwf&&null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,e.lwf.depth)):null!=this.attachName?this.parent.swapAttachedMovieDepth(this.depth,t):null!=this.lwf.attachName&&this.parent.swapAttachedLWFDepth(this.lwf.depth,t)},pe.prototype.getAttachedLWF=function(t){var e,i;if(null==this.attachedLWFs)return null;switch(typeof t){case"string":return null!=(e=this.attachedLWFs[t])?e.child:void 0;case"number":return null!=(i=this.attachedLWFList[t])?i.child:void 0}},pe.prototype.searchAttachedLWF=function(t,e){var i,r,s;if(null==e&&(e=!0),null!=(i=this.getAttachedLWF(t)))return i;if(!e)return null;for(s=this.instanceHead;null!==s;){if(s.isMovie&&null!==(r=s.searchAttachedLWF(t,e)))return r;s=s.linkInstance}return null},pe.prototype.detachLWF=function(t){var e,i,r;if(null!=this.detachedLWFs)if(t instanceof I)null!=(null!=t?t.attachName:void 0)&&(this.detachedLWFs[t.attachName]=!0);else switch(typeof t){case"string":this.detachedLWFs[t]=!0;break;case"number":null!=(null!=(e=null!=(i=this.attachedLWFList)?i[t]:void 0)&&null!=(r=e.child)?r.attachName:void 0)&&(this.detachedLWFs[e.child.attachName]=!0)}},pe.prototype.detachAllLWFs=function(){var t,e,i;if(null!=this.detachedLWFs)for(t in i=this.attachedLWFs)e=i[t],this.detachedLWFs[e.child.attachName]=!0},pe.prototype.setBlendMode=function(t,e){switch(e){case tt.Constant.BLEND_MODE_NORMAL:return t.blendMode="normal";case tt.Constant.BLEND_MODE_ADD:return t.blendMode="add";case tt.Constant.BLEND_MODE_ERASE:return t.blendMode="erase";case tt.Constant.BLEND_MODE_LAYER:return t.blendMode="layer";case tt.Constant.BLEND_MODE_MASK:return t.blendMode="mask";case tt.Constant.BLEND_MODE_MULTIPLY:return t.blendMode="multiply";case tt.Constant.BLEND_MODE_SCREEN:return t.blendMode="screen";case tt.Constant.BLEND_MODE_SUBTRACT:return t.blendMode="subtract"}},pe.prototype.execObject=function(t,e,i,r,s,n,o){var a,h,l;if(null==o&&(o=!1),-1!==e){if(h=(a=this.lwf.data.objects[e]).objectId,null!=(l=this.displayList[t])&&(l.type!==a.objectType||l.objectId!==h||l.isMovie&&l.instanceId!==s)&&(l.destroy(),l=null),null==l)switch(a.objectType){case z.BUTTON:l=new c(this.lwf,this,h,s,i,r);break;case z.GRAPHIC:l=new m(this.lwf,this,h);break;case z.MOVIE:l=new pe(this.lwf,this,h,s,i,r),this.setBlendMode(l,n);break;case z.BITMAP:l=new u(this.lwf,this,h);break;case z.BITMAPEX:l=new d(this.lwf,this,h);break;case z.TEXT:l=new W(this.lwf,this,h,s);break;case z.PARTICLE:l=new R(this.lwf,this,h);break;case z.PROGRAMOBJECT:l=new D(this.lwf,this,h)}l.isMovie&&o&&this.setBlendMode(l,n),(l.isMovie||l.isButton)&&((l.linkInstance=null)===this.instanceHead?this.instanceHead=l:this.instanceTail.linkInstance=l,(this.instanceTail=l).isButton&&(this.hasButton=!0)),(this.displayList[t]=l).execCount=this.movieExecCount,l.exec(i,r)}},pe.prototype.override=function(t,e){this.overriding=!0,K.copyMatrix(this.matrix,t),K.copyColorTransform(this.lwf,this.colorTransform,e),this.lwf.isPropertyDirty=!0},pe.prototype.exec=function(t,e){null==t&&(t=0),null==e&&(e=0),this.attachMovieExeced=!1,this.attachMoviePostExeced=!1,pe.__super__.exec.call(this,t,e)},pe.prototype.postExec=function(t){var e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B,S;if(this.hasButton=!1,this.active){for(this.execedFrame=-1,m=this.postExecCount===this.lwf.execCount,t&&this.playing&&!this.jumped&&!m&&++this.currentFrameInternal;(this.currentFrameInternal<0||this.currentFrameInternal>=this.totalFrames)&&(this.currentFrameInternal=0),this.currentFrameInternal!==this.execedFrame;){if(this.currentFrameCurrent=this.currentFrameInternal,this.execedFrame=this.currentFrameCurrent,a=(n=this.lwf.data).frames[this.data.frameOffset+this.currentFrameCurrent],this.lastControlOffset===a.controlOffset&&this.lastControls===a.controls)if(r=this.lastControlAnimationOffset,this.skipped){for(c=this.instanceHead;null!==c;)c.isMovie?(c.attachMovieExeced=!1,c.attachMoviePostExeced=!1):c.isButton&&c.enterFrame(),c=c.linkInstance;this.hasButton=this.lastHasButton}else{for(o=y=0,w=this.data.depths;0<=w?y<w:w<y;o=0<=w?++y:--y)null!=(p=this.displayList[o])&&(m||(p.matrixIdChanged=!1,p.colorTransformIdChanged=!1),p.isMovie?(p.attachMovieExeced=!1,p.attachMoviePostExeced=!1):p.isButton&&(p.enterFrame(),this.hasButton=!0));this.lastHasButton=this.hasButton,this.skipped=!0}else{for(++this.movieExecCount,this.instanceHead=null,this.instanceTail=null,this.lastControlOffset=a.controlOffset,this.lastControls=a.controls,r=-1,l=_=0,F=a.controls;0<=F?_<F:F<_;l=0<=F?++_:--_)switch((i=n.controls[a.controlOffset+l]).controlType){case P.MOVE:f=n.places[i.controlId],this.execObject(f.depth,f.objectId,f.matrixId,0,f.instanceId,f.blendMode);break;case P.MOVEM:s=n.controlMoveMs[i.controlId],f=n.places[s.placeId],this.execObject(f.depth,f.objectId,s.matrixId,0,f.instanceId,f.blendMode);break;case P.MOVEC:s=n.controlMoveCs[i.controlId],f=n.places[s.placeId],this.execObject(f.depth,f.objectId,f.matrixId,s.colorTransformId,f.instanceId,f.blendMode);break;case P.MOVEMC:s=n.controlMoveMCs[i.controlId],f=n.places[s.placeId],this.execObject(f.depth,f.objectId,s.matrixId,s.colorTransformId,f.instanceId,f.blendMode);break;case P.MOVEMCB:s=n.controlMoveMCBs[i.controlId],f=n.places[s.placeId],this.execObject(f.depth,f.objectId,s.matrixId,s.colorTransformId,f.instanceId,s.blendMode,!0);break;case P.ANIMATION:-1===r&&(r=l)}for(this.lastControlAnimationOffset=r,this.lastHasButton=this.hasButton,o=g=0,L=this.data.depths;0<=L?g<L:L<g;o=0<=L?++g:--g)null!=(p=this.displayList[o])&&p.execCount!==this.movieExecCount&&(p.destroy(),this.displayList[o]=null)}if(this.attachMovieExeced=!0,null!=this.attachedMovies)for(v=0,x=(k=this.attachedMovieListKeys).length;v<x;v++)u=k[v],(d=this.attachedMovieList[u]).exec();for(c=this.instanceHead;null!==c;)c.isMovie&&((d=c).postExec(t),!this.hasButton&&d.hasButton&&(this.hasButton=!0)),c=c.linkInstance;if(this.attachMoviePostExeced=!0,null!=this.attachedMovies){for(e in T=this.detachedMovies)T[e],null!=(d=this.attachedMovies[e])&&this.deleteAttachedMovie(this,d,!0,!1);for(this.detachedMovies={},C=0,M=(B=this.attachedMovieListKeys).length;C<M;C++)u=B[C],(d=this.attachedMovieList[u]).postExec(t),!this.hasButton&&d.hasButton&&(this.hasButton=!0)}if(null!=this.attachedLWFs&&(this.hasButton=!0),this.postLoaded||(this.postLoaded=!0,null!=this.postLoadFunc&&this.postLoadFunc.call(this),this.handler.empty||this.handler.call("postLoad",this)),null!=this.nextEnterFrameFunctions)for(h=this.nextEnterFrameFunctions,this.nextEnterFrameFunctions=null,I=0,b=h.length;I<b;I++)h[I].call(this);if(-1!==r&&this.execedFrame===this.currentFrameInternal&&(this.animationPlayedFrame!==this.currentFrameCurrent||this.jumped))for(l=E=r,S=a.controls;r<=S?E<S:S<E;l=r<=S?++E:--E)i=n.controls[a.controlOffset+l],this.lwf.playAnimation(i.controlId,this);this.animationPlayedFrame=this.currentFrameCurrent,this.currentFrameCurrent===this.currentFrameInternal&&(this.jumped=!1)}this.postExecCount!==this.lwf.execCount&&(null!=this.enterFrameFunc&&this.enterFrameFunc.call(this),this.playAnimation(A.ENTERFRAME),this.handler.empty||this.handler.call("enterFrame",this)),this.postExecCount=this.lwf.execCount}},pe.prototype.execAttachedLWF=function(t,e){for(var i,r,s,n,o,a,h,l,c,u,d,p=!1,f=this.instanceHead;null!==f;)f.isMovie&&(p|=f.execAttachedLWF(t,e)),f=f.linkInstance;if(null!=this.attachedMovies)for(o=0,h=(c=this.attachedMovieListKeys).length;o<h;o++)s=c[o],p|=this.attachedMovieList[s].execAttachedLWF(t,e);if(null!=this.attachedLWFs){for(i in u=this.detachedLWFs)u[i],null!=(n=this.attachedLWFs[i])&&this.deleteAttachedLWF(this,n,!0,!1);for(this.detachedLWFs={},a=0,l=(d=this.attachedLWFListKeys).length;a<l;a++)s=d[a],(r=(n=this.attachedLWFList[s]).child).tick===this.lwf.tick&&(r.progress=e),this.lwf.renderObject(r.execInternal(t)),p|=r.rootMovie.hasButton}return p},pe.prototype.updateObject=function(t,e,i,r,s){var n=t.isMovie&&t.property.hasMatrix?e:r||!t.updated||t.matrixIdChanged?K.calcMatrixId(this.lwf,this.matrix1,e,t.matrixId):null,o=t.isMovie&&t.property.hasColorTransform?i:s||!t.updated||t.colorTransformIdChanged?K.calcColorTransformId(this.lwf,this.colorTransform1,i,t.colorTransformId):null;t.update(n,o)},pe.prototype.update=function(t,e){var i,r,s,n,o,a,h,l,c,u,d,p,f,m,y;if(this.active){for(r=this.overriding?o=!0:(o=this.matrix.setWithComparing(t),this.colorTransform.setWithComparing(e)),t=this.property.hasMatrix?(o=!0,K.calcMatrix(this.matrix0,this.matrix,this.property.matrix)):this.matrix,e=this.property.hasColorTransform?(r=!0,K.calcColorTransform(this.lwf,this.colorTransform0,this.colorTransform,this.property.colorTransform)):this.colorTransform,null!=this.attachedLWFs&&(this.needsUpdateAttachedLWFs=!1,this.needsUpdateAttachedLWFs|=this.matrixForAttachedLWFs.setWithComparing(t),this.needsUpdateAttachedLWFs|=this.colorTransformForAttachedLWFs.setWithComparing(e)),s=l=0,f=this.data.depths;0<=f?l<f:f<l;s=0<=f?++l:--l)null!=(h=this.displayList[s])&&this.updateObject(h,t,e,o,r);if(null!=this.bitmapClips)for(c=0,d=(m=this.bitmapClips).length;c<d;c++)null!=(i=m[c])&&i.update(t,e);if(null!=this.attachedMovies)for(u=0,p=(y=this.attachedMovieListKeys).length;u<p;u++)n=y[u],a=this.attachedMovieList[n],this.updateObject(a,t,e,o,r)}},pe.prototype.postUpdate=function(){for(var t,e,i,r,s,n,o,a,h=this.instanceHead;null!==h;)h.isMovie&&h.postUpdate(),h=h.linkInstance;if(null!=this.attachedMovies)for(s=0,n=(o=this.attachedMovieListKeys).length;s<n;s++)i=o[s],this.attachedMovieList[i].postUpdate();this.requestedCalculateBounds&&(this.xMin=Number.MAX_VALUE,this.xMax=-Number.MAX_VALUE,this.yMin=Number.MAX_VALUE,this.yMax=-Number.MAX_VALUE,t=function(t,e,i,r){return a.calculateBounds(t)},(a=this).inspect(t,0,0),this.lwf.property.hasMatrix&&(e=new V,K.invertMatrix(e,this.lwf.property.matrix),r=K.calcMatrixToPoint(this.xMin,this.yMin,e),this.xMin=r[0],this.yMin=r[1],r=K.calcMatrixToPoint(this.xMax,this.yMax,e),this.xMax=r[0],this.yMax=r[1]),this.bounds={xMin:this.xMin,xMax:this.xMax,yMin:this.yMin,yMax:this.yMax},this.requestedCalculateBounds=!1,null!=this.calculateBoundsCallback&&(this.calculateBoundsCallback.call(this),this.calculateBoundsCallback=null)),this.handler.empty||this.handler.call("update",this)},pe.prototype.updateAttachedLWF=function(){for(var t,e,i,r,s,n,o,a,h,l=this.instanceHead;null!==l;)l.isMovie&&l.updateAttachedLWF(),l=l.linkInstance;if(null!=this.attachedMovies)for(r=0,n=(a=this.attachedMovieListKeys).length;r<n;r++)e=a[r],this.attachedMovieList[e].updateAttachedLWF();if(null!=this.attachedLWFs)for(s=0,o=(h=this.attachedLWFListKeys).length;s<o;s++)e=h[s],(i=(t=this.attachedLWFList[e].child).needsUpdate||this.needsUpdateAttachedLWFs)&&t.update(this.matrixForAttachedLWFs,this.colorTransformForAttachedLWFs),t.isLWFAttached&&t.rootMovie.updateAttachedLWF(),i&&t.rootMovie.postUpdate()},pe.prototype.calculateBounds=function(t){var e,i,r,s,n,o,a,h=null;switch(t.type){case z.GRAPHIC:for(n=0,o=(a=t.displayList).length;n<o;n++)e=a[n],this.calculateBounds(e);break;case z.BITMAP:case z.BITMAPEX:null!=(h=t.type===z.BITMAP?t.lwf.data.bitmaps[t.objectId].textureFragmentId:t.lwf.data.bitmapExs[t.objectId].textureFragmentId)&&0<=h&&(s=t.lwf.data.textureFragments[h],this.updateBounds(t.matrix,s.x,s.x+s.w,s.y,s.y+s.h));break;case z.BUTTON:this.updateBounds(t.matrix,0,t.width,0,t.height);break;case z.TEXT:r=t.lwf.data.texts[t.objectId],this.updateBounds(t.matrix,0,r.width,0,r.height);break;case z.PROGRAMOBJECT:i=t.lwf.data.programObjects[t.objectId],this.updateBounds(t.matrix,0,i.width,0,i.height)}},pe.prototype.updateBounds=function(t,e,i,r,s){for(var n,o,a,h,l=[[e,r],[e,s],[i,r],[i,s]],c=0,u=l.length;c<u;c++)n=l[c],o=(h=K.calcMatrixToPoint(n[0],n[1],t))[0],a=h[1],o<this.xMin?this.xMin=o:o>this.xMax&&(this.xMax=o),a<this.yMin?this.yMin=a:a>this.yMax&&(this.yMax=a)},pe.prototype.linkButton=function(){var t,e,i,r,s,n,o,a,h,l,c,u;if(this.visible&&this.active&&this.hasButton){for(t=s=0,l=this.data.depths;0<=l?s<l:l<s;t=0<=l?++s:--s)null!=(r=this.displayList[t])&&(r.isButton||r.isMovie&&r.hasButton)&&r.linkButton();if(null!=this.attachedMovies)for(n=0,a=(c=this.attachedMovieListKeys).length;n<a;n++)e=c[n],(i=this.attachedMovieList[e]).hasButton&&i.linkButton();if(null!=this.attachedLWFs)for(o=0,h=(u=this.attachedLWFListKeys).length;o<h;o++)e=u[o],this.attachedLWFList[e].linkButton()}},pe.prototype.render=function(t,e){var i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v;if(this.active||null!=this.lwf.rendererFactory.needsRenderForInactive){if(this.visible&&this.active||(t=!1),h=a=!1,"normal"!==this.blendMode)switch(this.blendMode){case"add":case"multiply":case"screen":case"subtract":this.lwf.beginBlendMode(this.blendMode),a=!0;break;case"erase":case"layer":case"mask":case"alpha":this.lwf.beginMaskMode(this.blendMode),h=!0}for(this.handler.empty||this.handler.call("render",this),this.property.hasRenderingOffset&&(this.lwf.renderOffset(),e=this.property.renderingOffset),e===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),s=l=0,y=this.data.depths;0<=y?l<y:y<l;s=0<=y?++l:--l)null!=(o=this.displayList[s])&&o.render(t,e);if(null!=this.bitmapClips)for(c=0,p=(_=this.bitmapClips).length;c<p;c++)null!=(i=_[c])&&i.render(t&&i.visible,e);if(null!=this.attachedMovies)for(u=0,f=(g=this.attachedMovieListKeys).length;u<f;u++)n=g[u],this.attachedMovieList[n].render(t,e);if(null!=this.attachedLWFs)for(d=0,m=(v=this.attachedLWFListKeys).length;d<m;d++)n=v[d],(r=this.attachedLWFList[n].child).setAttachVisible(t),this.lwf.renderObject(r.render(this.lwf.renderingIndex,this.lwf.renderingCount,e));a&&this.lwf.endBlendMode(),h&&this.lwf.endMaskMode()}},pe.prototype.inspect=function(t,e,i){var r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v;for(this.property.hasRenderingOffset&&(this.lwf.renderOffset(),h=this.property.renderingOffset),h===Number.MIN_VALUE&&this.lwf.clearRenderOffset(),t(this,e,i,h),++e,n=l=0,y=this.data.depths;0<=y?l<y:y<l;n=0<=y?++l:--l)null!=(a=this.displayList[n])&&a.inspect(t,e,n,h);if(null!=this.bitmapClips)for(c=0,p=(_=this.bitmapClips).length;c<p;c++)null!=(r=_[c])&&r.inspect(t,e,n++,h);if(null!=this.attachedMovies)for(u=0,f=(g=this.attachedMovieListKeys).length;u<f;u++)o=g[u],this.attachedMovieList[o].inspect(t,e,n++,h);if(null!=this.attachedLWFs)for(d=0,m=(v=this.attachedLWFListKeys).length;d<m;d++)o=v[d],s=this.attachedLWFList[o].child,this.lwf.renderObject(s.inspect(t,e,n++,h))},pe.prototype.destroy=function(){for(var t,e,i,r,s,n,o,a,h,l=this.displayList,c=0,u=l.length;c<u;c++)null!=(r=l[c])&&r.destroy();if(null!=this.bitmapClips){for(s=0,n=(o=this.bitmapClips).length;s<n;s++)null!=(t=o[s])&&t.destroy();this.bitmapClips=null}if(null!=this.attachedMovies){for(e in a=this.attachedMovies)a[e].destroy();this.attachedMovies=null,this.detachedMovies=null,this.attachedMovieList=null,this.attachedMovieListKeys=null}if(null!=this.attachedLWFs){for(e in h=this.attachedLWFs)i=h[e],this.execDetachHandler(i);this.attachedLWFs=null,this.detachedLWFs=null,this.attachedLWFList=null,this.attachedLWFListKeys=null}null!=this.unloadFunc&&this.unloadFunc.call(this),this.playAnimation(A.UNLOAD),this.handler.empty||this.handler.call("unload",this),this.instanceHead=null,this.instanceTail=null,this.displayList=null,this.property=null,pe.__super__.destroy.call(this)},pe.prototype.playAnimation=function(t){for(var e,i,r=this.lwf.data.movieClipEvents,s=i=0,n=this.data.clipEvents;0<=n?i<n:n<i;s=0<=n?++i:--i)0!=((e=r[this.data.clipEventId+s]).clipEvent&t)&&this.lwf.playAnimation(e.animationId,this)},pe.prototype.dispatchEvent=function(t){var r,s,e,i,n;switch("object"==typeof t?(e=t.param,t=t.type):e=null,t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.empty||this.handler.call(t,this);break;default:if(null==(s=this.eventHandlers[t]))return!1;for(i=0,n=(s=function(){for(var t=[],e=0,i=s.length;e<i;e++)r=s[e],t.push(r);return t}()).length;i<n;i++)null!=(r=s[i])&&r.call(this,{type:t,param:e})}return!0},pe.prototype.addEventHandler=function(t,e){var i;switch(t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.lwf.enableExec(),this.handler.addHandler(t,e);break;default:null==(i=this.eventHandlers)[t]&&(i[t]=[]),this.eventHandlers[t].push(e)}},pe.prototype.removeEventHandler=function(t,e){var i,r;switch(t){case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.removeHandler(t,e);break;default:if(null==(i=this.eventHandlers[t]))return;for(r=0;r<i.length;)i[r]===e?i.splice(r,1):++r;0===i.length&&delete this.eventHandlers[t]}},pe.prototype.clearEventHandler=function(t){switch(null==t&&(t=null),t){case null:this.handler.clear(),this.eventHandlers={};break;case"load":case"postLoad":case"unload":case"enterFrame":case"update":case"render":this.handler.clear(t);break;default:delete this.eventHandlers[t]}},pe.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},pe.prototype.nextEnterFrame=function(t){null==this.nextEnterFrameFunctions&&(this.nextEnterFrameFunctions=[]),this.nextEnterFrameFunctions.push(t)},pe.prototype.searchFrame=function(t){return this.lwf.searchFrame(this,t)},pe.prototype.gotoLabel=function(t){return"string"==typeof t&&(t=this.lwf.getStringId(t)),this.gotoFrame(this.lwf.searchFrame(this,t)),this},pe.prototype.gotoAndStop=function(t){return"string"==typeof t?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(t))):this.gotoFrame(t),this.stop(),this},pe.prototype.gotoAndPlay=function(t){return"string"==typeof t?this.gotoFrame(this.lwf.searchFrame(this,this.lwf.getStringId(t))):this.gotoFrame(t),this.play(),this},pe.prototype.searchMovieInstance=function(t,e){var i,r;for(null==e&&(e=!0),"string"==typeof t&&(t=this.lwf.getStringId(t)),r=this.instanceHead;null!==r;){if(r.isMovie&&this.lwf.getInstanceNameStringId(r.instanceId)===t)return r;if(e&&r.isMovie&&null!==(i=r.searchMovieInstance(t,e)))return i;r=r.linkInstance}return null},pe.prototype.searchMovieInstanceByInstanceId=function(t,e){for(var i,r=this.instanceHead;null!==r;){if(r.isMovie&&r.instanceId===t)return r;if(e&&r.isMovie&&null!==(i=r.searchMovieInstanceByInstanceId(t,e)))return i;r=r.linkInstance}return null},pe.prototype.searchButtonInstance=function(t,e){var i,r;for(null==e&&(e=!0),"string"==typeof t&&(t=this.lwf.getStringId(t)),r=this.instanceHead;null!==r;){if(r.isButton&&this.lwf.getInstanceNameStringId(r.instanceId)===t)return r;if(e&&r.isMovie&&null!==(i=r.searchButtonInstance(t,e)))return i;r=r.linkInstance}return null},pe.prototype.searchButtonInstanceByInstanceId=function(t,e){for(var i,r=this.instanceHead;null!==r;){if(r.isButton&&r.instanceId===t)return r;if(e&&r.isMovie&&null!==(i=r.searchMovieInstanceByInstanceId(t,e)))return i;r=r.linkInstance}return null},pe.prototype.move=function(t,e){return this.property.hasMatrix||K.syncMatrix(this),this.property.move(t,e),this},pe.prototype.moveTo=function(t,e){return this.property.hasMatrix||K.syncMatrix(this),this.property.moveTo(t,e),this},pe.prototype.rotate=function(t){return this.property.hasMatrix||K.syncMatrix(this),this.property.rotate(t),this},pe.prototype.rotateTo=function(t){return this.property.hasMatrix||K.syncMatrix(this),this.property.rotateTo(t),this},pe.prototype.scale=function(t,e){return this.property.hasMatrix||K.syncMatrix(this),this.property.scale(t,e),this},pe.prototype.scaleTo=function(t,e){return this.property.hasMatrix||K.syncMatrix(this),this.property.scaleTo(t,e),this},pe.prototype.setMatrix=function(t,e,i,r){return null==e&&(e=1),null==i&&(i=1),null==r&&(r=0),this.property.setMatrix(t,e,i,r),this},pe.prototype.setAlpha=function(t){return this.property.hasColorTransform||K.syncColorTransform(this),this.property.setAlpha(t),this},pe.prototype.setColorTransform=function(t){return this.property.setColorTransform(t),this},pe.prototype.setRenderingOffset=function(t){return this.property.setRenderingOffset(t),this},pe.prototype.getX=function(){return this.property.hasMatrix?this.property.matrix.translateX:K.getX(this)},pe.prototype.setX=function(t){this.property.hasMatrix||K.syncMatrix(this),this.property.moveTo(t,this.property.matrix.translateY)},pe.prototype.getY=function(){return this.property.hasMatrix?this.property.matrix.translateY:K.getY(this)},pe.prototype.setY=function(t){this.property.hasMatrix||K.syncMatrix(this),this.property.moveTo(this.property.matrix.translateX,t)},pe.prototype.getScaleX=function(){return this.property.hasMatrix?this.property.scaleX:K.getScaleX(this)},pe.prototype.setScaleX=function(t){this.property.hasMatrix||K.syncMatrix(this),this.property.scaleTo(t,this.property.scaleY)},pe.prototype.getScaleY=function(){return this.property.hasMatrix?this.property.scaleY:K.getScaleY(this)},pe.prototype.setScaleY=function(t){this.property.hasMatrix||K.syncMatrix(this),this.property.scaleTo(this.property.scaleX,t)},pe.prototype.getRotation=function(){return this.property.hasMatrix?this.property.rotation:K.getRotation(this)},pe.prototype.setRotation=function(t){this.property.hasMatrix||K.syncMatrix(this),this.property.rotateTo(t)},pe.prototype.getAlphaProperty=function(){return this.property.hasColorTransform?this.property.colorTransform.multi.alpha:K.getAlpha(this)},pe.prototype.setAlphaProperty=function(t){this.property.hasColorTransform||K.syncColorTransform(this),this.property.setAlpha(t)},pe.prototype.requestCalculateBounds=function(t){null==t&&(t=null),this.requestedCalculateBounds=!0,this.calculateBoundsCallback=t,this.bounds=void 0},pe.prototype.getBounds=function(){return this.bounds},pe.prototype.setFrameRate=function(t){var e,i,r,s,n,o,a,h;if(null!=this.attachedMovies)for(r=0,n=(a=this.attachedMovieListKeys).length;r<n;r++)i=a[r],this.attachedMovieList[i].setFrameRate(t);if(null!=this.attachedLWFs)for(s=0,o=(h=this.attachedLWFListKeys).length;s<o;s++)i=h[s],this.attachedLWFList[i].child.setFrameRate(t);for(e=this.instanceHead;null!==e;)e.isMovie&&e.setFrameRate(t),e=e.linkInstance},pe.prototype.cacheCurrentLabels=function(){var t,e,i,r;if(null==this.currentLabelsCache&&(this.currentLabelsCache=[],null!=(e=this.lwf.getMovieLabels(this)))){for(r in e)t=e[r],(i={}).frame=t+1,i.name=this.lwf.data.strings[r],this.currentLabelsCache.push(i);this.currentLabelsCache.sort(function(t,e){return t.frame-e.frame})}},pe.prototype.getCurrentLabel=function(){var t,e,i,r,s,n,o,a,h,l;if(this.cacheCurrentLabels(),0===this.currentLabelsCache.length)return null;if((t=this.currentFrameInternal+1)<1&&(t=1),null==(r=this.currentLabelCache[t])){if(e=this.currentLabelsCache[0],s=this.currentLabelsCache[this.currentLabelsCache.length-1],t<e.frame)r="";else if(t===e.frame)r=e.name;else if(t>=s.frame)r=s.name;else for(i=0,n=this.currentLabelsCache[i].frame,h=this.currentLabelsCache.length-1,l=this.currentLabelsCache[h].frame;;){if(i===h||h-i==1){r=t<n?"":t===l?this.currentLabelsCache[h].name:this.currentLabelsCache[i].name;break}if(o=Math.floor((h-i)/2)+i,t<(a=this.currentLabelsCache[o].frame))h=o,l=a;else{if(!(a<t)){r=this.currentLabelsCache[o].name;break}i=o,n=a}}this.currentLabelCache[t]=r}return""===r?null:r},pe.prototype.getCurrentLabels=function(){return this.cacheCurrentLabels(),this.currentLabelsCache},void 0!==(T=pe).prototype.__defineGetter__?(T.prototype.__defineGetter__("x",function(){return this.getX()}),T.prototype.__defineSetter__("x",function(t){return this.setX(t)}),T.prototype.__defineGetter__("y",function(){return this.getY()}),T.prototype.__defineSetter__("y",function(t){return this.setY(t)}),T.prototype.__defineGetter__("scaleX",function(){return this.getScaleX()}),T.prototype.__defineSetter__("scaleX",function(t){return this.setScaleX(t)}),T.prototype.__defineGetter__("scaleY",function(){return this.getScaleY()}),T.prototype.__defineSetter__("scaleY",function(t){return this.setScaleY(t)}),T.prototype.__defineGetter__("rotation",function(){return this.getRotation()}),T.prototype.__defineSetter__("rotation",function(t){return this.setRotation(t)}),T.prototype.__defineGetter__("alpha",function(){return this.getAlphaProperty()}),T.prototype.__defineSetter__("alpha",function(t){return this.setAlphaProperty(t)}),T.prototype.__defineGetter__("currentFrame",function(){return this.currentFrameInternal+1}),T.prototype.__defineGetter__("currentLabel",function(){return this.getCurrentLabel()}),T.prototype.__defineGetter__("currentLabels",function(){return this.getCurrentLabels()})):void 0!==Object.defineProperty&&(Object.defineProperty(T.prototype,"x",{get:function(){return this.getX()},set:function(t){return this.setX(t)}}),Object.defineProperty(T.prototype,"y",{get:function(){return this.getY()},set:function(t){return this.setY(t)}}),Object.defineProperty(T.prototype,"scaleX",{get:function(){return this.getScaleX()},set:function(t){return this.setScaleX(t)}}),Object.defineProperty(T.prototype,"scaleY",{get:function(){return this.getScaleY()},set:function(t){return this.setScaleY(t)}}),Object.defineProperty(T.prototype,"rotation",{get:function(){return this.getRotation()},set:function(t){return this.setRotation(t)}}),Object.defineProperty(T.prototype,"alpha",{get:function(){return this.getAlphaProperty()},set:function(t){return this.setAlphaProperty(t)}}),Object.defineProperty(T.prototype,"currentFrame",{get:function(){return this.currentFrameInternal+1}}),Object.defineProperty(T.prototype,"currentLabel",{get:function(){return this.getCurrentLabel()}}),Object.defineProperty(T.prototype,"currentLabels",{get:function(){return this.getCurrentLabels()}})),fe.prototype.clear=function(t){var e,i,r;if(null==t&&(t=null),null!=t)null!=this[t]&&(this[t]=[]);else for(e=0,i=(r=this.types).length;e<i;e++)this[t=r[e]]=[];this.empty=!0},fe.prototype.add=function(t){var e,i,r,s,n;if(null!=t){for(r=0,s=(n=this.types).length;r<s;r++)null!=(e=t[i=n[r]])&&this[i].push(e);this.updateEmpty()}},fe.prototype.concat=function(t){var e,i,r,s,n,o,a,h;if(null!=t&&!t.empty){for(s=0,o=(h=this.types).length;s<o;s++)for(n=0,a=(i=t[r=h[s]]).length;n<a;n++)e=i[n],this[r].push(e);this.updateEmpty()}},fe.prototype.addHandler=function(t,e){null!=e&&(this[t].push(e),this.empty=!1)},fe.prototype.removeInternal=function(t,e){for(var i=0;i<t.length;)t[i]===e?t.splice(i,1):++i},fe.prototype.remove=function(t){for(var e,i,r=this.types,s=0,n=r.length;s<n;s++)null!=(e=t[i=r[s]])&&this.removeInternal(this[i],e);this.updateEmpty()},fe.prototype.removeHandler=function(t,e){null!=e&&this.removeInternal(this[t],e),this.updateEmpty()},fe.prototype.call=function(t,e){var r,i,s,n=this[t];if(null!=n&&0<n.length)for(i=0,s=(n=function(){for(var t=[],e=0,i=n.length;e<i;e++)r=n[e],t.push(r);return t}()).length;i<s;i++)(r=n[i]).call(e,e)},fe.prototype.updateEmpty=function(){for(var t,e=this.types,i=0,r=e.length;i<r;i++)if(0<(null!=(t=this[e[i]])?t.length:void 0))return void(this.empty=!1);this.empty=!0},t(me,r=fe),ft=["load","postLoad","unload","enterFrame","update","render"],B=me,t(ye,r),mt=["load","unload","enterFrame","update","render","press","release","rollOver","rollOut","keyPress"],n=ye,_e.globalRenderCount=0,_e.prototype.setRendererFactory=function(t){null==t&&(t=null),null==t&&(t=new S),this.rendererFactory=t,this.rendererFactory.init(this)},_e.prototype.getRendererFactory=function(){var t;if(null==this.parent)return this.rendererFactory;for(t=this.parent;null!=t.parent;)t=t.parent;return t.lwf.rendererFactory},_e.prototype.setFrameRate=function(t){0!==t&&(this.frameRate=t,this.tick=1/this.frameRate,this.isLWFAttached&&this.rootMovie.setFrameRate(t))},_e.prototype.setPreferredFrameRate=function(t,e){null==e&&(e=2),0!==t&&(this.execLimit=Math.ceil(this.frameRate/t)+e)},_e.prototype.fitForHeight=function(t,e){K.fitForHeight(this,t,e)},_e.prototype.fitForWidth=function(t,e){K.fitForWidth(this,t,e)},_e.prototype.scaleForHeight=function(t,e){K.scaleForHeight(this,t,e)},_e.prototype.scaleForWidth=function(t,e){K.scaleForWidth(this,t,e)},_e.prototype.setTextScale=function(t){this.textScale=t},_e.prototype.setFont=function(t,e){this.rendererFactory.setFont(t,e)},_e.prototype.getStageSize=function(){var t=this.rendererFactory.getStageSize();return{width:t[0],height:t[1]}},_e.prototype.renderOffset=function(){this.renderingIndexOffsetted=0},_e.prototype.clearRenderOffset=function(){this.renderingIndexOffsetted=this.renderingIndex},_e.prototype.renderObject=function(t){return null==t&&(t=1),this.renderingIndex+=t,this.renderingIndexOffsetted+=t,this.renderingIndex},_e.prototype.beginBlendMode=function(t){null!=this.parent?this.parent.lwf.beginBlendMode(t):(this.blendModes.unshift(t),this.rendererFactory.setBlendMode(t))},_e.prototype.endBlendMode=function(){null!=this.parent?this.parent.lwf.endBlendMode():(this.blendModes.shift(),this.rendererFactory.setBlendMode(0<this.blendModes.length?this.blendModes[0]:"normal"))},_e.prototype.beginMaskMode=function(t){null!=this.parent?this.parent.lwf.beginMaskMode(t):(this.maskModes.unshift(t),this.rendererFactory.setMaskMode(t))},_e.prototype.endMaskMode=function(){null!=this.parent?this.parent.lwf.endMaskMode():(this.maskModes.shift(),this.rendererFactory.setMaskMode(0<this.maskModes.length?this.maskModes[0]:"normal"))},_e.prototype.setAttachVisible=function(t){this.attachVisible=t},_e.prototype.clearFocus=function(t){this.focus===t&&(this.focus=null)},_e.prototype.clearPressed=function(t){this.pressed===t&&(this.pressed=null)},_e.prototype.clearIntercepted=function(){this.intercepted=!1},_e.prototype.init=function(){this.time=0,this.progress=0,this.instances=[],this.focus=null,this.pressed=null,this.movieCommands={},this.rootMovieStringId=this.getStringId("_root"),null!=this.rootMovie&&this.rootMovie.destroy(),this.rootMovie=new T(this,null,this.data.header.rootMovieId,this.searchInstanceId(this.rootMovieStringId))},_e.prototype.calcMatrix=function(t){var e=this.property,i=e.hasMatrix?null!=t?K.calcMatrix(this.matrix,t,e.matrix):e.matrix:null!=t?t:this.matrixIdentity;return i},_e.prototype.calcColorTransform=function(t){var e=this.property,i=e.hasColorTransform?null!=t?K.calcColorTransform(this,this.colorTransform,t,e.colorTransform):e.colorTransform:null!=t?t:this.colorTransformIdentity;return i},_e.prototype.linkButton=function(){this.buttonHead=null,this.interactive&&this.rootMovie.hasButton&&(this.focusOnLink=!1,this.rootMovie.linkButton(),null===this.focus||this.focusOnLink||(this.focus.rollOut(),this.focus=null))},_e.prototype.execInternal=function(t){var e,i,r,s,n,o,a;if(null==this.rootMovie||!this.active)return 0;if(r=!1,e=this.progress,this.isExecDisabled&&null===this._tweens)this.executedForExecDisabled||(++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(!0),r=this.executedForExecDisabled=!0);else{if(n=!0,0===t?this.progress=this.tick:t<0?(this.progress=this.tick,n=!1):0===this.time?(this.time+=this.tick,this.progress+=this.tick):(this.time+=t,this.progress+=t),null!=(s=this.execHandlers))for(o=0,a=s.length;o<a;o++)s[o].call(this);for(i=this.execLimit;this.progress>=this.tick-this.roundOffTick;){if(--i<0){this.progress=0;break}if(this.progress-=this.tick,++this.execCount,this.rootMovie.exec(),this.rootMovie.postExec(n),r=!0,!this.frameSkip)break}this.progress<this.roundOffTick&&(this.progress=0),this.linkButton()}return this.isLWFAttached&&this.rootMovie.execAttachedLWF(t,e)&&this.linkButton(),this.needsUpdate=!1,this.fastForward||(r||this.isPropertyDirty||this.needsUpdateForAttachLWF)&&(this.needsUpdate=!0),this.execDisabled||t<0&&(this.progress=e),this.renderingCount},_e.prototype.exec=function(t,e,i){var r,s,n;for(null==t&&(t=0),null==e&&(e=null),null==i&&(i=null),r=!1,null!=e&&(r|=this.execMatrix.setWithComparing(e)),null!=i&&(r|=this.execColorTransform.setWithComparing(i)),null==this.parent&&(this.fastForwardCurrent=this.fastForward,this.fastForwardCurrent&&(t=this.tick,n=Date.now()));s=this.execInternal(t),(r|=this.needsUpdate)&&this.update(e,i),this.isLWFAttached&&this.rootMovie.updateAttachedLWF(),r&&this.rootMovie.postUpdate(),this.fastForwardCurrent&&this.fastForward&&null==this.parent&&!(Date.now()-n>=this.fastForwardTimeout););return s},_e.prototype.forceExec=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.exec(0,t,e)},_e.prototype.forceExecWithoutProgress=function(t,e){return null==t&&(t=null),null==e&&(e=null),this.exec(-1,t,e)},_e.prototype.update=function(t,e){var i,r;null==t&&(t=null),null==e&&(e=null),r=this.calcMatrix(t),i=this.calcColorTransform(e),this.renderingIndex=0,this.renderingIndexOffsetted=0,this.rootMovie.update(r,i),this.renderingCount=this.renderingIndex,this.isPropertyDirty=!1,this.needsUpdateForAttachLWF=!1},_e.prototype.render=function(t,e,i){return null==t&&(t=0),null==e&&(e=0),null==i&&(i=Number.MIN_VALUE),null==this.rootMovie||!this.active||this.fastForwardCurrent?0:(this.renderCount=++_e.globalRenderCount,0<e&&(this.renderingCount=e),this.renderingIndex=t,this.renderingIndexOffsetted=t,this.property.hasRenderingOffset&&(this.renderOffset(),i=this.property.renderingOffset),this.rendererFactory.beginRender(this),this.rootMovie.render(this.attachVisible,i),this.rendererFactory.endRender(this),this.renderingIndex-t)},_e.prototype.inspect=function(t,e,i,r,s,n){return null==e&&(e=0),null==i&&(i=0),null==r&&(r=0),null==s&&(s=0),null==n&&(n=Number.MIN_VALUE),0<s&&(this.renderingCount=s),this.renderingIndex=r,this.renderingIndexOffsetted=r,this.property.hasRenderingOffset&&(this.renderOffset(),n=this.property.renderingOffset),this.rootMovie.inspect(t,e,i,n),this.renderingIndex-r},_e.prototype.destroy=function(){var t,e,i,r,s;if(null!=this.rootMovie){for(e in null!=this.stopTweens&&this.stopTweens(),r=this.loadedLWFs)r[e].destroy();this.loadedLWFs=null,this.rootMovie.destroy(),(this.rootMovie=null)!=(t=null!=(s=this.functions)?s.destroy:void 0)&&t.call(this),(this.functions=null)!=this.rendererFactory&&(null!=(i=this.rendererFactory.resourceCache)&&i.unloadLWF(this),this.rendererFactory.destruct(),this.rendererFactory=null),this.property=null,this.buttonHead=null,this.instances=null,this.execHandlers=null,this.eventHandlers=null,this.genericEventHandlers=null,this.movieEventHandlers=null,this.buttonEventHandlers=null,this.movieCommands=null,this.programObjectConstructors=null}},_e.prototype.getInstanceNameStringId=function(t){return t<0||t>=this.data.instanceNames.length?-1:this.data.instanceNames[t].stringId},_e.prototype.getStringId=function(t){var e=this.data.stringMap[t];return null!=e?e:-1},_e.prototype.searchInstanceId=function(t){var e;return t<0||t>=this.data.strings.length||null==(e=this.data.instanceNameMap[t])?-1:e},_e.prototype.searchFrame=function(t,e){var i;return"string"==typeof e&&(e=this.getStringId(e)),e<0||e>=this.data.strings.length||null==(i=this.data.labelMap[t.objectId][e])?-1:i+1},_e.prototype.getMovieLabels=function(t){return null==t?null:this.data.labelMap[t.objectId]},_e.prototype.searchMovieLinkage=function(t){var e;return t<0||t>=this.data.strings.length||null==(e=this.data.movieLinkageMap[t])?-1:this.data.movieLinkages[e].movieId},_e.prototype.getMovieLinkageName=function(t){var e=this.data.movieLinkageNameMap[t];return null!=e?this.data.strings[e]:null},_e.prototype.searchMovieInstance=function(t){var e,i,r,s,n,o;if("string"==typeof t){if(-1!==(e=t).indexOf(".")){if((s=e.split("."))[0]!==this.data.strings[this.rootMovieStringId])return null;for(i=this.rootMovie,n=0,o=s.length;n<o;n++)if(r=s[n],null==(i=i.searchMovieInstance(r,!1)))return null;return i}t=this.getStringId(t)}return this.searchMovieInstanceByInstanceId(this.searchInstanceId(t))},_e.prototype.searchMovieInstanceByInstanceId=function(t){var e;if("string"==typeof t&&(t=this.searchInstanceId(this.getStringId(t))),t<0||t>=this.data.instanceNames.length)return null;for(e=this.instances[t];null!=e;){if(e.isMovie)return e;e=e.nextInstance}return null},_e.prototype.searchButtonInstance=function(t){var e,i,r,s,n,o;if("string"==typeof t){if(-1!==(i=t).indexOf(".")){if((s=i.split("."))[0]!==this.data.strings[this.rootMovieStringId])return null;for(r=this.rootMovie,e=n=1,o=s.length;1<=o?n<o:o<n;e=1<=o?++n:--n){if(e===s.length-1)return r.searchButtonInstance(s[e],!1);if(null==(r=r.searchButtonInstance(s[e],!1)))return null}return null}t=this.getStringId(t)}return this.searchButtonInstanceByInstanceId(this.searchInstanceId(t))},_e.prototype.searchButtonInstanceByInstanceId=function(t){var e;if("string"==typeof t&&(t=this.searchInstanceId(this.getStringId(t))),t<0||t>=this.data.instanceNames.length)return null;for(e=this.instances[t];null!=e;){if(e.isButton)return e;e=e.nextInstance}return null},_e.prototype.searchEventId=function(t){var e;return"string"==typeof t&&(t=this.getStringId(t)),t<0||t>=this.data.strings.length||null==(e=this.data.eventMap[t])?-1:e},_e.prototype.searchProgramObjectId=function(t){var e;return"string"==typeof t&&(t=this.getStringId(t)),t<0||t>=this.data.strings.length||null==(e=this.data.programObjectMap[t])?-1:e},_e.prototype.getInstance=function(t){return this.instances[t]},_e.prototype.setInstance=function(t,e){this.instances[t]=e},_e.prototype.addExecHandler=function(t){null==this.execHandlers&&(this.execHandlers=[]),this.execHandlers.push(t)},_e.prototype.removeExecHandler=function(t){var e,i=this.execHandlers;if(null!=i)for(e=0;e<i.length;)i[e]===t?i.splice(e,1):++e},_e.prototype.clearExecHandler=function(){this.execHandlers=null},_e.prototype.setExecHandler=function(t){this.clearExecHandler(),this.addExecHandler(t)},_e.prototype.addEventHandler=function(t,e){var i,r,s="string"==typeof t?this.searchEventId(t):t;s<0||s>=this.data.events.length?(null==(i=this.genericEventHandlers)[t]&&(i[t]=[]),this.genericEventHandlers[t].push(e)):(null==(r=this.eventHandlers)[s]&&(r[s]=[]),this.eventHandlers[s].push(e))},_e.prototype.removeEventHandler=function(t,e){var i,r,s,n,o,a,h="string"==typeof t?this.searchEventId(t):t;if(h<0||h>=this.data.events.length){if(null==(i=this.genericEventHandlers[t]))return;for(s in n=[],i)i[s]===e&&n.push(s);for(o=0,a=n.length;o<a;o++)delete i[s=n[o]]}else{if(null==(i=this.eventHandlers[h]))return;for(r=0;r<i.length;)i[r]===e?i.splice(r,1):++r;0===i.length&&delete this.eventHandlers[h]}},_e.prototype.clearEventHandler=function(t){var e="string"==typeof t?this.searchEventId(t):t;e<0||e>=this.data.events.length?this.genericEventHandlers[t]=null:this.eventHandlers[e]=null},_e.prototype.setEventHandler=function(t,e){this.clearEventHandler(t),this.addEventHandler(t,e)},_e.prototype.getProgramObjectConstructor=function(t){return"string"==typeof t&&(t=this.searchProgramObjectId(this.getStringId(t))),t<0||t>=this.data.programObjects.length?null:this.programObjectConstructors[t]},_e.prototype.setProgramObjectConstructor=function(t,e){"string"==typeof t&&(t=this.searchProgramObjectId(this.getStringId(t))),t<0||t>=this.data.programObjects.length||(this.programObjectConstructors[t]=e)},_e.prototype.getMovieEventHandlers=function(t){var e,i,r,s;return"string"==typeof t?(s=t,0<=(r=this.searchInstanceId(this.getStringId(s)))&&r<this.data.instanceNames.length?this.movieEventHandlers[r]:null==this.movieEventHandlersByFullName?null:this.movieEventHandlersByFullName[s]):null!=this.movieEventHandlersByFullName&&null!=(e=t.getFullName())&&null!=(i=this.movieEventHandlersByFullName[e])?i:this.movieEventHandlers[t.instanceId]},_e.prototype.addMovieEventHandler=function(t,e){var i,r,s=this.searchInstanceId(this.getStringId(t));if(0<=s&&s<this.data.instanceNames.length)null==(i=this.movieEventHandlers[s])&&(i=new B,this.movieEventHandlers[s]=i),r=this.searchMovieInstanceByInstanceId(s);else{if(-1===t.indexOf("."))return;null==this.movieEventHandlersByFullName&&(this.movieEventHandlersByFullName=[]),null==(i=this.movieEventHandlersByFullName[t])&&(i=new B,this.movieEventHandlersByFullName[t]=i),r=this.searchMovieInstance(t)}i.add(e),null!=r&&r.setHandlers(i)},_e.prototype.removeMovieEventHandler=function(t,e){var i,r=this.getMovieEventHandlers(t);null!=r&&r.remove(e),null!=(i=this.searchMovieInstance(t))&&i.handler.remove(e)},_e.prototype.clearMovieEventHandler=function(t,e){var i,r;null==e&&(e=null),null!=(i=this.getMovieEventHandlers(t))&&i.clear(e),null!=(r=this.searchMovieInstance(t))&&r.handler.clear(e)},_e.prototype.setMovieEventHandler=function(t,e){this.clearMovieEventHandler(t),this.addMovieEventHandler(t,e)},_e.prototype.getButtonEventHandlers=function(t){var e,i,r,s;return"string"==typeof t?(s=t,0<=(r=this.searchInstanceId(this.getStringId(s)))&&r<this.data.instanceNames.length?this.buttonEventHandlers[r]:null==this.buttonEventHandlersByFullName?null:this.buttonEventHandlersByFullName[s]):null!=this.buttonEventHandlersByFullName&&null!=(e=t.getFullName())&&null!=(i=this.buttonEventHandlersByFullName[e])?i:this.buttonEventHandlers[t.instanceId]},_e.prototype.addButtonEventHandler=function(t,e){var i,r,s;if(this.setInteractive(),0<=(s=this.searchInstanceId(this.getStringId(t)))&&s<this.data.instanceNames.length)null==(r=this.buttonEventHandlers[s])&&(r=new n,this.buttonEventHandlers[s]=r),i=this.searchButtonInstanceByInstanceId(s);else{if(-1===t.indexOf("."))return;null==this.buttonEventHandlersByFullName&&(this.buttonEventHandlersByFullName=[]),null==(r=this.buttonEventHandlersByFullName[t])&&(r=new n,this.buttonEventHandlersByFullName[t]=r),i=this.searchButtonInstance(t)}r.add(e),null!=i&&i.setHandlers(r)},_e.prototype.removeButtonEventHandler=function(t,e){var i,r=this.getButtonEventHandlers(t);null!=r&&r.remove(e),null!=(null!=(i=this.searchButtonInstance(t))?i.handler:void 0)&&i.handler.remove(e)},_e.prototype.clearButtonEventHandler=function(t,e){var i,r;null==e&&(e=null),null!=(r=this.getButtonEventHandlers(t))&&r.clear(e),i=this.searchButtonInstance(t),null!=("undefined"!=typeof buffon&&null!==buffon?buffon.handler:void 0)&&i.handler.clear(e)},_e.prototype.setButtonEventHandler=function(t,e){this.clearButtonEventHandler(t),this.addButtonEventHandler(t,e)},_e.prototype.setMovieLoadCommand=function(t,e){var i,r=this.searchMovieInstance(t);null!=r?e.call(r):(i={load:function(){return this.lwf.removeMovieEventHandler(t,i),e.call(this)}},this.addMovieEventHandler(t,i))},_e.prototype.setMoviePostLoadCommand=function(t,e){var i,r=this.searchMovieInstance(t);null!=r?e.call(r):(i={postLoad:function(){return this.lwf.removeMovieEventHandler(t,i),e.call(this)}},this.addMovieEventHandler(t,i))},_e.prototype.playMovie=function(t){this.setMovieLoadCommand(t,function(){return this.play()})},_e.prototype.stopMovie=function(t){this.setMovieLoadCommand(t,function(){return this.stop()})},_e.prototype.nextFrameMovie=function(t){this.setMovieLoadCommand(t,function(){return this.nextFrame()})},_e.prototype.prevFrameMovie=function(t){this.setMovieLoadCommand(t,function(){return this.prevFrame()})},_e.prototype.setVisibleMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.setVisible(e)})},_e.prototype.gotoAndStopMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndStop(e)})},_e.prototype.gotoAndStopMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndStop(e)})},_e.prototype.gotoAndPlayMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndPlay(e)})},_e.prototype.gotoAndPlayMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.gotoAndPlay(e)})},_e.prototype.moveMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.move(e,i)})},_e.prototype.moveToMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.moveTo(e,i)})},_e.prototype.rotateMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.rotate(e)})},_e.prototype.rotateToMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.rotateTo(e)})},_e.prototype.scaleMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.scale(e,i)})},_e.prototype.scaleToMovie=function(t,e,i){this.setMovieLoadCommand(t,function(){return this.scaleTo(e,i)})},_e.prototype.setMatrixMovie=function(t,e,i,r,s){null==i&&(i=1),null==r&&(r=1),null==s&&(s=0),this.setMovieLoadCommand(t,function(){return this.setMatrix(e,i,r,s)})},_e.prototype.setAlphaMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.setAlpha(e)})},_e.prototype.setColorTransformMovie=function(t,e){this.setMovieLoadCommand(t,function(){return this.setColorTransform(e)})},_e.prototype.execMovieCommand=function(){var t,e,i,r,s,n,o,a,h,l=[],c=this.movieCommands;for(e in c){for(s=c[e],t=!0,i=this.rootMovie,n=0,a=e.length;n<a;n++)if(r=e[n],null==(i=i.searchMovieInstance(r))){t=!1;break}t&&(s(i),l.push(e))}for(o=0,h=l.length;o<h;o++)e=l[o],delete this.movieCommands[e]},_e.prototype.setMovieCommand=function(t,e){var i=t.slice(0);this.movieCommands[i]=e,this.execMovieCommand()},_e.prototype.searchAttachedMovie=function(t){return this.rootMovie.searchAttachedMovie(t)},_e.prototype.searchAttachedLWF=function(t){return this.rootMovie.searchAttachedLWF(t)},_e.prototype.addAllowButton=function(t){var e=this.searchInstanceId(this.getStringId(t));return!(e<0)&&(null==this.allowButtonList&&(this.allowButtonList={}),this.allowButtonList[e]=!0)},_e.prototype.removeAllowButton=function(t){var e;return!(null==this.allowButtonList||(e=this.searchInstanceId(this.getStringId(t)))<0||(delete this.allowButtonList[e],0))},_e.prototype.clearAllowButton=function(){this.allowButtonList=null},_e.prototype.addDenyButton=function(t){var e=this.searchInstanceId(this.getStringId(t));return!(e<0)&&(null==this.denyButtonList&&(this.denyButtonList={}),this.denyButtonList[e]=!0)},_e.prototype.denyAllButtons=function(){var t,e,i;for(null==this.denyButtonList&&(this.denyButtonList={}),t=e=0,i=this.data.instanceNames.length;0<=i?e<i:i<e;t=0<=i?++e:--e)this.denyButtonList[t]=!0},_e.prototype.removeDenyButton=function(t){var e;return!(null==this.denyButtonList||(e=this.searchInstanceId(this.getStringId(t)))<0||(delete this.denyButtonList[e],0))},_e.prototype.clearDenyButton=function(){this.denyButtonList=null},_e.prototype.disableExec=function(){this.isExecDisabled=!0,this.executedForExecDisabled=!1},_e.prototype.enableExec=function(){this.isExecDisabled=!1},_e.prototype.setPropertyDirty=function(){this.isPropertyDirty=!0,null!=this.parent&&this.parent.lwf.setPropertyDirty()},_e.prototype.setParent=function(t){var e,i;this.active=!0,this.parent=t,this.rootMovie.parent=t,this.setTextScale(t.lwf.textScale),null!=(e=null!=(i=this.functions)?i.init:void 0)&&e.call(this.rootMovie)},_e.prototype.setInteractive=function(){this.interactive=!0,null!=this.parent&&this.parent.lwf.setInteractive()},_e.prototype.setFrameSkip=function(t){this.frameSkip=t,this.progress=0,null!=this.parent&&this.parent.lwf.setFrameSkip(t)},_e.prototype.setLWFAttached=function(){this.isLWFAttached=!0,this.needsUpdateForAttachLWF=!0,null!=this.parent&&this.parent.lwf.setLWFAttached()},_e.prototype.setFastForwardTimeout=function(t){this.fastForwardTimeout=t},_e.prototype.setFastForward=function(t){this.fastForward=t,null!=this.parent&&this.parent.lwf.setFastForward(t)},_e.prototype.getMovieFunctions=function(t){var e,i,r,s,n=this.getMovieLinkageName(t);return[null!=(e=this.functions)?e[n+"_load"]:void 0,null!=(i=this.functions)?i[n+"_postLoad"]:void 0,null!=(r=this.functions)?r[n+"_unload"]:void 0,null!=(s=this.functions)?s[n+"_enterFrame"]:void 0]},_e.prototype.playAnimation=function(t,e,i){for(var r,s,n,o,a,h,l,c,u,d,p,f=0,m=this.data.animations[t],y=e;;)switch(m[f++]){case _.END:return;case _.PLAY:y.play();break;case _.STOP:y.stop();break;case _.NEXTFRAME:y.nextFrame();break;case _.PREVFRAME:y.prevFrame();break;case _.GOTOFRAME:y.gotoFrameInternal(m[f++]);break;case _.GOTOLABEL:y.gotoFrame(this.searchFrame(y,m[f++]));break;case _.SETTARGET:if(y=e,0!==(r=m[f++]))for(l=0;0<=r?l<r:r<l;0<=r?++l:--l)switch(a=m[f++]){case _.INSTANCE_TARGET_ROOT:y=this.rootMovie;break;case _.INSTANCE_TARGET_PARENT:null==(y=y.parent)&&(y=this.rootMovie);break;default:null==(y=y.searchMovieInstanceByInstanceId(a,!1))&&(y=e)}break;case _.EVENT:if(s=m[f++],null!=(o=null!=(d=this.eventHandlers[s])?d.slice(0):void 0))for(c=0,u=o.length;c<u;c++)(0,o[c])(e,i);break;case _.CALL:h=m[f++],null!=(n=null!=(p=this.functions)?p[this.data.strings[h]]:void 0)&&n.call(e)}},_e.prototype.dispatchEvent=function(t,e,i){var r,s,n,o,a;if(null==e&&(e=this.rootMovie),null==i&&(i=null),r="string"==typeof t?this.searchEventId(t):t,null==(n=r<0||r>=this.data.events.length?this.genericEventHandlers[t]:this.eventHandlers[r]))return!1;for(o=0,a=(n=function(){for(var t=[],e=0,i=n.length;e<i;e++)s=n[e],t.push(s);return t}()).length;o<a;o++)null!=(s=n[o])&&s(e,i);return!0},_e.prototype.inputPoint=function(t,e){var i,r;if(null==this.rootMovie)return null;if(this.intercepted=!1,!this.interactive)return null;for(this.pointX=t,this.pointY=e,r=!1,i=this.buttonHead;null!=i;){if(i.checkHit(t,e)){if(null!=this.allowButtonList){if(null==this.allowButtonList[i.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}i=i.buttonLink;continue}}else if(null!=this.denyButtonList&&null!=this.denyButtonList[i.instanceId]){if(this.interceptByNotAllowOrDenyButtons){this.intercepted=!0;break}i=i.buttonLink;continue}r=!0,this.focus!==i&&(null!=this.focus&&this.focus.rollOut(),this.focus=i,this.focus.rollOver());break}i=i.buttonLink}return r||null==this.focus||(this.focus.rollOut(),this.focus=null),this.focus},_e.prototype.inputPress=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!0,null!=this.focus&&(this.pressed=this.focus,this.focus.press()))},_e.prototype.inputRelease=function(){null!=this.rootMovie&&this.interactive&&(this.pressing=!1,null!=this.focus&&this.pressed===this.focus&&(this.focus.release(),this.pressed=null))},_e.prototype.inputKeyPress=function(t){var e;if(null!=this.rootMovie&&this.interactive)for(e=this.buttonHead;null!=e;)e.keyPress(t),e=e.buttonLink},I=_e,"undefined"!=typeof global&&(null==global.LWF&&(global.LWF={}),global.LWF.BitmapClip=s,global.LWF.Color=j,global.LWF.ColorTransform=G,global.LWF.Format=tt,global.LWF.LWF=I,global.LWF.Loader=k,global.LWF.Matrix=V,global.LWF.Movie=T,global.LWF.Point=O,global.LWF.Property=N),I.prototype.addAllowButton,I.prototype.addButtonEventHandler,I.prototype.addButtonEventListener=I.prototype.addButtonEventHandler,I.prototype.addDenyButton,I.prototype.addEventHandler,I.prototype.addEventListener=I.prototype.addEventHandler,I.prototype.addExecHandler,I.prototype.addExecListener=I.prototype.addExecHandler,I.prototype.addMovieEventHandler,I.prototype.addMovieEventListener=I.prototype.addMovieEventHandler,I.prototype.clearAllowButton,I.prototype.clearButtonEventHandler,I.prototype.clearButtonEventListener=I.prototype.clearButtonEventHandler,I.prototype.clearDenyButton,I.prototype.clearEventHandler,I.prototype.clearEventListener=I.prototype.clearEventHandler,I.prototype.clearExecHandler,I.prototype.clearExecListener=I.prototype.clearExecHandler,I.prototype.clearMovieEventHandler,I.prototype.clearMovieEventListener=I.prototype.clearMovieEventHandler,I.prototype.denyAllButtons,I.prototype.destroy,I.prototype.dispatchEvent,I.prototype.exec,I.prototype.fitForHeight,I.prototype.fitForWidth,I.prototype.forceExec,I.prototype.forceExecWithoutProgress,I.prototype.getStageSize,I.prototype.getStringId,I.prototype.gotoAndPlayMovie,I.prototype.gotoAndPlayMovie,I.prototype.gotoAndStopMovie,I.prototype.gotoAndStopMovie,I.prototype.init,I.prototype.inputKeyPress,I.prototype.inputPoint,I.prototype.inputPress,I.prototype.inputRelease,I.prototype.inspect,I.prototype.moveMovie,I.prototype.moveToMovie,I.prototype.nextFrameMovie,I.prototype.playMovie,I.prototype.prevFrameMovie,I.prototype.removeAllowButton,I.prototype.removeButtonEventHandler,I.prototype.removeButtonEventListener=I.prototype.removeButtonEventHandler,I.prototype.removeDenyButton,I.prototype.removeEventHandler,I.prototype.removeEventListener=I.prototype.removeEventHandler,I.prototype.removeExecHandler,I.prototype.removeExecListener=I.prototype.removeExecHandler,I.prototype.removeMovieEventHandler,I.prototype.removeMovieEventListener=I.prototype.removeMovieEventHandler,I.prototype.render,I.prototype.rotateMovie,I.prototype.rotateToMovie,I.prototype.scaleForHeight,I.prototype.scaleForWidth,I.prototype.scaleMovie,I.prototype.scaleToMovie,I.prototype.searchAttachedLWF,I.prototype.searchAttachedMovie,I.prototype.searchEventId,I.prototype.searchFrame,I.prototype.searchProgramObjectId,I.prototype.setAlphaMovie,I.prototype.setButtonEventHandler,I.prototype.setButtonEventListener=I.prototype.setButtonEventHandler,I.prototype.setColorTransformMovie,I.prototype.setEventHandler,I.prototype.setEventListener=I.prototype.setEventHandler,I.prototype.setExecHandler,I.prototype.setExecListener=I.prototype.setExecHandler,I.prototype.setFastForward,I.prototype.setFastForwardTimeout,I.prototype.setFont,I.prototype.setFrameRate,I.prototype.setFrameSkip,I.prototype.setMatrixMovie,I.prototype.setMovieCommand,I.prototype.setMovieEventHandler,I.prototype.setMovieEventListener=I.prototype.setMovieEventHandler,I.prototype.setMovieLoadCommand,I.prototype.setMoviePostLoadCommand,I.prototype.setPreferredFrameRate,I.prototype.setProgramObjectConstructor,I.prototype.setRendererFactory,I.prototype.setTextScale,I.prototype.setVisibleMovie,I.prototype.stopMovie,k.load,$.prototype.check,$.prototype.name,b.prototype.getFullName,c.prototype.addEventHandler,c.prototype.addEventListener=c.prototype.addEventHandler,c.prototype.clearEventHandler,c.prototype.clearEventListener=c.prototype.clearEventHandler,c.prototype.removeEventHandler,c.prototype.removeEventListener=c.prototype.removeEventHandler,c.prototype.setEventHandler,c.prototype.setEventListener=c.prototype.setEventHandler,T.prototype.addEventHandler,T.prototype.addEventListener=T.prototype.addEventHandler,T.prototype.attachBitmap,T.prototype.attachEmptyMovie,T.prototype.attachLWF,T.prototype.attachMovie,T.prototype.clearEventHandler,T.prototype.clearEventListener=T.prototype.clearEventHandler,T.prototype.detachBitmap,T.prototype.detachFromParent,T.prototype.detachLWF,T.prototype.detachMovie,T.prototype.dispatchEvent,T.prototype.getAttachedBitmap,T.prototype.getAttachedLWF,T.prototype.getAttachedMovie,T.prototype.getAttachedBitmaps,T.prototype.getBounds,T.prototype.globalToLocal,T.prototype.gotoAndPlay,T.prototype.gotoAndStop,T.prototype.gotoFrame,T.prototype.gotoLabel,T.prototype.inspect,T.prototype.localToGlobal,T.prototype.move,T.prototype.moveTo,T.prototype.nextEnterFrame,T.prototype.nextFrame,T.prototype.override,T.prototype.play,T.prototype.prevFrame,T.prototype.removeEventHandler,T.prototype.removeEventListener=T.prototype.removeEventHandler,T.prototype.removeMovieClip,T.prototype.requestCalculateBounds,T.prototype.rotate,T.prototype.rotateTo,T.prototype.scale,T.prototype.scaleTo,T.prototype.searchAttachedLWF,T.prototype.searchAttachedMovie,T.prototype.searchMovieInstance,T.prototype.searchMovieInstanceByInstanceId,T.prototype.setAlpha,T.prototype.setColorTransform,T.prototype.setEventHandler,T.prototype.setEventListener=T.prototype.setEventHandler,T.prototype.setMatrix,T.prototype.setRenderingOffset,T.prototype.setVisible,T.prototype.stop,T.prototype.swapAttachedLWFDepth,T.prototype.swapAttachedMovieDepth,T.prototype.swapDepths,N.prototype.clear,N.prototype.move,N.prototype.moveTo,N.prototype.rotate,N.prototype.rotateTo,N.prototype.scale,N.prototype.scaleTo,N.prototype.setAlpha,N.prototype.setColorTransform,N.prototype.setMatrix,V.prototype.clear,V.prototype.set,j.prototype.set,G.prototype.clear,G.prototype.set,s.prototype.detachFromParent,s.prototype.setMatrix,ge.prototype.initCommands=function(){(null==this.commands||this.commandsCount<.75*this.commands.length)&&(this.commands=[]),this.commandsCount=0,this.subCommands=null},ge.prototype.isMask=function(t){switch(t.maskMode){case"erase":case"mask":case"alpha":return!0}return!1},ge.prototype.isLayer=function(t){return"layer"===t.maskMode},ge.prototype.addCommand=function(t,e){e.renderCount=this.lwf.renderCount,e.renderingIndex=t,this.isMask(e)?null!=this.subCommands&&(this.subCommands[t]=e):(this.isLayer(e)&&this.commandMaskMode!==e.maskMode&&(e.subCommands=[],this.subCommands=e.subCommands),this.commands[t]=e,this.commandsCount++),this.commandMaskMode=e.maskMode},ge.prototype.addCommandToParent=function(t){for(var e,i,r,s,n,o,a,h=t.getRendererFactory(),l=t.renderCount,c=n=0,u=this.commands.length;0<=u?n<u:u<n;c=0<=u?++n:--n)if(null!=(e=this.commands[c])&&e.renderingIndex===c&&e.renderCount===l&&(s=e.subCommands,e.subCommands=null,h.addCommand(c,e),null!=s))for(r=o=0,a=s.length;0<=a?o<a:a<o;r=0<=a?++o:--o)null!=(i=s[r])&&i.renderingIndex===r&&i.renderCount===l&&h.addCommand(r,i);this.initCommands()},ge.prototype.destruct=function(){var t,e,i,r,s,n,o,a,h;for(null!=this.destructedRenderers&&this.callRendererDestructor(),t=0,r=(o=this.bitmapContexts).length;t<r;t++)o[t].destruct();for(e=0,s=(a=this.bitmapExContexts).length;e<s;e++)a[e].destruct();for(i=0,n=(h=this.textContexts).length;i<n;i++)h[i].destruct()},ge.prototype.init=function(t){var e,i,r,s,n,o,a,h;if((this.lwf=t).stage=this.stage,t.resourceCache=this.resourceCache,!this.setupedDomElementConstructor){for(this.setupedDomElementConstructor=!0,h=[],n=0,o=(a=t.data.programObjects).length;n<o;n++)s=a[n],null!=(i=(r=t.data.strings[s.stringId]).match(/^DOM_(.*)/))?(e=i[1],h.push(function(a){return function(o){return t.setProgramObjectConstructor(r,function(t,e,i,r){var s,n=a.resourceCache.domElementConstructor;return null==n||null==(s=n(t,o,i,r))?null:new ht(a,s)})}}(this)(e))):h.push(void 0);return h}},ge.prototype.destructRenderer=function(t){this.destructedRenderers.push(t)},ge.prototype.callRendererDestructor=function(){for(var t=this.destructedRenderers,e=0,i=t.length;e<i;e++)t[e].destructor();this.destructedRenderers=[]},ge.prototype.beginRender=function(t){null!=this.destructedRenderers&&this.callRendererDestructor()},ge.prototype.render=function(t){var e,i,r,s,n,o,a,h=t.renderer,l=h.node,c=l.style;switch(c.zIndex=h.zIndex,e=t.matrix,t.maskMode){case"mask":case"alpha":if(this.renderMasked=!0,c.opacity=0,"mask"===this.renderMaskMode||"alpha"===this.renderMaskMode)return;null!=l.mask?(this.mask=l.mask,c=this.mask.style):(this.mask=l.mask=document.createElement("div"),(c=this.mask.style).display="block",c.position="absolute",c.overflow="hidden",c.webkitUserSelect="none",c.webkitTransformOrigin="0px 0px",this.stage.appendChild(this.mask)),c.width=l.style.width,c.height=l.style.height,null==this.maskMatrix&&(this.maskMatrix=new V,this.maskedMatrix=new V),K.invertMatrix(this.maskMatrix,e);break;case"layer":this.renderMasked?(this.renderMaskMode!==t.maskMode&&(this.mask.style.zIndex=h.zIndex),l.parentNode!==this.mask&&(l.parentNode.removeChild(l),this.mask.appendChild(l)),e=K.calcMatrix(this.maskedMatrix,this.maskMatrix,e)):l.parentNode!==this.stage&&(l.parentNode.removeChild(l),this.stage.appendChild(l));break;default:l.parentNode!==this.stage&&(l.parentNode.removeChild(l),this.stage.appendChild(l))}this.renderMaskMode=t.maskMode,c.opacity=h.alpha,i=e.scaleX.toFixed(12),r=e.scaleY.toFixed(12),n=e.skew1.toFixed(12),s=e.skew0.toFixed(12),o=e.translateX.toFixed(12),a=e.translateY.toFixed(12),this.use3D?c.webkitTransform="matrix3d("+i+","+n+",0,0,"+s+","+r+",0,0,0,0,1,0,"+o+","+a+",0,1)":c.webkitTransform="matrix("+i+","+n+","+s+","+r+","+o+","+a+")"},ge.prototype.endRender=function(t){var e,i,r,s,n,o,a,h,l;if(null!=t.parent)return this.addCommandToParent(t),void(null!=this.destructedRenderers&&this.callRendererDestructor());for(this.renderMaskMode="normal",this.renderMasked=!1,r=t.renderCount,i=o=0,h=this.commands.length;0<=h?o<h:h<o;i=0<=h?++o:--o)if(null!=(e=this.commands[i])&&e.renderingIndex===i&&e.renderCount===r){if(null!=e.subCommands)for(n=a=0,l=e.subCommands.length;0<=l?a<l:l<a;n=0<=l?++a:--a)null!=(s=e.subCommands[n])&&s.renderingIndex===n&&s.renderCount===r&&this.render(s);this.render(e)}this.initCommands(),null!=this.destructedRenderers&&this.callRendererDestructor()},ge.prototype.setBlendMode=function(t){},ge.prototype.setMaskMode=function(t){this.maskMode=t},ge.prototype.constructBitmap=function(t,e,i){var r=this.bitmapContexts[e];if(r)return new at(r)},ge.prototype.constructBitmapEx=function(t,e,i){var r=this.bitmapExContexts[e];if(r)return new at(r)},ge.prototype.constructText=function(t,e,i){var r=this.textContexts[e];if(r)return new pt(t,r,i)},ge.prototype.constructParticle=function(t,e,i){var r=this.resourceCache.particleConstructor,s=t.data.particleDatas[i.particleDataId];if(null!=r)return r(t,t.data.strings[s.stringId])},ge.prototype.convertColor=function(t,e,i,r){K.calcColor(t,e,i,r),e.red=Math.round(255*e.red),e.green=Math.round(255*e.green),e.blue=Math.round(255*e.blue)},ge.prototype.convertRGB=function(t){return"rgb("+Math.round(255*t.red)+","+Math.round(255*t.green)+","+Math.round(255*t.blue)+")"},ge.prototype.getStageSize=function(){var t=this.stage.getBoundingClientRect();return[t.width,t.height]},ge.prototype.fitForHeight=function(t){var e=this.getStageSize(),i=e[0],r=e[1];0!==r&&r!==t.data.header.height&&t.fitForHeight(i,r)},ge.prototype.fitForWidth=function(t){var e=this.getStageSize(),i=e[0],r=e[1];0!==i&&i!==t.data.header.width&&t.fitForWidth(i,r)},ge.prototype.scaleForHeight=function(t){var e=this.getStageSize(),i=e[0],r=e[1];0!==r&&r!==t.data.header.height&&t.scaleForHeight(i,r)},ge.prototype.scaleForWidth=function(t){var e=this.getStageSize(),i=e[0],r=e[1];0!==i&&i!==t.data.header.width&&t.scaleForWidth(i,r)},ge.prototype.parseBackgroundColor=function(t){var e;if("number"==typeof t)e=t;else if("string"==typeof t)e=parseInt(t,16);else{if(!(t instanceof I))return[255,255,255,255];e=t.data.header.backgroundColor,e|=255<<24}return[e>>16&255,e>>8&255,e>>0&255,e>>24&255]},ge.prototype.setBackgroundColor=function(t){var e=this.parseBackgroundColor(t),i=e[0],r=e[1],s=e[2],n=e[3];this.stage.style.backgroundColor="rgba("+i+","+r+","+s+","+n/255+")"},ge.prototype.clearCanvasRect=function(t,e){e.clearRect(0,0,t.width+1,t.height+1),this.quirkyClearRect&&t.width},ge.prototype.setFont=function(t,e){var i,r,s,n;for(t+=",sans-serif",e+=",sans-serif",r=0,s=(n=this.textContexts).length;r<s;r++)(i=n[r]).fontName===t&&(i.fontName=e,i.fontChanged=!0)},ct=ge,ve.prototype.destruct=function(){for(var t,e=this.cache,i=0,r=e.length;i<r;i++)null!=(t=e[i]).mask&&t.mask.parentNode.removeChild(t.mask),t.parentNode.removeChild(t)},ot=ve,xe.prototype.destructor=function(){null!=this.node&&(this.node.style.visibility="hidden",this.context.cache.push(this.node))},xe.prototype.destruct=function(){this.context.factory.destructRenderer(this)},xe.prototype.render=function(t,e,i,r,s){var n,o,a,h,l,c,u;if(this.visible===s){if(!1===s)return}else{if(!1===(this.visible=s))return void(null!=this.node&&(this.node.style.visibility="hidden"));null!=this.node&&(this.node.style.visibility="visible")}null==this.node&&(0<this.context.cache.length?(this.node=this.context.cache.pop(),this.node.style.visibility="visible"):(this.node=this.context.node.cloneNode(!0),this.context.factory.stage.appendChild(this.node))),(h=this.matrix.setWithComparing(t))?(t=this.matrix,o=this.context.fragment,c=this.context.x,u=this.context.y,l=this.context.scale,o.rotated?t=K.rotateMatrix(this.matrixForAtlas,t,l,c,u+this.context.h):1===l&&0===c&&0===u||(t=K.scaleMatrix(this.matrixForAtlas,t,l,c,u))):t=null!=this.matrixForAtlas?this.matrixForAtlas:this.matrix,a=this.context.factory.maskMode,!h&&this.alpha===e.multi.alpha&&this.zIndex===i&&"normal"===a&&this.node.parentNode===this.context.factory.stage||(this.alpha=e.multi.alpha,this.zIndex=i,(n=this.cmd).isBitmap=!0,n.renderer=this,n.matrix=t,n.maskMode=a,this.context.factory.addCommand(i,n))},at=xe,Me.prototype.destruct=function(){},y=Me,be.prototype.destruct=function(){},be.prototype.measureText=function(t){var e=t.length<=1?0:(t.length-1)*this.letterSpacing;return this.canvasContext.measureText(t).width+e},be.prototype.fitText=function(t,e,i,r,s){var n,o,a,h;s<r||(n=(r+s)/2>>0,o=0===i?0:e[i-1],a=t.slice(o,e[n]),(h=this.measureText(a))<=this.maxWidth&&(h>this.lineWidth&&(this.index=n,this.lineWidth=h),this.fitText(t,e,i,1+n,s)),h>=this.lineWidth&&this.fitText(t,e,i,r,n-1))},be.prototype.adjustText=function(t){for(var e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y=[],_=0,g=t.length;_<g;_++){for(u=(n=t[_]).split(" "),n="",d=0,f=u.length;d<f;d++)0<(c=u[d]).length&&(0<n.length&&(n+=" "),n+=c);if(this.measureText(n)>this.maxWidth){for(u=[],o=0,i=p=1,m=n.length;1<=m?p<m:m<p;i=1<=m?++p:--p)(32===(e=n.charCodeAt(i))||128<=e||128<=o)&&u.push(i),o=e;for(u.push(n.length),s=0,r=u.length-1;this.index=null,this.lineWidth=0,this.fitText(n,u,s,s,r),null!==this.index;){if(a=0===s?0:u[s-1],32===n.charCodeAt(a)&&++a,l=u[this.index],h=n.slice(a,l),this.index===r){n=h;break}if(y.push(h),a=l+(32===n.charCodeAt(l)?1:0),h=n.slice(a),this.measureText(h)<=this.maxWidth){n=h;break}s=this.index+1}}y.push(n)}return y},be.prototype.renderLines=function(t,e,i,r,s){for(var n,o,a,h,l,c,u,d,p,f,m,y=u=0,_=e.length;0<=_?u<_:_<u;y=0<=_?++u:--u){if(a=e[y],l=this.offsetX*this.lwf.textScale,0!==this.letterSpacing)switch(this.context.textProperty.align&v.ALIGN_MASK){case v.RIGHT:l-=this.measureText(a);break;case v.CENTER:l-=this.measureText(a)/2}if(c=s+(this.fontHeight+this.leading)*y*96/72,i)if(null!=r&&(t.shadowColor="rgba(0, 0, 0, 0)"),0===this.letterSpacing)t.strokeText(a,l,c);else for(o=d=h=0,f=a.length;0<=f?d<f:f<d;o=0<=f?++d:--d)n=a[o],t.strokeText(n,l+h,c),h+=this.canvasContext.measureText(n).width+this.letterSpacing;if(null!=r&&(t.shadowColor=r),0===this.letterSpacing)t.fillText(a,l,c);else for(o=p=h=0,m=a.length;0<=m?p<m:m<p;o=0<=m?++p:--p)n=a[o],t.fillText(n,l+h,c),h+=this.canvasContext.measureText(n).width+this.letterSpacing}},be.prototype.renderText=function(t){var e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g;switch(this.textRendered=!0,r=this.context,i=this.canvas,s=this.canvasContext,c=this.adjustText(this.str.split("\n")),d=r.textProperty,m=null!=r.strokeColor,null!=r.shadowColor&&(f=r.factory.convertRGB(r.shadowColor)),r.factory.clearCanvasRect(i,s),this.initCanvasContext(s,t),u=1.2*this.fontHeight,d.align&v.VERTICAL_MASK){case v.VERTICAL_BOTTOM:case v.VERTICAL_MIDDLE:for(this.renderLines(s,c,m,"rgba(0, 0, 0, 0)",u),h=s.getImageData(0,0,i.width,i.height),y=i.width,a=i.height,l=n=null,p=0;null==n&&p<a;){for(e=_=0;0<=y?_<y:y<_;e=0<=y?++_:--_)if(0!==h.data[p*y*4+4*e+3]){n=p;break}p++}for(p=a;null==l&&0<p;)for(p--,e=g=0;0<=y?g<y:y<g;e=0<=y?++g:--g)if(0!==h.data[p*y*4+4*e+3]){l=p;break}if(null!=n&&null!=l)switch(o=l-n+1,d.align&v.VERTICAL_MASK){case v.VERTICAL_BOTTOM:u+=a-o-n-this.currentShadowMarginY;break;case v.VERTICAL_MIDDLE:u+=(a-o)/2-n-this.currentShadowMarginY}r.factory.clearCanvasRect(i,s),null!=r.factory.quirkyClearRect&&this.initCanvasContext(s,t)}this.renderLines(s,c,m,f,u)},be.prototype.needsScale=function(){return!0},be.prototype.render=function(t,e,i,r,s){var n,o,a,h,l,c,u,d,p,f;if(this.matrixChanged=this.matrixForCheck.setWithComparing(t),this.matrixChanged){if(t=this.needsScale()?K.scaleMatrix(this.matrix,t,1/this.lwf.textScale,0,0):K.copyMatrix(this.matrix,t),null!=this.context.shadowColor){switch(l=this.context.textProperty,u=this.lwf.textScale,this.currentShadowMarginY=0,l.align&v.VERTICAL_MASK){case v.VERTICAL_BOTTOM:0<l.shadowOffsetY&&(this.currentShadowMarginY=l.shadowOffsetY*u),this.currentShadowMarginY+=l.shadowBlur*u;break;case v.VERTICAL_MIDDLE:break;default:l.shadowOffsetY<0&&(this.currentShadowMarginY=l.shadowOffsetY*u),this.currentShadowMarginY-=l.shadowBlur*u}t.translateY+=t.scaleY*this.currentShadowMarginY}this.context.factory.textInSubpixel||(t.translateX=Math.round(t.translateX),t.translateY=Math.round(t.translateY))}c=this.color.red,h=this.color.green,n=this.color.blue,this.context.factory.convertColor(this.lwf,this.color,this.context.textColor,e),o=!1,c===(e=this.color).red&&h===e.green&&n===e.blue||(o=!0),a=!1,this.context.fontChanged&&(a=!0,this.context.fontChanged=!1),f=!1,null!=(p=this.textObject.parent[this.textObject.name])&&(p=String(p)),null!=p&&p!==this.str&&(f=!0,this.str=p,this.context.factory.recycleTextCanvas||this.initCanvas()),d=!1,this.textScale!==this.lwf.textScale&&(d=!0,this.initCanvas(),this.textScale=this.lwf.textScale),this.changed=!1,(!this.textRendered||o||a||f||d)&&(this.renderText(e),this.changed=!0)},be.prototype.initCanvas=function(){var t,e,i,r,s,n,o,a,h,l=this.lwf.textScale,c=this.context.textProperty;switch(this.leading=c.leading*l,this.fontHeight=c.fontHeight*l,i=c.leftMargin/this.fontHeight,s=c.rightMargin/this.fontHeight,n=r=0,null!=this.context.strokeColor&&(r=n=c.strokeWidth/2*l),null!=this.context.shadowColor&&(r<(o=(c.shadowBlur-c.shadowOffsetX)*l)&&(r=o),n<(o=(c.shadowOffsetX+c.shadowBlur)*l)&&(n=o)),i+=r,s+=n,a=this.context.text,c.align&v.ALIGN_MASK){case v.RIGHT:this.align="right",this.offsetX=a.width-s;break;case v.CENTER:this.align="center",this.offsetX=a.width/2;break;default:this.align="left",this.offsetX=i}t=(h=this.context.factory.resourceCache.createCanvas(this.context.text.width*l,this.context.text.height*l))[0],e=h[1],this.maxWidth=t.width-(i+s),this.initCanvasContext(e),this.canvas=t,this.canvasContext=e,this.letterSpacing=e.measureText("M").width*this.context.letterSpacing},be.prototype.initCanvasContext=function(t,e){var i,r,s;t.font=this.fontHeight+"px "+this.context.fontName,t.textAlign=this.align,t.textBaseline="bottom",null!=e&&(r=(i=this.context).textProperty,s=this.lwf.textScale,t.fillStyle="rgb("+e.red+","+e.green+","+e.blue+")",t.lineCap="round",t.lineJoin="round",null!=i.strokeColor&&(t.strokeStyle=i.factory.convertRGB(i.strokeColor),t.lineWidth=r.strokeWidth*s),null!=i.shadowColor&&(t.shadowOffsetX=r.shadowOffsetX*s,t.shadowOffsetY=r.shadowOffsetY*s,t.shadowBlur=r.shadowBlur*s))},g=be,t(Ce,y),dt=Ce,t(Ie,g),Ie.prototype.destructor=function(){null!=this.node&&this.node.parentNode.removeChild(this.node)},Ie.prototype.destruct=function(){this.context.factory.destructRenderer(this)},Ie.prototype.render=function(t,e,i,r,s){var n,o,a;if(this.visible===s){if(!1===s)return}else{if(!1===(this.visible=s))return void(null!=this.node&&(this.node.style.visibility="hidden"));null!=this.node&&(this.node.style.visibility="visible")}Ie.__super__.render.call(this,t,e,i,r,s),a=!1,null==this.node&&(this.node=document.createElement("div"),this.node.style.width=this.canvas.width+"px",this.node.style.height=this.canvas.height+"px",this.node.style.display="block",this.node.style.pointerEvents="none",this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.node.style.visibility="visible",this.context.factory.stage.appendChild(this.node),a=!0),void 0!==document.getCSSCanvasContext&&this.currentCanvas!==this.canvas?(this.node.style.background="-webkit-canvas("+this.canvas.name+") transparent",this.currentCanvas=this.canvas):!this.changed&&this.currentCanvas===this.canvas||(this.node.style.background="url("+this.canvas.toDataURL("image/png")+") transparent",this.currentCanvas=this.canvas),o=this.context.factory.maskMode,(a||this.matrixChanged||this.alpha!==e.multi.alpha||this.zIndex!==i||"normal"!==o||this.node.parentNode!==this.context.factory.stage)&&(this.alpha=e.multi.alpha,this.zIndex=i,(n=this.cmd).isBitmap=!1,n.renderer=this,n.matrix=this.matrix,n.maskMode=o,this.context.factory.addCommand(i,n))},pt=Ie,Ee.prototype.destructor=function(){this.appended&&this.factory.stage.parentNode.removeChild(this.node)},Ee.prototype.destruct=function(){this.factory.resourceCache.constructor===ut?this.factory.destructRenderer(this):this.destructor()},Ee.prototype.update=function(t,e){},Ee.prototype.render=function(t,e,i,r,s){var n,o,a,h;if(this.visible===s){if(!1===s)return}else{if(!1===(this.visible=s))return void(this.node.style.visibility="hidden");this.node.style.visibility="visible"}!this.matrix.setWithComparing(t)&&this.appended&&this.alpha===e.multi.alpha&&this.zIndex===i+r||(this.appended||(this.appended=!0,this.node.style.position="absolute",this.node.style.webkitTransformOrigin="0px 0px",this.node.style.display="block",this.factory.stage.parentNode.appendChild(this.node)),this.alpha=e.multi.alpha,this.zIndex=i+r,(h=this.node.style).zIndex=this.zIndex,h.opacity=this.alpha,h.webkitTransform="none",a=this.factory.stage.getBoundingClientRect(),o=this.node.getBoundingClientRect(),n=this.factory.resourceCache.constructor===ut?1:window.devicePixelRatio,(t=this.matrixForDom).scaleX=1/n,t.scaleY=1/n,t.translateX=a.left-o.left,t.translateY=a.top-o.top,t=K.calcMatrix(this.matrixForRender,this.matrixForDom,this.matrix),this.use3D?h.webkitTransform="matrix3d("+t.scaleX+","+t.skew1+",0,0,"+t.skew0+","+t.scaleY+",0,0,0,0,1,0,"+t.translateX+","+t.translateY+",0,1)":h.webkitTransform="matrix("+t.scaleX+","+t.skew1+","+t.skew0+","+t.scaleY+","+t.translateX+","+t.translateY+")")},ht=Ee,we.load=function(t){var e,i,r,s,n,o,a;if(null==t||"string"!=typeof t)return null;if(0==(255&t.charCodeAt(tt.Constant.OPTION_OFFSET)&tt.Constant.OPTION_COMPRESSED))return k.load(t);if("undefined"!=typeof Uint8Array){for(e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=s=0,o=t.length;0<=o?s<o:o<s;r=0<=o?++s:--s)i[r]=255&t.charCodeAt(r);return this.loadArrayBuffer(e)}for(e=new Array(t.length),r=n=0,a=t.length;0<=a?n<a:a<n;r=0<=a?++n:--n)e[r]=255&t.charCodeAt(r);return this.loadArray(e)},we.loadArray=function(t){var e,i,r;if(null==t)return null;if(0==(t[tt.Constant.OPTION_OFFSET]&tt.Constant.OPTION_COMPRESSED))return k.loadArray(t);r=t.slice(0,tt.Constant.HEADER_SIZE),e=t.slice(tt.Constant.HEADER_SIZE);try{i=global.LWF.LZMA.decompressFile(e)}catch(t){return null}return t=r.concat(i),k.loadArray(t)},we.loadArrayBuffer=function(t){var e,i,r;if(null==t)return null;if(0==(new Uint8Array(t,tt.Constant.OPTION_OFFSET,1)[0]&tt.Constant.OPTION_COMPRESSED))return k.loadArrayBuffer(t);r=new Uint8Array(t.slice(0,tt.Constant.HEADER_SIZE)),e=new Uint8Array(t.slice(tt.Constant.HEADER_SIZE));try{i=global.LWF.LZMA.decompressFile(e),i=new Uint8Array(i)}catch(t){return null}return(t=new Uint8Array(r.length+i.length)).set(r,0),t.set(i,tt.Constant.HEADER_SIZE),k.loadArrayBuffer(t.buffer)},lt=we,yt=null,Fe.get=function(){return null!=yt?yt:yt=new this},Fe.prototype.getRendererName=function(){return"WebkitCSS"},Fe.prototype.clear=function(){var t,e,i,r=this.cache;for(t in r)for(e in i=r[t].instances)i[e].destroy();return this.cache={}},Fe.prototype.getTextureURL=function(t,e,i){var r,s,n,o,a,h,l,c=null!=(o=null!=(a=t.imagePrefix)?a:t.prefix)?o:"",u=null!=(h=t.imageSuffix)?h:"",d=null!=(l=t.imageQueryString)?l:"";return 0<d.length&&(d="?"+d),r=t.imageMap,n=i.filename,"function"==typeof r?null!=(s=r.call(t,n))&&(n=s):"object"==typeof r&&null!=(s=r[n])&&(n=s),n.match(/^\//)||n.match(/^https?:\/\//)||(n=c+n),n=n.replace(/(\.gif|\.png|\.jpg)/i,u+"$1"+d)},Fe.prototype.checkTextures=function(t,e){var i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L,k,T,B;for(t._alphaMap={},t._colorMap={},t._textures=[],p=new RegExp("_atlas_(.*)_info_([0-9])_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)_([0-9]+)","i"),y=new RegExp("(.*)_rgb_([0-9a-f]{6})(.*)$","i"),_=new RegExp("(.*)_rgb_([0-9]*),([0-9]*),([0-9]*)(.*)$","i"),g=new RegExp("(.*)_rgba_([0-9a-f]{8})(.*)$","i"),v=new RegExp("(.*)_rgba_([0-9]*),([0-9]*),([0-9]*),([0-9]*)(.*)$","i"),f=new RegExp("(.*)_add_([0-9a-f]{6})(.*)$","i"),m=new RegExp("(.*)_add_([0-9]*),([0-9]*),([0-9]*)(.*)$","i"),k=0,T=(B=e.textures).length;k<T;k++)(c=null)!=(h=(b=B[k]).filename.match(y))?(c=h[1]+h[3],s="rgb",n=h[2]):null!=(h=b.filename.match(_))?(c=h[1]+h[5],s="rgb",d=parseInt(h[2],10).toString(16),o=parseInt(h[3],10).toString(16),r=parseInt(h[4],10).toString(16),n=(1===d.length?"0":"")+d+(1===o.length?"0":"")+o+(1===r.length?"0":"")+r):null!=(h=b.filename.match(g))?(c=h[1]+h[3],s="rgba",n=h[2]):null!=(h=b.filename.match(v))?(c=h[1]+h[6],s="rgba",d=parseInt(h[2],10).toString(16),o=parseInt(h[3],10).toString(16),r=parseInt(h[4],10).toString(16),i=parseInt(h[5],10).toString(16),n=(1===d.length?"0":"")+d+(1===o.length?"0":"")+o+(1===r.length?"0":"")+r+(1===i.length?"0":"")+i):null!=(h=b.filename.match(f))?(c=h[1]+h[3],s="add",n=h[2]):null!=(h=b.filename.match(m))&&(c=h[1]+h[5],s="add",d=parseInt(h[2],10).toString(16),o=parseInt(h[3],10).toString(16),r=parseInt(h[4],10).toString(16),n=(1===d.length?"0":"")+d+(1===o.length?"0":"")+o+(1===r.length?"0":"")+r),null==c?(t._textures.push(b),null!=(h=b.filename.match(/^(.*)_withalpha(.*\.)jpg(.*)$/i))&&(u=h[1]+"_alpha"+h[2]+"png"+h[3],M=new tt.TextureReplacement(u),t._textures.push(M),t._alphaMap[b.filename]=[b,M],t._alphaMap[M.filename]=[b,M])):(F=null!=(l=b.filename.match(p))?(c=l[1],x="1"===l[2],C=parseInt(l[3],10),I=parseInt(l[4],10),E=parseInt(l[5],10),a=parseInt(l[6],10),w=parseInt(l[7],10),parseInt(l[8],10)):(x=!1,a=E=null,w=I=C=0),null==(L=t._colorMap)[c]&&(L[c]=[]),t._colorMap[c].push({filename:b.filename,colorOp:s,colorValue:n,rotated:x,u:C,v:I,w:E,h:a,x:w,y:F}))},Fe.prototype.onloaddata=function(t,e,i){var r,s,n;if(null==e||!e.check())return t.error.push({url:i,reason:"dataError"}),void t.onload.call(t,null);t.name=e.name(),this.checkTextures(t,e),r=e.useScript&&null==(null!=(s=global.LWF)&&null!=(n=s.Script)?n[e.name()]:void 0),this.cache[t.lwfUrl].data=e,t.total=t._textures.length+1,r&&t.total++,t.loadedCount=1,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),r?this.loadJS(t,e):this.loadImages(t,e)},Fe.prototype.loadLWF=function(t){var e,i,r=t.lwf;if(r.match(/^\//)||(r=(null!=(i=t.prefix)?i:"")+r),t.lwfUrl=r,t.error=[],null!=this.cache[r]&&null!=(e=this.cache[r].data))return t.name=e.name(),this.checkTextures(t,e),t.total=t._textures.length+1,t.loadedCount=1,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),void this.loadImages(t,e);this.cache[r]={},this.loadLWFData(t,r)},Fe.prototype.dispatchOnloaddata=function(r,s,t,e,n,o){var i,a,h,l,c,u,d,p;if(t){for(c=null,l=document.getElementsByTagName("script"),h=new RegExp("(^|.*/lwf.js)$","i"),i=u=0,d=l.length;0<=d?u<d:d<u;i=0<=d?++u:--u)if(""!==l[i].src&&null!=(a=l[i].src.split("?")[0].match(h))){c=a[1];break}null!=c&&(p=this,function(e){var i=new Worker(e);i.onmessage=function(t){return o=new $(t.data),i=i.onmessage=i.onerror=null,p.onloaddata(r,o,s)},i.onerror=function(t){return r.error.push({url:e,reason:"error"}),i=i.onmessage=i.onerror=null,r.onload.call(r,null)},n&&"base64"!==o.type?i.webkitPostMessage(o.data):i.postMessage(o.data)}(c))}if(null==c){if("base64"===o.type){try{o=global.LWF.Base64.atobArray(o.data),o=global.LWF.LZMA.decompressFile(o)}catch(t){o=null}o=lt.loadArray(o)}else o=e?lt.loadArrayBuffer(o.data):lt.load(o.data);this.onloaddata(r,o,s)}},Fe.prototype.loadLWFData=function(r,s){var n,i,t,e,o,a,h,l,c,u,d,p,f,m,y=r.onload,_=!1,g=!1;if("undefined"==typeof Worker||null!=r.worker&&!r.worker||(_=!0,void 0!==Worker.prototype.webkitPostMessage&&(g=!0)),null!=(e=s.match(/([^\/]+)\.lwf\.js/i)))return o=e[1].toLowerCase(),null!=(h=null!=(d=global.LWF)&&null!=(p=d.DataScript)?p[o]:void 0)?(n={type:"base64",data:h},void this.dispatchOnloaddata(r,s,_,l,g,n)):(i=document.getElementsByTagName("head")[0],(a=document.createElement("script")).type="text/javascript",a.charset="UTF-8",a.onabort=function(){return r.error.push({url:s,reason:"abort"}),i.removeChild(a),a=a.onload=a.onabort=a.onerror=null,y.call(r,null)},a.onerror=function(){return r.error.push({url:s,reason:"error"}),i.removeChild(a),a=a.onload=a.onabort=a.onerror=null,y.call(r,null)},a.onload=(f=this,function(){var t,e;return h=null!=(t=global.LWF)&&null!=(e=t.DataScript)?e[o]:void 0,i.removeChild(a),(a=a.onload=a.onabort=a.onerror=null)!=h?(n={type:"base64",data:h},f.dispatchOnloaddata(r,s,_,l,g,n)):(r.error.push({url:s,reason:"error"}),y.call(r,null))}),a.src=s,i.appendChild(a),t=r.lwfUrl,null==(u=this.cache[t]).scripts&&(u.scripts=[]),void this.cache[t].scripts.push(a));(c=new XMLHttpRequest).open("GET",s,!0),"string"!=typeof c.responseType||"undefined"==typeof Uint8Array||"undefined"==typeof Int32Array||"undefined"==typeof Float32Array||_&&!g?(l=!1,c.overrideMimeType("text/plain; charset=x-user-defined")):(l=!0,c.responseType="arraybuffer"),c.onabort=function(){return r.error.push({url:s,reason:"abort"}),c=c.onabort=c.onerror=c.onreadystatechange=null,y.call(r,null)},c.onerror=function(){return r.error.push({url:s,reason:"error"}),c=c.onabort=c.onerror=c.onreadystatechange=null,y.call(r,null)},c.onreadystatechange=(m=this,function(){var t,e,i;if(4===c.readyState){if(0===c.status)"http:"!==(e=null!=(t=s.match(/^([a-zA-Z][a-zA-Z0-9\+\-\.]*\:)./i))?t[1]:"undefined"!=typeof global&&null!==global&&null!=(i=global.location)?i.protocol:void 0)&&"https:"!==e||(r.error.push({url:s,reason:"networkError"}),c=c.onabort=c.onerror=c.onreadystatechange=null,y.call(r,null));else if(!(200<=c.status&&c.status<300))return r.error.push({url:s,reason:"error"}),c=c.onabort=c.onerror=c.onreadystatechange=null,void y.call(r,null);return n=l?{type:"arraybuffer",data:c.response}:{type:"text",data:c.responseText},m.dispatchOnloaddata(r,s,_,l,g,n),c=c.onabort=c.onerror=c.onreadystatechange=null}}),c.send(null)},Fe.prototype.loadJS=function(t,e){var i,r,s,n,o,a,h,l,c,u=t.lwfUrl,d=null!=(o=t.js)?o:t.lwf.replace(/\.lwf(\.js)?/i,".js");d.match(/^\//)||(d=(null!=(a=t.prefix)?a:"")+d),i=t.onload,r=t.onprogress,(s=document.createElement("script")).type="text/javascript",s.charset="UTF-8",s.onabort=(h=this,function(){return delete h.cache[u],t.error.push({url:d,reason:"abort"}),s=s.onload=s.onabort=s.onerror=null,i.call(t,null)}),s.onerror=(l=this,function(){return delete l.cache[u],t.error.push({url:d,reason:"error"}),s=s.onload=s.onabort=s.onerror=null,i.call(t,null)}),s.onload=(c=this,function(){return t.loadedCount++,null!=r&&r.call(t,t.loadedCount,t.total),s=s.onload=s.onabort=s.onerror=null,c.loadImages(t,e)}),s.src=d,document.getElementsByTagName("head")[0].appendChild(s),null==(n=this.cache[u]).scripts&&(n.scripts=[]),this.cache[u].scripts.push(s)},Fe.prototype.loadImagesCallback=function(t,e,i){t.loadedCount++,null!=t.onprogress&&t.onprogress.call(t,t.loadedCount,t.total),t.loadedCount===t.total&&(delete t._alphaMap,delete t._colorMap,delete t._textures,0<t.error.length?(delete this.cache[t.lwf],t.onload.call(t,null)):this.newLWF(t,e,i))},Fe.prototype.drawImage=function(t,e,i,r,s,n,o){var a;i.rotated?(a=new V,K.rotateMatrix(a,new V,1,0,n),t.setTransform(a.scaleX,a.skew1,a.skew0,a.scaleY,a.translateX,a.translateY)):t.setTransform(1,0,0,1,0,0),t.drawImage(e,r,s,n,o,0,0,n,o),t.setTransform(1,0,0,1,0,0)},Fe.prototype.getCanvasName=function(){return"__canvas__"+ ++this.canvasIndex},Fe.prototype.createCanvas=function(t,e){var i,r,s=this.getCanvasName();return void 0!==document.getCSSCanvasContext&&this.constructor===Fe?i=(r=document.getCSSCanvasContext("2d",s,t,e)).canvas:((i=document.createElement("canvas")).width=t,i.height=e,r=i.getContext("2d")),i.name=s,[i,r]},Fe.prototype.generateImages=function(t,e,i,r){var s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F=t._colorMap[i.filename];if(null!=F)for(y=r.width/i.width,_=r.height/i.height,b=0,C=F.length;b<C;b++){switch(f=F[b],g=Math.round(f.u*y),v=Math.round(f.v*_),M=Math.round((null!=(I=f.w)?I:i.width)*y),u=Math.round((null!=(E=f.h)?E:i.height)*_),d=f.rotated?(p=u,M):(p=M,u),o=(w=this.createCanvas(M,u))[0],h=w[1],f.colorOp){case"rgb":h.fillStyle="#"+f.colorValue,h.fillRect(0,0,M,u),h.globalCompositeOperation="destination-in",this.drawImage(h,r,f,g,v,p,d);break;case"rgba":this.drawImage(h,r,f,g,v,p,d),h.globalCompositeOperation="source-atop",x=f.colorValue,m=parseInt(x.substr(0,2),16),c=parseInt(x.substr(2,2),16),n=parseInt(x.substr(4,2),16),s=parseInt(x.substr(6,2),16)/255,h.fillStyle="rgba("+m+", "+c+", "+n+", "+s+")",h.fillRect(0,0,M,u);break;case"add":(a=document.createElement("canvas")).width=M,a.height=u,(l=a.getContext("2d")).fillStyle="#"+f.colorValue,l.fillRect(0,0,M,u),l.globalCompositeOperation="destination-in",this.drawImage(l,r,f,g,v,p,d),this.drawImage(h,r,f,g,v,p,d),h.globalCompositeOperation="lighter",h.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height)}h.globalCompositeOperation="source-over",e[f.filename]=o}},Fe.prototype.loadImages=function(c,u){var t,e,i,r,d={};if(0!==u.textures.length){var p,s=c._textures;for(p=this,e=function(h,t){var l=new Image;return l.onabort=function(){return c.error.push({url:t,reason:"abort"}),l=l.onload=l.onabort=l.onerror=null,p.loadImagesCallback(c,d,u)},l.onerror=function(){return c.error.push({url:t,reason:"error"}),l=l.onload=l.onabort=l.onerror=null,p.loadImagesCallback(c,d,u)},l.onload=function(){var t,e,i,r,s,n,o,a;return d[h.filename]=l,null!=(s=c._alphaMap[h.filename])?(n=s[0],t=s[1],o=d[n.filename],e=d[t.filename],null!=o&&null!=e&&(i=(a=p.createCanvas(o.width,o.height))[0],(r=a[1]).drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0,e.width,e.height,0,0,o.width,o.height),r.globalCompositeOperation="source-over",delete d[n.filename],delete d[t.filename],d[n.filename]=i,p.generateImages(c,d,n,i))):p.generateImages(c,d,h,l),l=l.onload=l.onabort=l.onerror=null,p.loadImagesCallback(c,d,u)},l.src=t},i=0,r=s.length;i<r;i++)e(t=s[i],this.getTextureURL(c,u,t))}else this.newLWF(c,d,u)},Fe.prototype.newFactory=function(t,e,i){var r,s,n,o;return new ct(i,this,e,t.stage,null!=(r=t.textInSubpixel)&&r,null==(s=t.use3D)||s,null==(n=t.recycleTextCanvas)||n,null!=(o=t.quirkyClearRect)&&o)},Fe.prototype.onloadLWF=function(t,e){var i=e.rendererFactory;null!=t.setBackgroundColor?i.setBackgroundColor(t.setBackgroundColor):t.useBackgroundColor&&i.setBackgroundColor(e),t.fitForHeight?i.fitForHeight(e):t.fitForWidth&&i.fitForWidth(e),t.onload.call(t,e)},Fe.prototype.newLWF=function(t,e,i){var r,s,n,o,a,h=t.lwfUrl,l=this.cache[h],c=this.newFactory(t,e,i);i.useScript&&(r=null!=(o=global.LWF)&&null!=(a=o.Script)?a[i.name()]:void 0),s=new I(i,c,r,t.privateData),null!=t.active&&(s.active=t.active),s.url=t.lwfUrl,s.lwfInstanceId=++this.lwfInstanceIndex,null==l.instances&&(l.instances={}),l.instances[s.lwfInstanceId]=s,null!=(n=t.parentLWF)&&(n.loadedLWFs[s.lwfInstanceId]=s),null!=t.preferredFrameRate&&(null!=t.execLimit?s.setPreferredFrameRate(t.preferredFrameRate,t.execLimit):s.setPreferredFrameRate(t.preferredFrameRate)),this.onloadLWF(t,s)},Fe.prototype.unloadLWF=function(t){var e,i,r,s,n,o,a,h,l=this.cache[t.url];if(null!=l){for(r in t.lwfInstanceId&&delete l.instances[t.lwfInstanceId],e=!0,a=l.instances){a[r],e=!1;break}if(e){try{if(null!=l.scripts)for(i=document.getElementsByTagName("head")[0],h=l.scripts,n=0,o=h.length;n<o;n++)s=h[n],i.removeChild(s)}catch(t){}delete this.cache[t.url]}}},Fe.prototype.loadLWFs=function(t,i){for(var r,s=t.length,n=0,o=null,e=function(e){return r.onload=function(t){if(null!=e&&e(t),0<r.error.length&&(null==o&&(o=[]),o=o.concat(r.error)),s===++n)return i(o)}},a=[],h=0,l=t.length;h<l;h++)e((r=t[h]).onload),a.push(this.loadLWF(r));return a},Fe.prototype.getCache=function(){return this.cache},Fe.prototype.setParticleConstructor=function(t){this.particleConstructor=t},Fe.prototype.setDOMElementConstructor=function(t){this.domElementConstructor=t},ut=Fe,"undefined"!=typeof global&&(global.LWF.WebkitCSSRendererFactory=ct,global.LWF.WebkitCSSResourceCache=ut,global.LWF.useWebkitCSSRenderer=function(){return global.LWF.ResourceCache=ut},global.LWF.LWF.useWebkitCSSRenderer=global.LWF.useWebkitCSSRenderer),ct.prototype.convertColor,ct.prototype.fitForHeight,ct.prototype.fitForWidth,ct.prototype.scaleForHeight,ct.prototype.scaleForWidth,ct.prototype.setBackgroundColor,ut.prototype.clear,ut.prototype.getCache,ut.prototype.getRendererName,ut.prototype.loadLWF,ut.prototype.loadLWFs,ut.prototype.unloadLWF,ut.prototype.setParticleConstructor,ut.prototype.setDOMElementConstructor,"undefined"!=typeof window&&null!==window||"undefined"==typeof self||null===self||(self.onmessage=function(t){var e;if(void 0!==self.webkitPostMessage&&"object"==typeof t.data)e=lt.loadArrayBuffer(t.data),self.webkitPostMessage(e);else{if("L"===(e=t.data)[0]&&"W"===e[1]&&"F"===e[2])e=lt.load(e);else{try{e=global.LWF.Base64.atobArray(e),e=global.LWF.LZMA.decompressFile(e)}catch(t){e=null}e=lt.loadArray(e)}void 0!==self.webkitPostMessage?self.webkitPostMessage(e):self.postMessage(e)}return self.close()}),i=function(){this.renderCount=0,this.renderingIndex=0,this.alpha=0,this.blendMode=0,this.maskMode=0,this.matrix=null,this.image=null,this.pattern=null,this.u=0,this.v=0,this.w=0,this.h=0},t(Le,ct),Le.prototype.destruct=function(){for(var t,e,i,r,s,n,o=this.bitmapContexts,a=0,h=o.length;a<h;a++)o[a].destruct();for(t=0,i=(s=this.bitmapExContexts).length;t<i;t++)s[t].destruct();for(e=0,r=(n=this.textContexts).length;e<r;e++)n[e].destruct()},Le.prototype.resetGlobalCompositeOperation=function(t){t.globalCompositeOperation="source-over",this.renderBlendMode="normal"},Le.prototype.setGlobalCompositeOperation=function(t,e){if(this.renderBlendMode!==e)switch(this.renderBlendMode=e,this.renderBlendMode){case"add":t.globalCompositeOperation="lighter";break;case"normal":t.globalCompositeOperation="source-over"}},Le.prototype.renderMask=function(t){var e=this.maskCanvas.getContext("2d");e.globalCompositeOperation=this.maskComposition,this.renderBlendMode=null,e.setTransform(1,0,0,1,0,0),e.drawImage(this.layerCanvas,0,0,this.layerCanvas.width,this.layerCanvas.height,0,0,this.layerCanvas.width,this.layerCanvas.height),e=this.stageContext,this.setGlobalCompositeOperation(e,t),e.setTransform(1,0,0,1,0,0),e.drawImage(this.maskCanvas,0,0,this.maskCanvas.width,this.maskCanvas.height,0,0,this.maskCanvas.width,this.maskCanvas.height)},Le.prototype.render=function(t,e){var i,r,s,n,o,a;if(this.renderMaskMode!==e.maskMode){switch(e.maskMode){case"erase":case"mask":case"alpha":"layer"===this.renderMaskMode&&this.renderMasked&&this.renderMask(e.blendMode),this.renderMasked=!0,this.maskComposition="erase"===e.maskMode?"source-out":"source-in",i=null==this.maskCanvas&&(this.maskCanvas=document.createElement("canvas"),this.maskCanvas.width=this.stage.width,this.maskCanvas.height=this.stage.height,!0),t=this.maskCanvas.getContext("2d"),this.resetGlobalCompositeOperation(t),i||(t.setTransform(1,0,0,1,0,0),this.clearCanvasRect(this.stage,t));break;case"layer":this.renderMasked?(i=null==this.layerCanvas&&(this.layerCanvas=document.createElement("canvas"),this.layerCanvas.width=this.stage.width,this.layerCanvas.height=this.stage.height,!0),t=this.layerCanvas.getContext("2d"),this.resetGlobalCompositeOperation(t),i||(t.setTransform(1,0,0,1,0,0),this.clearCanvasRect(this.stage,t))):(t=this.stageContext,this.resetGlobalCompositeOperation(t));break;case"normal":t=this.stageContext,this.resetGlobalCompositeOperation(t),"layer"===this.renderMaskMode&&this.renderMasked&&this.renderMask(this.renderBlendMode)}this.renderMaskMode=e.maskMode}return this.setGlobalCompositeOperation(t,e.blendMode),1!==e.alpha&&(t.globalAlpha=e.alpha),s=e.matrix,t.setTransform(s.scaleX,s.skew1,s.skew0,s.scaleY,s.translateX,s.translateY),n=e.u,o=e.v,a=e.w,r=e.h,null!=e.pattern&&(a>e.image.width||r>e.image.height)?(t.translate(-n,-o),t.rect(n,o,a,r),t.fillStyle=e.pattern,t.fill()):t.drawImage(e.image,n,o,a,r,0,0,a,r),1!==e.alpha&&(t.globalAlpha=1),t},Le.prototype.endRender=function(t){var e,i,r,s,n,o,a,h,l,c=this.stageContext;if(null==t.parent){for(this.needsClear&&(c.setTransform(1,0,0,1,0,0),null!=this.clearColor?("a"===this.clearColor[3]&&this.clearCanvasRect(this.stage,c),c.fillStyle=this.clearColor,c.fillRect(0,0,this.stage.width,this.stage.height)):this.clearCanvasRect(this.stage,c)),c.globalAlpha=1,this.resetGlobalCompositeOperation(c),this.renderMaskMode="normal",this.renderMasked=!1,r=t.renderCount,i=o=0,h=this.commands.length;0<=h?o<h:h<o;i=0<=h?++o:--o)if(null!=(e=this.commands[i])&&e.renderingIndex===i&&e.renderCount===r){if(null!=e.subCommands)for(n=a=0,l=e.subCommands.length;0<=l?a<l:l<a;n=0<=l?++a:--a)null!=(s=e.subCommands[n])&&s.renderingIndex===n&&s.renderCount===r&&(c=this.render(c,s));c=this.render(c,e)}"layer"===this.renderMaskMode&&this.renderMasked&&this.renderMask(this.renderBlendMode),this.initCommands()}else this.addCommandToParent(t)},Le.prototype.setBlendMode=function(t){this.blendMode=t},Le.prototype.setMaskMode=function(t){this.maskMode=t},Le.prototype.constructBitmap=function(t,e,i){var r=this.bitmapContexts[e];if(r)return new o(r)},Le.prototype.constructBitmapEx=function(t,e,i){var r=this.bitmapExContexts[e];if(r)return new o(r)},Le.prototype.constructText=function(t,e,i){var r=this.textContexts[e];if(r)return new h(t,r,i)},Le.prototype.constructParticle=function(t,e,i){var r=this.resourceCache.particleConstructor,s=t.data.particleDatas[i.particleDataId];if(null!=r)return r(t,t.data.strings[s.stringId])},Le.prototype.getStageSize=function(){return[this.stage.width,this.stage.height]},Le.prototype.setBackgroundColor=function(t){var e=this.parseBackgroundColor(t),i=e[0],r=e[1],s=e[2],n=e[3];this.clearColor="rgba("+i+","+r+","+s+","+n/255+")"},a=Le,ke.prototype.destruct=function(){},x=ke,Te.prototype.destruct=function(){},Te.prototype.render=function(t,e,i,r,s){var n,o,a,h,l,c;s&&0!==e.multi.alpha&&(this.matrix.setWithComparing(t)?(t=this.matrix,a=this.context.fragment,l=this.context.x,c=this.context.y,h=this.context.scale,a.rotated?t=K.rotateMatrix(this.matrixForAtlas,t,h,l,c+this.context.imageHeight):1===h&&0===l&&0===c||(t=K.scaleMatrix(this.matrixForAtlas,t,h,l,c))):null!=this.matrixForAtlas&&(t=this.matrixForAtlas),this.alpha=e.multi.alpha,o=this.context.factory.lwf.getRendererFactory(),a=this.context.fragment,(n=this.cmd).alpha=this.alpha,n.blendMode=o.blendMode,n.maskMode=o.maskMode,n.matrix=t,n.image=this.context.image,n.pattern=this.context.pattern,n.u=this.context.u,n.v=this.context.v,n.w=this.context.w,n.h=this.context.h,this.context.factory.addCommand(i,n))},o=Te,t(Be,y),M=Be,t(Se,g),Se.prototype.render=function(t,e,i,r,s){var n,o;s&&0!==e.multi.alpha&&(Se.__super__.render.call(this,t,e,i,r,s),o=this.context.factory.lwf.getRendererFactory(),(n=this.cmd).alpha=e.multi.alpha,n.blendMode=o.blendMode,n.maskMode=o.maskMode,n.matrix=this.matrix,n.image=this.canvas,n.pattern=null,n.u=0,n.v=0,n.w=this.canvas.width,n.h=this.canvas.height,this.context.factory.addCommand(i,n))},h=Se,t(Ae,ut),Ae.prototype.getRendererName=function(){return"Canvas"},Ae.prototype.newFactory=function(t,e,i){var r,s,n;return new a(i,this,e,t.stage,null!=(r=t.textInSubpixel)&&r,null==(s=t.needsClear)||s,null!=(n=t.quirkyClearRect)&&n)},Ae.prototype.generateImages=function(t,e,i,r){var s,n,o,a;null!=i.filename.match(/_withpadding/)&&(a=r.width+2,o=r.height+2,(s=document.createElement("canvas")).width=a,s.height=o,s.name=this.getCanvasName(),n=s.getContext("2d"),s.withPadding=!0,n.drawImage(r,0,0,r.width,r.height,1,1,r.width,r.height),e[i.filename]=s),Ae.__super__.generateImages.call(this,t,e,i,r)},e=Ae,"undefined"!=typeof global&&(global.LWF.CanvasRendererFactory=a,global.LWF.CanvasResourceCache=e,global.LWF.useCanvasRenderer=function(){return global.LWF.ResourceCache=e},global.LWF.LWF.useCanvasRenderer=global.LWF.useCanvasRenderer),a.prototype.convertColor,a.prototype.fitForHeight,a.prototype.fitForWidth,a.prototype.scaleForHeight,a.prototype.scaleForWidth,a.prototype.setBackgroundColor,e.prototype.clear,e.prototype.getCache,e.prototype.getRendererName,e.prototype.loadLWF,e.prototype.loadLWFs,e.prototype.unloadLWF,e.prototype.setParticleConstructor,e.prototype.setDOMElementConstructor,H={simple:{attributes:5,aTextureCoordSize:3,vertex:"\nattribute vec2 aVertexPosition;\nattribute vec3 aTextureCoord;\nuniform mat4 uPMatrix;\nuniform mat4 uMatrix;\nvarying vec3 vTextureCoord;\nvoid main() {\n  gl_Position = uPMatrix * uMatrix * vec4(aVertexPosition, 0, 1);\n  vTextureCoord = aTextureCoord;\n}\n",fragment:"\nprecision mediump float;\nvarying vec3 vTextureCoord;\nuniform sampler2D uTexture;\nvoid main() {\n  gl_FragColor = vec4(1, 1, 1, vTextureCoord.z) *\n    texture2D(uTexture, vTextureCoord.xy);\n}\n"},vertexColor:{attributes:8,aTextureCoordSize:2,vertex:"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat4 uPMatrix;\nuniform mat4 uMatrix;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main() {\n  gl_Position = uPMatrix * uMatrix * vec4(aVertexPosition, 0, 1);\n  vTextureCoord = aTextureCoord;\n  vColor = aColor;\n}\n",fragment:"\nprecision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\nvoid main() {\n  gl_FragColor = vColor * texture2D(uTexture, vTextureCoord);\n}\n"},additionalColor:{attributes:12,aTextureCoordSize:2,vertex:"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec4 aAdditionalColor;\nuniform mat4 uPMatrix;\nuniform mat4 uMatrix;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec4 vAdditionalColor;\nvoid main() {\n  gl_Position = uPMatrix * uMatrix * vec4(aVertexPosition, 0, 1);\n  vTextureCoord = aTextureCoord;\n  vColor = aColor;\n  vAdditionalColor = aAdditionalColor;\n}\n",fragment:"\nprecision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec4 vAdditionalColor;\nuniform sampler2D uTexture;\nvoid main() {\n  gl_FragColor = vColor *\n    texture2D(uTexture, vTextureCoord) + vAdditionalColor;\n}\n"}},Z=function(t,e,i){this.renderCount=0,this.renderingIndex=0,this.context=t,this.texture=e,this.matrix=i,this.colorTransform=null,this.blendMode=0,this.maskMode=0},J=function(){this.refCount=1,this.glContext=null,this.textures={},this.vertexBuffer=null,this.indexBuffer=null,this.shaders=null},Pe.prototype.loadShader=function(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),r},Pe.prototype.use=function(t,e){var i;return t.useProgram(this.shaderProgram),this.setMatrix(t,e),i=4*this.attributes,t.vertexAttribPointer(this.aVertexPosition,2,t.FLOAT,!1,i,0),t.enableVertexAttribArray(this.aVertexPosition),t.vertexAttribPointer(this.aTextureCoord,this.aTextureCoordSize,t.FLOAT,!1,i,8),t.enableVertexAttribArray(this.aTextureCoord),this.isVertexColor?(t.vertexAttribPointer(this.aColor,4,t.FLOAT,!1,i,16),t.enableVertexAttribArray(this.aColor)):this.isAdditionalColor&&(t.vertexAttribPointer(this.aColor,4,t.FLOAT,!1,i,16),t.enableVertexAttribArray(this.aColor),t.vertexAttribPointer(this.aAdditionalColor,4,t.FLOAT,!1,i,32),t.enableVertexAttribArray(this.aAdditionalColor)),this},Pe.prototype.setMatrix=function(t,e){t.uniformMatrix4fv(this.uPMatrix,!1,e)},Pe.prototype.disable=function(t){t.disableVertexAttribArray(this.aVertexPosition),t.disableVertexAttribArray(this.aTextureCoord),this.isVertexColor?t.disableVertexAttribArray(this.aColor):this.isAdditionalColor&&(t.disableVertexAttribArray(this.aColor),t.disableVertexAttribArray(this.aAdditionalColor))},rt=Pe,t(Re,ct),Re.rendererContexts={},Re.prototype.initGL=function(){var t,e,i,r,s,n=Re.rendererContexts[this.stage.id];if(null!=n)return++n.refCount,this.glContext=n.glContext,this.textures=n.textures,this.vertexBuffer=n.vertexBuffer,this.indexBuffer=n.indexBuffer,void(this.shaders=n.shaders);for(e in n=new J,this.textures=n.textures,Re.rendererContexts[this.stage.id]=n,this.stage.style.webkitUserSelect="none",0===this.stage.width&&0===this.stage.height&&(this.stage.width=this.data.header.width,this.stage.height=this.data.header.height),i={alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1},this.glContext=null!=(s=this.stage.getContext("webgl",i))?s:this.stage.getContext("experimental-webgl",i),n.glContext=this.glContext,t=this.glContext,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),n.vertexBuffer=this.vertexBuffer,n.indexBuffer=this.indexBuffer,this.bindVertexBuffer(t,this.vertexBuffer),this.bindIndexBuffer(t,this.indexBuffer),this.shaders={},n.shaders=this.shaders,this.currentShader=null,H)r=H[e],this.shaders[e]=new rt(t,e,r);t.enable(t.BLEND),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.activeTexture(t.TEXTURE0),t.clearColor(0,0,0,1)},Re.prototype.destructGL=function(){var t,e,i,r;if(!(0<--Re.rendererContexts[this.stage.id].refCount)){for(i in(e=this.glContext).deleteBuffer(this.indexBuffer),e.deleteBuffer(this.vertexBuffer),r=this.textures)t=r[i],e.deleteTexture(t[0]);delete Re.rendererContexts[this.stage.id]}},Re.prototype.setTexParameter=function(t,e,i){null==e&&(e=!1),null==i&&(i=!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e?t.REPEAT:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,i?t.REPEAT:t.CLAMP_TO_EDGE)},Re.prototype.setViewport=function(t,e){var i,r;this.viewportChanged=this.propertyMatrix.setWithComparing(e.property.matrix),null!=this.pMatrix&&!this.viewportChanged&&this.w===this.stage.width&&this.h===this.stage.height||(this.w=this.stage.width,this.h=this.stage.height,t.viewport(0,0,this.w,this.h),r=this.w,i=this.h,this.pMatrix=new Float32Array([2/r,0,0,0,0,2/(0-i),0,0,0,0,-1,0,-(r+0)/r,-(0+i)/(0-i),-0,1]))},Re.prototype.destruct=function(){var t,e,i,r,s,n,o,a,h;for(this.bindedTexture=null,this.currentTexture=null,this.deleteMask(this.glContext),this.destructGL(),t=0,r=(o=this.bitmapContexts).length;t<r;t++)o[t].destruct();for(e=0,s=(a=this.bitmapExContexts).length;e<s;e++)a[e].destruct();for(i=0,n=(h=this.textContexts).length;i<n;i++)h[i].destruct()},Re.prototype.init=function(t){t.useVertexColor=this.useVertexColor,Re.__super__.init.call(this,t)},Re.prototype.beginRender=function(t){Re.__super__.beginRender.call(this,t),null==(this.lwf=t).parent&&(this.faces=0)},Re.prototype.bindTexture=function(t,e){this.bindedTexture!==e&&(t.bindTexture(t.TEXTURE_2D,e),this.bindedTexture=e)},Re.prototype.blendFunc=function(t,e,i,r){this.setSrcFactor===e&&this.setDstFactor===i||(this.setSrcFactor=e,this.setDstFactor=i,t.blendFunc(e,i)),this.setEquation!==r&&(this.setEquation=r,t.blendEquationSeparate(r,t.FUNC_ADD))},Re.prototype.bindVertexBuffer=function(t,e){this.bindedVertexBuffer!==e&&(this.bindedVertexBuffer=e,t.bindBuffer(t.ARRAY_BUFFER,e))},Re.prototype.bindIndexBuffer=function(t,e){this.bindedIndexBuffer!==e&&(this.bindedIndexBuffer=e,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e))},Re.prototype.setClearColor=function(t){var e=this.backGroundColor,i=e[0],r=e[1],s=e[2],n=e[3];t.clearColor(i/255,r/255,s/255,n/255)},Re.prototype.addCommand=function(t,e){Re.__super__.addCommand.call(this,t,e),null==this.lwf.parent&&++this.faces},Re.prototype.endRender=function(t){var e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y;if(null==t.parent){if(this.currentTexture=null,this.bindedTexture=null,this.setSrcFactor=null,this.setDstFactor=null,this.setEquation=null,this.bindedVertexBuffer=null,this.bindedIndexBuffer=null,this.currentBlendMode="normal",i=this.glContext,this.setViewport(i,t),this.needsClear&&i.clear(i.COLOR_BUFFER_BIT),c=4*this.faces*this.maxAttributes,this.faces=0,this.drawCalls=0,c>this.vertexData.length&&((c*=3)>65536*this.maxAttributes&&(c=65536*this.maxAttributes),s=c/(4*this.maxAttributes)*6,c!==this.vertexData.length)){for(this.vertexData=new Float32Array(c),this.indexData=new Uint16Array(s),u=r=n=0,f=s/6;0<=f?u<f:f<u;0<=f?++u:--u)this.indexData[n+0]=r+0,this.indexData[n+1]=r+1,this.indexData[n+2]=r+2,this.indexData[n+3]=r+2,this.indexData[n+4]=r+1,this.indexData[n+5]=r+3,n+=6,r+=4;this.bindIndexBuffer(i,this.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indexData,i.STATIC_DRAW)}for(this.renderMaskMode="normal",this.renderMasked=!1,a=t.renderCount,o=d=0,m=this.commands.length;0<=m?d<m:m<d;o=0<=m?++d:--d)if(null!=(e=this.commands[o])&&e.renderingIndex===o&&e.renderCount===a){if(null!=e.subCommands)for(l=p=0,y=e.subCommands.length;0<=y?p<y:y<p;l=0<=y?++p:--p)null!=(h=e.subCommands[l])&&h.renderingIndex===l&&h.renderCount===a&&this.render(i,h);this.render(i,e)}this.renderMesh(i),"normal"!==this.renderMaskMode&&("layer"===this.renderMaskMode&&this.renderMasked?this.renderMask(i):i.bindFramebuffer(i.FRAMEBUFFER,null)),this.initCommands()}else this.addCommandToParent(t)},Re.prototype.render=function(t,e){var i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_,g,v,x,M,b,C,I,E,w,F,L;if(this.renderMaskMode!==e.maskMode){switch(this.renderMesh(t),this.generateMask(t),e.maskMode){case"erase":case"mask":case"alpha":"layer"===this.renderMaskMode&&this.renderMasked&&this.renderMask(t),this.renderMasked=!0,this.maskSrcFactor="erase"===e.maskMode?t.ONE_MINUS_DST_ALPHA:t.DST_ALPHA,t.bindFramebuffer(t.FRAMEBUFFER,this.maskFrameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.setClearColor(t);break;case"layer":this.renderMasked?(t.bindFramebuffer(t.FRAMEBUFFER,this.layerFrameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.setClearColor(t)):t.bindFramebuffer(t.FRAMEBUFFER,null);break;default:"layer"===this.renderMaskMode&&this.renderMasked?this.renderMask(t):t.bindFramebuffer(t.FRAMEBUFFER,null)}this.renderMaskMode=e.maskMode}if(o=e.context,_=e.texture,h=e.matrix,s=e.colorTransform,r=e.blendMode,y=this.useVertexColor?this.useAlwaysAdditionalColorShader||s.hasAdd()?this.shaders.additionalColor:this.shaders.vertexColor:this.shaders.simple,_!==this.currentTexture||y!==this.currentShader||r!==this.currentBlendMode||4*this.faces*this.maxAttributes>=this.vertexData.length){switch(this.renderMesh(t),this.currentTexture=_,this.currentBlendMode=r){case"add":this.blendSrcFactor=o.preMultipliedAlpha?t.ONE:t.SRC_ALPHA,this.blendDstFactor=t.ONE,this.blendEquation=t.FUNC_ADD;break;case"multiply":this.blendSrcFactor=t.DST_COLOR,this.blendDstFactor=t.ONE_MINUS_SRC_ALPHA,this.blendEquation=t.FUNC_ADD;break;case"screen":this.blendSrcFactor=t.ONE_MINUS_DST_COLOR,this.blendDstFactor=t.ONE,this.blendEquation=t.FUNC_ADD;break;case"subtract":this.blendSrcFactor=o.preMultipliedAlpha?t.ONE:t.SRC_ALPHA,this.blendDstFactor=t.ONE,this.blendEquation=t.FUNC_REVERSE_SUBTRACT;break;default:this.blendSrcFactor=o.preMultipliedAlpha?t.ONE:t.SRC_ALPHA,this.blendDstFactor=t.ONE_MINUS_SRC_ALPHA,this.blendEquation=t.FUNC_ADD}y!==this.currentShader?(null!=this.currentShader&&this.currentShader.disable(t),this.currentShader=y.use(t,this.pMatrix)):this.viewportChanged&&this.currentShader.setMatrix(t,this.pMatrix)}for(this.useVertexColor?((n=this.color)[0]=s.multi._[0],n[1]=s.multi._[1],n[2]=s.multi._[2],n[3]=s.multi._[3],o.preMultipliedAlpha&&(n[0]*=n[3],n[1]*=n[3],n[2]*=n[3]),this.currentShader.isAdditionalColor&&(n[4]=s.add._[0],n[5]=s.add._[1],n[6]=s.add._[2],n[7]=s.add._[3])):i=s.multi._[3],M=o.vertexData,g=o.uv,l=h._[0],c=h._[1],u=h._[2],d=h._[3],p=h._[4],f=h._[5],C=4*this.faces++*this.currentShader.attributes,b=this.vertexData,a=L=0;L<4;a=++L)F=2*a+1,I=M[w=2*a+0],E=M[F],v=g[w],x=g[F],m=C+a*this.currentShader.attributes,this.useVertexColor?(b[m]=I*l+E*u+p,b[1+m]=I*c+E*d+f,b[2+m]=v,b[3+m]=x,b[4+m]=n[0],b[5+m]=n[1],b[6+m]=n[2],b[7+m]=n[3],this.currentShader.isAdditionalColor&&(b[8+m]=n[4],b[9+m]=n[5],b[10+m]=n[6],b[11+m]=n[7])):(b[m]=I*l+E*u+p,b[1+m]=I*c+E*d+f,b[2+m]=v,b[3+m]=x,b[4+m]=i)},Re.prototype.renderMesh=function(t){null!==this.currentTexture&&null!==this.currentShader&&0!==this.faces&&(this.bindTexture(t,this.currentTexture),this.blendFunc(t,this.blendSrcFactor,this.blendDstFactor,this.blendEquation),this.bindedVertexBuffer===this.vertexBuffer?t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexData):(this.bindVertexBuffer(t,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.DYNAMIC_DRAW)),this.bindedIndexBuffer!==this.indexBuffer&&(this.bindIndexBuffer(t,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indexData,t.STATIC_DRAW)),t.uniformMatrix4fv(this.currentShader.uMatrix,!1,this.matrix),t.drawElements(t.TRIANGLES,6*this.faces,t.UNSIGNED_SHORT,0),this.faces=0,++this.drawCalls)},Re.prototype.setBlendMode=function(t){this.blendMode=t},Re.prototype.setMaskMode=function(t){this.maskMode=t},Re.prototype.generateMask=function(t){var e,i,r,s,n,o;if(null==this.maskTexture||this.maskTextureWidth!==this.w||this.maskTextureHeight!==this.h){for(this.maskMatrix=new Float32Array([1,0,0,0,0,-1,0,0,0,0,1,0,0,this.h,0,1]),this.maskTexture=t.createTexture(),this.maskTextureWidth=this.w,this.maskTextureHeight=this.h,this.layerTexture=t.createTexture(),n=[this.maskTexture,this.layerTexture],this.maskFrameBuffer=t.createFramebuffer(),this.layerFrameBuffer=t.createFramebuffer(),i=[this.maskFrameBuffer,this.layerFrameBuffer],r=o=0;o<2;r=++o)s=n[r],this.bindTexture(t,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.w,this.h,0,t.RGBA,t.UNSIGNED_BYTE,null),this.setTexParameter(t),e=i[r],t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.bindFramebuffer(t.FRAMEBUFFER,null);this.maskVertexData=new Float32Array([this.w,this.h,1,1,1,this.w,0,1,0,1,0,this.h,0,1,1,0,0,0,0,1])}},Re.prototype.deleteMask=function(t){null!=this.maskTexture&&(t.deleteFramebuffer(this.maskFrameBuffer),t.deleteFramebuffer(this.layerFrameBuffer),this.maskFrameBuffer=null,this.layerFrameBuffer=null,t.deleteTexture(this.maskTexture),t.deleteTexture(this.layerTexture),this.maskTexture=null,this.layerTexture=null)},Re.prototype.renderMask=function(t){null!=this.currentShader&&this.currentShader.disable(t),this.currentShader=this.shaders.simple.use(t,this.pMatrix),this.bindVertexBuffer(t,this.vertexBuffer),this.maskVertexData[0*this.currentShader.attributes+0]=this.w,this.maskVertexData[0*this.currentShader.attributes+1]=this.h,this.maskVertexData[+this.currentShader.attributes+0]=this.w,this.maskVertexData[2*this.currentShader.attributes+1]=this.h,this.bindedVertexBuffer===this.vertexBuffer?t.bufferSubData(t.ARRAY_BUFFER,0,this.maskVertexData):(this.bindVertexBuffer(t,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.maskVertexData,t.DYNAMIC_DRAW)),this.maskMatrix[13]=this.h,t.uniformMatrix4fv(this.currentShader.uMatrix,!1,this.maskMatrix),this.bindIndexBuffer(t,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indexData,t.STATIC_DRAW),t.bindFramebuffer(t.FRAMEBUFFER,this.maskFrameBuffer),this.bindTexture(t,this.layerTexture),this.blendFunc(t,this.maskSrcFactor,t.ZERO,t.FUNC_ADD),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),++this.drawCalls,t.bindFramebuffer(t.FRAMEBUFFER,null),this.bindTexture(t,this.maskTexture),this.blendFunc(t,t.ONE,this.blendDstFactor,t.FUNC_ADD),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),++this.drawCalls},Re.prototype.constructBitmap=function(t,e,i){var r=this.bitmapContexts[e];if(r)return new Q(r)},Re.prototype.constructBitmapEx=function(t,e,i){var r=this.bitmapExContexts[e];if(r)return new Q(r)},Re.prototype.constructText=function(t,e,i){var r=this.textContexts[e];if(r)return new nt(t,r,i)},Re.prototype.constructParticle=function(t,e,i){var r=this.resourceCache.particleConstructor,s=t.data.particleDatas[i.particleDataId];if(null!=r)return r(t,t.data.strings[s.stringId])},Re.prototype.getStageSize=function(){return[this.stage.width,this.stage.height]},Re.prototype.setBackgroundColor=function(t){var e=this.parseBackgroundColor(t),i=e[0],r=e[1],s=e[2],n=e[3];this.backGroundColor=[i,r,s,n],this.setClearColor(this.glContext)},et=Re,Oe.prototype.destruct=function(){},q=Oe,De.prototype.destruct=function(){},De.prototype.render=function(t,e,i,r,s){var n,o,a;s&&0!==e.multi.alpha&&(o=this.context.factory.lwf.getRendererFactory(),a=this.context.factory,(n=this.cmd).matrix=t,n.colorTransform=e,n.blendMode=o.blendMode,n.maskMode=o.maskMode,a.addCommand(i,n))},Q=De,t(Ne,ut),Ne.prototype.getRendererName=function(){return"WebGL"},Ne.prototype.newFactory=function(t,e,i){var r,s,n,o;return new et(i,this,e,t.stage,null!=(r=t.textInSubpixel)&&r,null==(s=t.needsClear)||s,null==(n=t.useVertexColor)||n,null!=(o=t.useAlwaysAdditionalColorShader)&&o)},it=Ne,t(He,y),st=He,t(We,g),We.prototype.destruct=function(){var t=this.context.factory.glContext;this.texture&&t.deleteTexture(this.texture)},We.prototype.needsScale=function(){return!1},We.prototype.render=function(t,e,i,r,s){var n,o,a;s&&0!==e.multi.alpha&&(We.__super__.render.call(this,t,e,i,r,s),o=this.context.factory.lwf.getRendererFactory(),a=this.context.factory,(n=this.cmd).texture=this.texture,n.colorTransform=e,n.blendMode=o.blendMode,n.maskMode=o.maskMode,a.addCommand(i,n))},We.prototype.renderText=function(t){var e;We.__super__.renderText.call(this,t),e=this.context.factory.glContext,null==this.texture&&(this.texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.context.factory.setTexParameter(e)},nt=We,"undefined"!=typeof global&&(global.LWF.WebGLRendererFactory=et,global.LWF.WebGLResourceCache=it,global.LWF.useWebGLRenderer=function(){return global.LWF.ResourceCache=it},global.LWF.LWF.useWebGLRenderer=global.LWF.useWebGLRenderer),et.prototype.convertColor,et.prototype.fitForHeight,et.prototype.fitForWidth,et.prototype.scaleForHeight,et.prototype.scaleForWidth,et.prototype.setBackgroundColor,it.prototype.clear,it.prototype.getCache,it.prototype.getRendererName,it.prototype.loadLWF,it.prototype.loadLWFs,it.prototype.unloadLWF,it.prototype.setParticleConstructor,it.prototype.setDOMElementConstructor}.call(this),function(){var r,a={REVISION:"10",Tween:function(t){this.lwf=t.lwf,this.object=t,this.valuesStart={},this.valuesEnd={},this.valuesStartRepeat={},this.duration=0,this.repeat=0,this.delayTime=0,this.startTime=null,this.easingFunction=a.Easing.Linear.None,this.interpolationFunction=a.Interpolation.Linear,this.chainedTweens=[],this.onStartCallback=null,this.onStartCallbackFired=!1,this.onUpdateCallback=null,(this.onCompleteCallback=null)===this.lwf._tweens&&(this.lwf._tweens=[],"lwf"===this.lwf._tweenMode?this.lwf.addExecHandler(a._tweenExecHandler):this.lwf.addMovieEventHandler("_root",{enterFrame:a._tweenMovieHandler})),this.to=function(t,e){return void 0!==e&&(this.duration=e*this.lwf.tick),this.valuesEnd=t,this},this.start=function(){for(var t in this.lwf._tweens.push(this),this.onStartCallbackFired=!1,this.startTime=this.lwf.time,this.startTime+=this.delayTime,this.valuesEnd)if(null!==this.object[t]){if(this.valuesEnd[t]instanceof Array){if(0===this.valuesEnd[t].length)continue;this.valuesEnd[t]=[this.object[t]].concat(this.valuesEnd[t])}this.valuesStart[t]=this.object[t],this.valuesStart[t]instanceof Array==!1&&(this.valuesStart[t]*=1),this.valuesStartRepeat[t]=this.valuesStart[t]||0}return this},this.stop=function(){var t=this.lwf._tweens.indexOf(this);return-1!==t&&(this.lwf._tweens.splice(t,1),0==this.lwf._tweens.length&&this.lwf.stopTweens()),this},this.delay=function(t){return this.delayTime=t*this.lwf.tick,this},this.repeat=function(t){return this.repeat=t,this},this.easing=function(t){return this.easingFunction=t,this},this.interpolation=function(t){return this.interpolationFunction=t,this},this.chain=function(t){return null!=t?(this.chainedTweens.push(t),this):(t=new a.Tween(this.object),this.chainedTweens.push(t),t)},this.onStart=function(t){return this.onStartCallback=t,this},this.onUpdate=function(t){return this.onUpdateCallback=t,this},this.onComplete=function(t){return this.onCompleteCallback=t,this},this.update=function(t){if(t<this.startTime)return!0;if(null===this.object.lwf)return!1;!1===this.onStartCallbackFired&&(null!==this.onStartCallback&&this.onStartCallback.call(this.object),this.onStartCallbackFired=!0);var e=this.duration<=0?this.lwf.tick:this.duration,i=1<(i=(t-this.startTime)/e)?1:i,r=this.easingFunction(i);for(var s in this.valuesEnd){var n=this.valuesStart[s]||0,o=this.valuesEnd[s];o instanceof Array?this.object[s]=this.interpolationFunction(o,r):("string"==typeof o&&(o=n+parseFloat(o,10)),this.object[s]=n+(o-n)*r)}if(null!==this.onUpdateCallback&&this.onUpdateCallback.call(this.object,r),1!=i)return!0;if(0<this.repeat){for(var s in isFinite(this.repeat)&&this.repeat--,this.valuesStartRepeat)"string"==typeof this.valuesEnd[s]&&(this.valuesStartRepeat[s]=this.valuesStartRepeat[s]+parseFloat(this.valuesEnd[s],10)),this.valuesStart[s]=this.valuesStartRepeat[s];return this.startTime=t+this.delayTime,!0}null!==this.onCompleteCallback&&this.onCompleteCallback.call(this.object);for(var a=0,h=this.chainedTweens.length;a<h;a++)this.chainedTweens[a].start(t);return!1},this.to,this.start,this.stop,this.delay,this.easing,this.interpolation,this.chain,this.onStart,this.onUpdate,this.onComplete,this.update}};a.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)))},Out:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-a.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*a.Easing.Bounce.In(2*t):.5*a.Easing.Bounce.Out(2*t-1)+.5}}},a.Interpolation={Linear:function(t,e){var i=t.length-1,r=i*e,s=Math.floor(r),n=a.Interpolation.Utils.Linear;return e<0?n(t[0],t[1],r):1<e?n(t[i],t[i-1],i-r):n(t[s],t[i<s+1?i:s+1],r-s)},Bezier:function(t,e){for(var i=0,r=t.length-1,s=Math.pow,n=a.Interpolation.Utils.Bernstein,o=0;o<=r;o++)i+=s(1-e,r-o)*s(e,o)*t[o]*n(r,o);return i},CatmullRom:function(t,e){var i=t.length-1,r=i*e,s=Math.floor(r),n=a.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(s=Math.floor(r=i*(1+e))),n(t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i],r-s)):e<0?t[0]-(n(t[0],t[0],t[1],t[1],-r)-t[0]):1<e?t[i]-(n(t[i],t[i],t[i-1],t[i-1],r-i)-t[i]):n(t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2],r-s)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=a.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(r=[1],function(t){var e,i=1;if(r[t])return r[t];for(e=t;1<e;e--)i*=e;return r[t]=i}),CatmullRom:function(t,e,i,r,s){var n=.5*(i-t),o=.5*(r-e),a=s*s;return(2*e-2*i+n+o)*(s*a)+(-3*e+3*i-2*n-o)*a+n*s+e}}};var t=global.LWF.LWF.prototype;t.setTweenMode=function(t){this._tweenMode=t},t.stopTweens=function(){null!==this._tweens&&(this._tweens=null,this.removeExecHandler(a._tweenExecHandler),this.removeMovieEventHandler("_root",{enterFrame:a._tweenMovieHandler}))},t.stopTweens,a._tweenUpdater=function(){if(null!==this._tweens){for(var t=0,e=this._tweens.length,i=this.time;t<e;)this._tweens[t].update(i)?t++:(this._tweens.splice(t,1),e--);0==this._tweens.length&&this.stopTweens()}},a._tweenExecHandler=function(){a._tweenUpdater.call(this)},a._tweenMovieHandler=function(){a._tweenUpdater.call(this.lwf)};var e=global.LWF.Movie.prototype;e.addTween=function(){return new a.Tween(this)},e.stopTweens=function(){if(void 0===this.lwf||null===this.lwf||null===this.lwf._tweens)return this;for(var t=this.lwf._tweens,e=0,i=t.length;e<i;)t[e].object===this?(t.splice(e,1),i--):e++;return 0==t.length&&this.lwf.stopTweens(),this};var i=global.LWF.BitmapClip.prototype;i.addTween=e.addTween,i.stopTweens=e.stopTweens,global.LWF.Tween=a.Tween,global.LWF.Tween.Easing=a.Easing;var s=global.LWF.Tween.Easing;s.Linear=a.Easing.Linear,s.Linear.None=a.Easing.Linear.None,s.Quadratic=a.Easing.Quadratic,s.Quadratic.In=a.Easing.Quadratic.In,s.Quadratic.Out=a.Easing.Quadratic.Out,s.Quadratic.InOut=a.Easing.Quadratic.InOut,s.Cubic=a.Easing.Cubic,s.Cubic.In=a.Easing.Cubic.In,s.Cubic.Out=a.Easing.Cubic.Out,s.Cubic.InOut=a.Easing.Cubic.InOut,s.Quartic=a.Easing.Quartic,s.Quartic.In=a.Easing.Quartic.In,s.Quartic.Out=a.Easing.Quartic.Out,s.Quartic.InOut=a.Easing.Quartic.InOut,s.Quintic=a.Easing.Quintic,s.Quintic.In=a.Easing.Quintic.In,s.Quintic.Out=a.Easing.Quintic.Out,s.Quintic.InOut=a.Easing.Quintic.InOut,s.Sinusoidal=a.Easing.Sinusoidal,s.Sinusoidal.In=a.Easing.Sinusoidal.In,s.Sinusoidal.Out=a.Easing.Sinusoidal.Out,s.Sinusoidal.InOut=a.Easing.Sinusoidal.InOut,s.Exponential=a.Easing.Exponential,s.Exponential.In=a.Easing.Exponential.In,s.Exponential.Out=a.Easing.Exponential.Out,s.Exponential.InOut=a.Easing.Exponential.InOut,s.Circular=a.Easing.Circular,s.Circular.In=a.Easing.Circular.In,s.Circular.Out=a.Easing.Circular.Out,s.Circular.InOut=a.Easing.Circular.InOut,s.Elastic=a.Easing.Elastic,s.Elastic.In=a.Easing.Elastic.In,s.Elastic.Out=a.Easing.Elastic.Out,s.Elastic.InOut=a.Easing.Elastic.InOut,s.Back=a.Easing.Back,s.Back.In=a.Easing.Back.In,s.Back.Out=a.Easing.Back.Out,s.Back.InOut=a.Easing.Back.InOut,s.Bounce=a.Easing.Bounce,s.Bounce.In=a.Easing.Bounce.In,s.Bounce.Out=a.Easing.Bounce.Out,s.Bounce.InOut=a.Easing.Bounce.InOut,global.LWF.Tween.Interpolation=a.Interpolation;var n=global.LWF.Tween.Interpolation;n.Linear=a.Interpolation.Linear,n.Bezier=a.Interpolation.Bezier,n.CatmullRom=a.Interpolation.CatmullRom,n.Utils=a.Interpolation.Utils,n.Utils.Linear=a.Interpolation.Utils.Linear,n.Utils.Bernstein=a.Interpolation.Utils.Bernstein,n.Utils.Factorial=a.Interpolation.Utils.Factorial,n.Utils.CatmullRom=a.Interpolation.Utils.CatmullRom}.call(this),function(){var c={Character:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RangeError:"INVALID_CHARACTER_ERR",btoaArray:{}};c.btoaArray.CharacterTable=function(t){for(var e=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(t.length),i=0,r=e.length;i<r;++i)e[i]=t.charCodeAt(i);return e}(c.Character),c.atobArray=function(t){for(var e,i,r,s=0,n=0,o=t.length,a=0,h=0,l=c.atobArray.DecodeTable;"="===t.charAt(o-1);)--o;if(e=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(3*((o+3)/4|0)-[0,0,2,1][o%4]),o%4==1||0<t.length&&0===o)throw new Error(c.RangeError);for(;n<o;){if(-1===(i=(r=t.charCodeAt(n++))<256?l[r]:-1))throw new Error(c.RangeError);s=(s<<6)+i,8<=(h+=6)&&(r=s>>(h-=8),s^=(e[a++]=r)<<h)}return e},c.atobArray.DecodeTable=function(t){for(var e=new("undefined"!=typeof Int16Array?Int16Array:Array)(256),i=t instanceof Array?t:Array.prototype.slice.call(t),r=0;r<255;++r)e[r]=i.indexOf(r);return e}(c.btoaArray.CharacterTable),global.LWF.Base64=c}.call(this),function(){var bt={},u={},d={},p=function(t){for(var e=[],i=0;i<t;i++)e[i]=0;return e};"undefined"!=typeof Uint8Array&&(p=function(t){return new Uint8Array(t)}),function(){function h(t){this.init(),t&&this.setStream(t)}var i=4294967295,n=16777215,o=2048;h.prototype.setStream=function(t){this._stream=t},h.prototype.releaseStream=function(){this._stream=null},h.prototype.init=function(){this._position=0,this.low=0,this.range=i,this._cacheSize=1,this._cache=0},h.prototype.flushData=function(){for(var t=0;t<5;t++)this.shiftLow()},h.prototype.flushStream=function(){this._stream.flush&&this._stream.flush()},h.prototype.shiftLow=function(){var t=this.low>i?1:0;if(this.low<4278190080||t){this._position+=this._cacheSize;for(var e=this._cache;this._stream.writeByte(e+t&255),e=255,0!=--this._cacheSize;);this._cache=this.low>>>24}this._cacheSize++,this.low=256*(this.low&n)},h.prototype.encodeDirectBits=function(t,e){for(var i=1<<e-1,r=e-1;0<=r;r--,i>>>=1)this.range>>>=1,t&i&&(this.low+=this.range),this.range<=n&&(this.range*=256,this.shiftLow())},h.prototype.getProcessedSizeAdd=function(){return this._cacheSize+this._position+4},h.initBitModels=function(t,e){var i;for(e&&!t&&("undefined"!=typeof Uint16Array?t=new Uint16Array(e):(t=[]).length=e),i=0;i<t.length;i++)t[i]=1024;return t},h.prototype.encode=function(t,e,i){var r=t[e],s=(this.range>>>11)*r;0===i?(this.range=s,t[e]=r+(o-r>>>5)):(this.low+=s,this.range-=s,t[e]=r-(r>>>5)),this.range<=n&&(this.range*=256,this.shiftLow())};var r=[];"undefined"!=typeof Uint32Array&&(r=new Uint32Array(512)),function(){for(var t=8;0<=t;t--)for(var e=1<<9-t,i=1<<9-t-1;i<e;i++)r[i]=(t<<6)+(e-i<<6>>>9-t-1)}(),h.getPrice=function(t,e){return r[(2047&(t-e^-e))>>>2]},h.getPrice0=function(t){return r[t>>>2]},h.getPrice1=function(t){return r[o-t>>>2]},h.kNumBitPriceShiftBits=6,bt.Encoder=h;function t(t){t&&(this.setStream(t),this.init())}t.prototype.setStream=function(t){this._stream=t},t.prototype.releaseStream=function(){this._stream=null},t.prototype.init=function(){var t=5;for(this._code=0,this._range=-1;t--;)this._code=this._code<<8|this._stream.readByte()},t.prototype.decodeDirectBits=function(t){for(var e,i=0,r=t;r--;)this._range>>>=1,e=this._code-this._range>>>31,this._code-=this._range&e-1,i=i<<1|1-e,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return i},t.prototype.decodeBit=function(t,e){var i=t[e],r=(this._range>>>11)*i;return(2147483648^this._code)<(2147483648^r)?(this._range=r,t[e]+=2048-i>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=r,this._code-=r,t[e]-=i>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},bt.Decoder=t;function e(t){this._numBitLevels=t,this.init()}e.prototype.init=function(){this._models=h.initBitModels(null,1<<this._numBitLevels)},e.prototype.encode=function(t,e){for(var i=1,r=this._numBitLevels;0<r;){var s=e>>>--r&1;t.encode(this._models,i,s),i=i<<1|s}},e.prototype.reverseEncode=function(t,e){for(var i=1,r=0;r<this._numBitLevels;r++){var s=1&e;t.encode(this._models,i,s),i=i<<1|s,e>>>=1}},e.reverseEncode=function(t,e,i,r,s){for(var n=1,o=0;o<r;o++){var a=1&s;i.encode(t,e+n,a),n=n<<1|a,s>>>=1}},e.prototype.getPrice=function(t){for(var e=0,i=1,r=this._numBitLevels;0<r;){var s=t>>>--r&1;e+=h.getPrice(this._models[i],s),i=i<<1|s}return e},e.prototype.reverseGetPrice=function(t){for(var e=0,i=1,r=this._numBitLevels;0<r;r--){var s=1&t;t>>>=1,e+=h.getPrice(this._models[i],s),i=i<<1|s}return e},e.reverseGetPrice=function(t,e,i,r){for(var s=0,n=1,o=i;0<o;o--){var a=1&r;r>>>=1,s+=h.getPrice(t[e+n],a),n=n<<1|a}return s},bt.BitTreeEncoder=e;function s(t){this._numBitLevels=t,this.init()}s.prototype.init=function(){this._models=h.initBitModels(null,1<<this._numBitLevels)},s.prototype.decode=function(t){for(var e=1,i=this._numBitLevels;i--;)e=e<<1|t.decodeBit(this._models,e);return e-(1<<this._numBitLevels)},s.prototype.reverseDecode=function(t){for(var e,i=1,r=0,s=0;s<this._numBitLevels;++s)i=i<<1|(e=t.decodeBit(this._models,i)),r|=e<<s;return r},s.reverseDecode=function(t,e,i,r){for(var s,n=1,o=0,a=0;a<r;++a)n=n<<1|(s=i.decodeBit(t,e+n)),o|=s<<a;return o},bt.BitTreeDecoder=s}.call(this),function(){function i(t,e,i,r){var s,n;4<=arguments.length&&(n=(s=Array.prototype.slice.call(arguments,0)).pop(),this.create.apply(this,s),this.setStream(n),this.init())}i.prototype.moveBlock=function(){var t=this._bufferOffset+this._pos+this._keepSizeBefore;0<t&&t--;for(var e=this._bufferOffset+this._streamPos-t,i=0;i<e;i++)this._bufferBase[i]=this._bufferBase[t+i];this._bufferOffset-=t},i.prototype.readBlock=function(){if(!this._streamEndWasReached)for(;;){var t=-this._bufferOffset+this._blockSize-this._streamPos;if(0==t)return;var e=this._stream.read(this._bufferBase,this._bufferOffset+this._streamPos,t);if(e<=0)return this._posLimit=this._streamPos,this._bufferOffset+this._posLimit>this._pointerToLastSafePosition&&(this._posLimit=this._pointerToLastSafePosition-this._bufferOffset),void(this._streamEndWasReached=!0);this._streamPos+=e,this._streamPos>=this._pos+this._keepSizeAfter&&(this._posLimit=this._streamPos-this._keepSizeAfter)}},i.prototype.free=function(){this._bufferBase=null},i.prototype.create=function(t,e,i){var r=(this._keepSizeBefore=t)+(this._keepSizeAfter=e)+i;this._bufferBase&&this._blockSize===r||(this.free(),this._blockSize=r,this._bufferBase=p(this._blockSize)),this._pointerToLastSafePosition=this._blockSize-e},i.prototype.setStream=function(t){this._stream=t},i.prototype.releaseStream=function(){this._stream=null},i.prototype.init=function(){this._bufferOffset=0,this._pos=0,this._streamPos=0,this._streamEndWasReached=!1,this.readBlock()},i.prototype.movePos=function(){this._pos++,this._pos>this._posLimit&&(this._bufferOffset+this._pos>this._pointerToLastSafePosition&&this.moveBlock(),this.readBlock())},i.prototype.getIndexByte=function(t){return this._bufferBase[this._bufferOffset+this._pos+t]},i.prototype.getMatchLen=function(t,e,i){var r,s;for(this._streamEndWasReached&&this._pos+t+i>this._streamPos&&(i=this._streamPos-(this._pos+t)),e++,r=this._bufferOffset+this._pos+t,s=0;s<i&&this._bufferBase[r+s]===this._bufferBase[r+s-e];)s++;return s},i.prototype.getNumAvailableBytes=function(){return this._streamPos-this._pos},i.prototype.reduceOffsets=function(t){this._bufferOffset+=t,this._posLimit-=t,this._pos-=t,this._streamPos-=t},u.InWindow=i;function t(){this._windowSize=0}t.prototype.create=function(t){this._buffer&&this._windowSize===t||(this._buffer=p(t)),this._windowSize=t,this._pos=0,this._streamPos=0},t.prototype.flush=function(){var t=this._pos-this._streamPos;if(0!==t){for(;t--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},t.prototype.releaseStream=function(){this.flush(),this._stream=null},t.prototype.setStream=function(t){this.releaseStream(),this._stream=t},t.prototype.init=function(t){t||(this._streamPos=0,this._pos=0)},t.prototype.copyBlock=function(t,e){var i=this._pos-t-1;for(i<0&&(i+=this._windowSize);e--;)i>=this._windowSize&&(i=0),this._buffer[this._pos++]=this._buffer[i++],this._pos>=this._windowSize&&this.flush()},t.prototype.putByte=function(t){this._buffer[this._pos++]=t,this._pos>=this._windowSize&&this.flush()},t.prototype.getByte=function(t){var e=this._pos-t-1;return e<0&&(e+=this._windowSize),this._buffer[e]},u.OutWindow=t;var b=function(){var t=[];"undefined"!=typeof Uint32Array&&(t=new Uint32Array(256));for(var e,i,r=0;r<256;r++){for(i=r,e=0;e<8;e++)0!=(1&i)?i=i>>>1^3988292384:i>>>=1;t[r]=i}return t}(),C=65536,a=(1<<30)-1;function e(){var t,e;i.call(this),this._cyclicBufferSize=0,this._son=[],this._hash=[],this._cutValue=255,this._hashSizeSum=0,this.HASH_ARRAY=!0,this.kNumHashDirectBytes=0,this.kMinMatchCheck=4,this.kFixHashSize=66560,6<=arguments.length&&(t=Array.prototype.slice.call(arguments,0),this.setType(t.shift()),e=t.pop(),this.create.apply(this,t),this.setStream(e),this.init())}var h=i.prototype;(e.prototype=Object.create(h)).setType=function(t){this.HASH_ARRAY=2<t,this.HASH_ARRAY?(this.kNumHashDirectBytes=0,this.kMinMatchCheck=4,this.kFixHashSize=66560):(this.kNumHashDirectBytes=2,this.kMinMatchCheck=3,this.kFixHashSize=0)},e.prototype.init=function(){var t;for(h.init.call(this),t=0;t<this._hashSizeSum;t++)this._hash[t]=0;this._cyclicBufferPos=0,this.reduceOffsets(-1)},e.prototype.movePos=function(){++this._cyclicBufferPos>=this._cyclicBufferSize&&(this._cyclicBufferPos=0),h.movePos.call(this),this._pos===a&&this.normalize()},e.prototype.create=function(t,e,i,r){var s,n,o;return!(a-256<t)&&(this._cutValue=16+(i>>>1),s=(t+e+i+r)/2+256,h.create.call(this,t+e,i+r,s),this._matchMaxLen=i,n=t+1,this._cyclicBufferSize!==n&&(this._cyclicBufferSize=n,this._son=[],this._son.length=2*n),o=65536,this.HASH_ARRAY&&(o=t-1,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o>>>=1,1<<24<(o|=65535)&&(o>>>=1),this._hashMask=o,o++,o+=this.kFixHashSize),o!==this._hashSizeSum&&(this._hashSizeSum=o,this._hash=[],this._hash.length=this._hashSizeSum),!0)},e.prototype.getMatches=function(t){var e;if(this._pos+this._matchMaxLen<=this._streamPos)e=this._matchMaxLen;else if((e=this._streamPos-this._pos)<this.kMinMatchCheck)return this.movePos(),0;var i,r=0,s=this._pos>this._cyclicBufferSize?this._pos-this._cyclicBufferSize:0,n=this._bufferOffset+this._pos,o=1,a=0,h=0,l=0;a=this.HASH_ARRAY?(h=1023&(i=b[this._bufferBase[n]]^this._bufferBase[n+1]),l=(i^=this._bufferBase[n+2]<<8)&C-1,(i^b[this._bufferBase[n+3]]<<5)&this._hashMask):this._bufferBase[n]^this._bufferBase[n+1]<<8;var c,u,d=this._hash[this.kFixHashSize+a];this.HASH_ARRAY&&(c=this._hash[h],u=this._hash[1024+l],this._hash[h]=this._pos,this._hash[1024+l]=this._pos,s<c&&this._bufferBase[this._bufferOffset+c]===this._bufferBase[n]&&(t[r++]=o=2,t[r++]=this._pos-c-1),s<u&&this._bufferBase[this._bufferOffset+u]===this._bufferBase[n]&&(u===c&&(r-=2),t[r++]=o=3,t[r++]=this._pos-u-1,c=u),0!==r&&c===d&&(r-=2,o=1)),this._hash[this.kFixHashSize+a]=this._pos;var p,f=1+(this._cyclicBufferPos<<1),m=this._cyclicBufferPos<<1,y=p=this.kNumHashDirectBytes;0!==this.kNumHashDirectBytes&&s<d&&this._bufferBase[this._bufferOffset+d+this.kNumHashDirectBytes]!==this._bufferBase[n+this.kNumHashDirectBytes]&&(t[r++]=o=this.kNumHashDirectBytes,t[r++]=this._pos-d-1);for(var _=this._cutValue;;){if(d<=s||0==_--){this._son[f]=this._son[m]=0;break}var g=this._pos-d,v=(g<=this._cyclicBufferPos?this._cyclicBufferPos-g:this._cyclicBufferPos-g+this._cyclicBufferSize)<<1,x=this._bufferOffset+d,M=Math.min(y,p);if(this._bufferBase[x+M]===this._bufferBase[n+M]){for(;++M!==e&&this._bufferBase[x+M]===this._bufferBase[n+M];);if(o<M&&(t[r++]=o=M,t[r++]=g-1,M===e)){this._son[m]=this._son[v],this._son[f]=this._son[1+v];break}}this._bufferBase[x+M]<this._bufferBase[n+M]?(this._son[m]=d,m=1+v,d=this._son[m],p=M):(this._son[f]=d,f=v,d=this._son[f],y=M)}return this.movePos(),r},e.prototype.skip=function(t){var e,i,r,s,n,o,a,h,l,c,u,d,p,f,m,y,_;do{if(this._pos+this._matchMaxLen<=this._streamPos)e=this._matchMaxLen;else if((e=this._streamPos-this._pos)<this.kMinMatchCheck){this.movePos();continue}for(i=this._pos>this._cyclicBufferSize?this._pos-this._cyclicBufferSize:0,r=this._bufferOffset+this._pos,n=this.HASH_ARRAY?(o=1023&(h=b[this._bufferBase[r]]^this._bufferBase[r+1]),this._hash[o]=this._pos,a=(h^=this._bufferBase[r+2]<<8)&C-1,this._hash[1024+a]=this._pos,(h^b[this._bufferBase[r+3]]<<5)&this._hashMask):this._bufferBase[r]^this._bufferBase[r+1]<<8,s=this._hash[this.kFixHashSize+n],this._hash[this.kFixHashSize+n]=this._pos,l=1+(this._cyclicBufferPos<<1),c=this._cyclicBufferPos<<1,u=d=this.kNumHashDirectBytes,p=this._cutValue;;){if(s<=i||0==p--){this._son[l]=this._son[c]=0;break}if(m=((f=this._pos-s)<=this._cyclicBufferPos?this._cyclicBufferPos-f:this._cyclicBufferPos-f+this._cyclicBufferSize)<<1,y=this._bufferOffset+s,_=u<d?u:d,this._bufferBase[y+_]===this._bufferBase[r+_]){for(;++_!==e&&this._bufferBase[y+_]===this._bufferBase[r+_];);if(_===e){this._son[c]=this._son[m],this._son[l]=this._son[1+m];break}}this._bufferBase[y+_]<this._bufferBase[r+_]?(this._son[c]=s,c=1+m,s=this._son[c],d=_):(this._son[l]=s,l=m,s=this._son[l],u=_)}this.movePos()}while(0!=--t)},e.prototype.normalizeLinks=function(t,e,i){for(var r,s=0;s<e;s++)(r=t[s])<=i?r=0:r-=i,t[s]=r},e.prototype.normalize=function(){var t=this._pos-this._cyclicBufferSize;this.normalizeLinks(this._son,2*this._cyclicBufferSize,t),this.normalizeLinks(this._hash,this._hashSizeSum,t),this.reduceOffsets(t)},e.prototype.setCutValue=function(t){this._cutValue=t},u.BinTree=e}.call(this),function(){var xt=Object.create(null);xt.kNumRepDistances=4,xt.kNumStates=12,xt.stateInit=function(){return 0},xt.stateUpdateChar=function(t){return t<4?0:t<10?t-3:t-6},xt.stateUpdateMatch=function(t){return t<7?7:10},xt.stateUpdateRep=function(t){return t<7?8:11},xt.stateUpdateShortRep=function(t){return t<7?9:11},xt.stateIsCharState=function(t){return t<7},xt.kNumPosSlotBits=6,xt.kDicLogSizeMin=0,xt.kNumLenToPosStatesBits=2,xt.kNumLenToPosStates=1<<xt.kNumLenToPosStatesBits,xt.kMatchMinLen=2,xt.getLenToPosState=function(t){return(t-=xt.kMatchMinLen)<xt.kNumLenToPosStates?t:xt.kNumLenToPosStates-1},xt.kNumAlignBits=4,xt.kAlignTableSize=1<<xt.kNumAlignBits,xt.kAlignMask=xt.kAlignTableSize-1,xt.kStartPosModelIndex=4,xt.kEndPosModelIndex=14,xt.kNumPosModels=xt.kEndPosModelIndex-xt.kStartPosModelIndex,xt.kNumFullDistances=1<<xt.kEndPosModelIndex/2,xt.kNumLitPosStatesBitsEncodingMax=4,xt.kNumLitContextBitsMax=8,xt.kNumPosStatesBitsMax=4,xt.kNumPosStatesMax=1<<xt.kNumPosStatesBitsMax,xt.kNumPosStatesBitsEncodingMax=4,xt.kNumPosStatesEncodingMax=1<<xt.kNumPosStatesBitsEncodingMax,xt.kNumLowLenBits=3,xt.kNumMidLenBits=3,xt.kNumHighLenBits=8,xt.kNumLowLenSymbols=1<<xt.kNumLowLenBits,xt.kNumMidLenSymbols=1<<xt.kNumMidLenBits,xt.kNumLenSymbols=xt.kNumLowLenSymbols+xt.kNumMidLenSymbols+(1<<xt.kNumHighLenBits),xt.kMatchMaxLen=xt.kMatchMinLen+xt.kNumLenSymbols-1,d.Base=xt;function v(t){return t<2048?o[t]:t<1<<21?o[t>>>10]+20:o[t>>>20]+40}var i=bt.Encoder.initBitModels,Mt=268435455,o=function(){var t,e=p(2048),i=2;for(e[0]=0,e[1]=1,t=2;t<22;t++)for(var r=1<<(t>>1)-1,s=0;s<r;s++,i++)e[i]=t;return e}(),e=function(){var t;for(this._state=xt.stateInit(),this._previousByte=0,this._repDistances=[],this._repDistances.length=xt.kNumRepDistances,this._optimum=[],this._matchFinder=null,this._rangeEncoder=new bt.Encoder,this._isMatch=i(null,xt.kNumStates<<xt.kNumPosStatesBitsMax),this._isRep=i(null,xt.kNumStates),this._isRepG0=i(null,xt.kNumStates),this._isRepG1=i(null,xt.kNumStates),this._isRepG2=i(null,xt.kNumStates),this._isRep0Long=i(null,xt.kNumStates<<xt.kNumPosStatesBitsMax),this._posSlotEncoder=[],this._posEncoders=i(null,xt.kNumFullDistances-xt.kEndPosModelIndex),this._posAlignEncoder=new bt.BitTreeEncoder(xt.kNumAlignBits),this._lenEncoder=new e.LenPriceTableEncoder,this._repMatchLenEncoder=new e.LenPriceTableEncoder,this._literalEncoder=new e.LiteralEncoder,this._matchDistances=[],this._matchDistances.length=2*xt.kMatchMaxLen+2,t=0;t<this._matchDistances.length;t++)this._matchDistances[t]=0;for(this._numFastBytes=32,this._longestMatchLength=0,this._numDistancePairs=0,this._additionalOffset=0,this._optimumEndIndex=0,this._optimumCurrentIndex=0,this._longestMatchWasFound=!1,this._posSlotPrices=[],this._distancesPrices=[],this._alignPrices=[],this._alignPriceCount=0,this._distTableSize=44,this._posStateBits=2,this._posStateMask=3,this._numLiteralPosStateBits=0,this._numLiteralContextBits=3,this._dictionarySize=1<<22,this._dictionarySizePrev=4294967295,this._numFastBytesPrev=4294967295,this.nowPos64=0,this._finished=!1,this._inStream=null,this._matchFinderType=1,this._writeEndMark=!1,this._needReleaseMFStream=!1,this.reps=[],this.repLens=[],t=this.backRes=0;t<4096;t++)this._optimum[t]=new e.Optimal;for(t=0;t<xt.kNumLenToPosStates;t++)this._posSlotEncoder[t]=new bt.BitTreeEncoder(xt.kNumPosSlotBits);this._matchPriceCount=0,this.processedInSize=[0],this.processedOutSize=[0],this.finished=[!1]};e.prototype.baseInit=function(){var t;for(this._state=xt.stateInit(),t=this._previousByte=0;t<xt.kNumRepDistances;t++)this._repDistances[t]=0};var s=e.LiteralEncoder=function(){this._coders=null,this._numPrevBits=-1,this._numPosBits=-1,this._posMask=0};s.Encoder2=function(){this._encoders=i(null,768)},s.Encoder2.prototype.init=function(){i(this._encoders)},s.Encoder2.prototype.encode=function(t,e){for(var i=1,r=7;0<=r;r--){var s=e>>>r&1;t.encode(this._encoders,i,s),i=i<<1|s}},s.Encoder2.prototype.encodeMatched=function(t,e,i){for(var r=1,s=!0,n=7;0<=n;n--){var o,a=i>>n&1,h=r;s&&(h+=1+(o=e>>>n&1)<<8,s=o==a),t.encode(this._encoders,h,a),r=r<<1|a}},s.Encoder2.prototype.getPrice=function(t,e,i){var r,s,n=0,o=1,a=7;if(t)for(;0<=a;a--)if(s=e>>>a&1,r=i>>>a&1,n+=bt.Encoder.getPrice(this._encoders[(1+s<<8)+o],r),o=o<<1|r,s!==r){a--;break}for(;0<=a;a--)r=i>>>a&1,n+=bt.Encoder.getPrice(this._encoders[o],r),o=o<<1|r;return n},s.prototype.create=function(t,e){var i;if(!this._coders||this._numPrevBits!==e||this._numPosBits!==t){this._numPosBits=t,this._posMask=(1<<t)-1,this._numPrevBits=e;var r=1<<this._numPrevBits+this._numPosBits;for(this._coders=[],i=0;i<r;i++)this._coders[i]=new s.Encoder2}},s.prototype.init=function(){for(var t=1<<this._numPrevBits+this._numPosBits,e=0;e<t;e++)this._coders[e].init()},s.prototype.getSubCoder=function(t,e){return this._coders[((t&this._posMask)<<this._numPrevBits)+(e>>8-this._numPrevBits)]};var t=e.LenEncoder=function(){var t;for(this._choice=i(null,2),this._lowCoder=[],this._midCoder=[],this._highCoder=new bt.BitTreeEncoder(xt.kNumHighLenBits),t=0;t<xt.kNumPosStatesEncodingMax;t++)this._lowCoder[t]=new bt.BitTreeEncoder(xt.kNumLowLenBits),this._midCoder[t]=new bt.BitTreeEncoder(xt.kNumMidLenBits)};t.prototype.init=function(t){var e;for(i(this._choice),e=0;e<t;e++)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},t.prototype.encode=function(t,e,i){e<xt.kNumLowLenSymbols?(t.encode(this._choice,0,0),this._lowCoder[i].encode(t,e)):(e-=xt.kNumLowLenSymbols,t.encode(this._choice,0,1),e<xt.kNumMidLenSymbols?(t.encode(this._choice,1,0),this._midCoder[i].encode(t,e)):(t.encode(this._choice,1,1),this._highCoder.encode(t,e-xt.kNumMidLenSymbols)))},t.prototype.setPrices=function(t,e,i,r){for(var s=bt.Encoder.getPrice0(this._choice[0]),n=bt.Encoder.getPrice1(this._choice[0]),o=n+bt.Encoder.getPrice0(this._choice[1]),a=n+bt.Encoder.getPrice1(this._choice[1]),h=0;h<xt.kNumLowLenSymbols;h++){if(e<=h)return;i[r+h]=s+this._lowCoder[t].getPrice(h)}for(;h<xt.kNumLowLenSymbols+xt.kNumMidLenSymbols;h++){if(e<=h)return;i[r+h]=o+this._midCoder[t].getPrice(h-xt.kNumLowLenSymbols)}for(;h<e;h++)i[r+h]=a+this._highCoder.getPrice(h-xt.kNumLowLenSymbols-xt.kNumMidLenSymbols)};xt.kNumLowLenSymbols,xt.kNumMidLenSymbols;var r,n=e.LenPriceTableEncoder=function(){t.call(this),this._prices=[],this._counters=[],this._tableSize=0};n.prototype=Object.create(t.prototype),n.prototype.setTableSize=function(t){this._tableSize=t},n.prototype.getPrice=function(t,e){return this._prices[e*xt.kNumLenSymbols+t]},n.prototype.updateTable=function(t){this.setPrices(t,this._tableSize,this._prices,t*xt.kNumLenSymbols),this._counters[t]=this._tableSize},n.prototype.updateTables=function(t){for(var e=0;e<t;e++)this.updateTable(e)},n.prototype.encode=(r=n.prototype.encode,function(t,e,i){r.call(this,t,e,i),0==--this._counters[i]&&this.updateTable(i)});var a=e.Optimal=function(){this.state=0,this.prev1IsChar=!1,this.prev2=!1,this.posPrev2=0,this.backPrev2=0,this.price=0,this.posPrev=0,this.backPrev=0,this.backs0=0,this.backs1=0,this.backs2=0,this.backs3=0};a.prototype.makeAsChar=function(){this.backPrev=-1,this.prev1IsChar=!1},a.prototype.makeAsShortRep=function(){this.backPrev=0,this.prev1IsChar=!1},a.prototype.isShortRep=function(){return 0===this.backPrev},e.prototype.create=function(){var t,e;this._matchFinder||(t=new u.BinTree,e=4,0===this._matchFinderType&&(e=2),t.setType(e),this._matchFinder=t),this._literalEncoder.create(this._numLiteralPosStateBits,this._numLiteralContextBits),this._dictionarySize===this._dictionarySizePrev&&this._numFastBytesPrev===this._numFastBytes||(this._matchFinder.create(this._dictionarySize,4096,this._numFastBytes,xt.kMatchMaxLen+1),this._dictionarySizePrev=this._dictionarySize,this._numFastBytesPrev=this._numFastBytes)},e.prototype.setWriteEndMarkerMode=function(t){this._writeEndMark=t},e.prototype.init=function(){var t;for(this.baseInit(),this._rangeEncoder.init(),i(this._isMatch),i(this._isRep0Long),i(this._isRep),i(this._isRepG0),i(this._isRepG1),i(this._isRepG2),i(this._posEncoders),this._literalEncoder.init(),t=0;t<xt.kNumLenToPosStates;t++)this._posSlotEncoder[t].init();this._lenEncoder.init(1<<this._posStateBits),this._repMatchLenEncoder.init(1<<this._posStateBits),this._posAlignEncoder.init(),this._longestMatchWasFound=!1,this._optimumEndIndex=0,this._optimumCurrentIndex=0,this._additionalOffset=0},e.prototype.readMatchDistances=function(){var t=0;return this._numDistancePairs=this._matchFinder.getMatches(this._matchDistances),0<this._numDistancePairs&&(t=this._matchDistances[this._numDistancePairs-2])===this._numFastBytes&&(t+=this._matchFinder.getMatchLen(t-1,this._matchDistances[this._numDistancePairs-1],xt.kMatchMaxLen-t)),this._additionalOffset++,t},e.prototype.movePos=function(t){0<t&&(this._matchFinder.skip(t),this._additionalOffset+=t)},e.prototype.getRepLen1Price=function(t,e){return bt.Encoder.getPrice0(this._isRepG0[t])+bt.Encoder.getPrice0(this._isRep0Long[(t<<xt.kNumPosStatesBitsMax)+e])},e.prototype.getPureRepPrice=function(t,e,i){var r;return 0===t?(r=bt.Encoder.getPrice0(this._isRepG0[e]),r+=bt.Encoder.getPrice1(this._isRep0Long[(e<<xt.kNumPosStatesBitsMax)+i])):(r=bt.Encoder.getPrice1(this._isRepG0[e]),1===t?r+=bt.Encoder.getPrice0(this._isRepG1[e]):(r+=bt.Encoder.getPrice1(this._isRepG1[e]),r+=bt.Encoder.getPrice(this._isRepG2[e],t-2))),r},e.prototype.getRepPrice=function(t,e,i,r){return this._repMatchLenEncoder.getPrice(e-xt.kMatchMinLen,r)+this.getPureRepPrice(t,i,r)},e.prototype.getPosLenPrice=function(t,e,i){var r,s=xt.getLenToPosState(e),n=t<xt.kNumFullDistances?this._distancesPrices[s*xt.kNumFullDistances+t]:this._posSlotPrices[(s<<xt.kNumPosSlotBits)+((r=t)<1<<17?o[r>>>6]+12:r<1<<27?o[r>>>16]+32:o[r>>>26]+52)]+this._alignPrices[t&xt.kAlignMask];return n+this._lenEncoder.getPrice(e-xt.kMatchMinLen,i)},e.prototype.backward=function(t){this._optimumEndIndex=t;var e=this._optimum[t].posPrev,i=this._optimum[t].backPrev;do{this._optimum[t].prev1IsChar&&(this._optimum[e].makeAsChar(),this._optimum[e].posPrev=e-1,this._optimum[t].prev2&&(this._optimum[e-1].prev1IsChar=!1,this._optimum[e-1].posPrev=this._optimum[t].posPrev2,this._optimum[e-1].backPrev=this._optimum[t].backPrev2));var r=e,s=i,i=this._optimum[r].backPrev,e=this._optimum[r].posPrev;this._optimum[r].backPrev=s,this._optimum[r].posPrev=t,t=r}while(0<t);return this.backRes=this._optimum[0].backPrev,this._optimumCurrentIndex=this._optimum[0].posPrev,this._optimumCurrentIndex},e.prototype.getOptimum=function(t){if(this._optimumEndIndex!==this._optimumCurrentIndex){var e=this._optimum[this._optimumCurrentIndex].posPrev-this._optimumCurrentIndex;return this.backRes=this._optimum[this._optimumCurrentIndex].backPrev,this._optimumCurrentIndex=this._optimum[this._optimumCurrentIndex].posPrev,e}var i;this._optimumCurrentIndex=this._optimumEndIndex=0,this._longestMatchWasFound?(i=this._longestMatchLength,this._longestMatchWasFound=!1):i=this.readMatchDistances();var r=this._numDistancePairs;if((R=this._matchFinder.getNumAvailableBytes()+1)<2)return this.backRes=-1,1;R>xt.kMatchMaxLen&&(R=xt.kMatchMaxLen);for(var s=0,n=0;n<xt.kNumRepDistances;n++)this.reps[n]=this._repDistances[n],this.repLens[n]=this._matchFinder.getMatchLen(-1,this.reps[n],xt.kMatchMaxLen),this.repLens[n]>this.repLens[s]&&(s=n);if(this.repLens[s]>=this._numFastBytes){this.backRes=s;var o=this.repLens[s];return this.movePos(o-1),o}if(i>=this._numFastBytes)return this.backRes=this._matchDistances[r-1]+xt.kNumRepDistances,this.movePos(i-1),i;var a=this._matchFinder.getIndexByte(-1),h=this._matchFinder.getIndexByte(-this._repDistances[0]-2);if(i<2&&a!==h&&this.repLens[s]<2)return this.backRes=-1,1;this._optimum[0].state=this._state;var l=t&this._posStateMask;this._optimum[1].price=bt.Encoder.getPrice0(this._isMatch[(this._state<<xt.kNumPosStatesBitsMax)+l])+this._literalEncoder.getSubCoder(t,this._previousByte).getPrice(!xt.stateIsCharState(this._state),h,a),this._optimum[1].makeAsChar();var c,u=bt.Encoder.getPrice1(this._isMatch[(this._state<<xt.kNumPosStatesBitsMax)+l]),d=u+bt.Encoder.getPrice1(this._isRep[this._state]);h!==a||(c=d+this.getRepLen1Price(this._state,l))<this._optimum[1].price&&(this._optimum[1].price=c,this._optimum[1].makeAsShortRep());var p=i>=this.repLens[s]?i:this.repLens[s];if(p<2)return this.backRes=this._optimum[1].backPrev,1;this._optimum[1].posPrev=0,this._optimum[0].backs0=this.reps[0],this._optimum[0].backs1=this.reps[1],this._optimum[0].backs2=this.reps[2],this._optimum[0].backs3=this.reps[3];for(var f=p;this._optimum[f--].price=Mt,2<=f;);for(n=0;n<xt.kNumRepDistances;n++){var m=this.repLens[n];if(!(m<2)){var y=d+this.getPureRepPrice(n,this._state,l);do{var _=y+this._repMatchLenEncoder.getPrice(m-2,l),g=this._optimum[m];_<g.price&&(g.price=_,g.posPrev=0,g.backPrev=n,g.prev1IsChar=!1)}while(2<=--m)}}var v=u+bt.Encoder.getPrice0(this._isRep[this._state]);if((f=2<=this.repLens[0]?this.repLens[0]+1:2)<=i){for(var x=0;f>this._matchDistances[x];)x+=2;for(;;f++){var M=this._matchDistances[x+1],b=v+this.getPosLenPrice(M,f,l),C=this._optimum[f];if(b<C.price&&(C.price=b,C.posPrev=0,C.backPrev=M+xt.kNumRepDistances,C.prev1IsChar=!1),f===this._matchDistances[x]&&(x+=2)===r)break}}for(var I=0;;){if(++I===p)return this.backward(I);var E=this.readMatchDistances(),r=this._numDistancePairs;if(E>=this._numFastBytes)return this._longestMatchLength=E,this._longestMatchWasFound=!0,this.backward(I);t++;var w,F,L,k=this._optimum[I].posPrev;F=this._optimum[I].prev1IsChar?(k--,F=this._optimum[I].prev2?(F=this._optimum[this._optimum[I].posPrev2].state,this._optimum[I].backPrev2<xt.kNumRepDistances?xt.stateUpdateRep(F):xt.stateUpdateMatch(F)):this._optimum[k].state,xt.stateUpdateChar(F)):this._optimum[k].state,k===I-1?F=this._optimum[I].isShortRep()?xt.stateUpdateShortRep(F):xt.stateUpdateChar(F):(F=this._optimum[I].prev1IsChar&&this._optimum[I].prev2?(k=this._optimum[I].posPrev2,w=this._optimum[I].backPrev2,xt.stateUpdateRep(F)):(w=this._optimum[I].backPrev)<xt.kNumRepDistances?xt.stateUpdateRep(F):xt.stateUpdateMatch(F),L=this._optimum[k],w<xt.kNumRepDistances?0===w?(this.reps[0]=L.backs0,this.reps[1]=L.backs1,this.reps[2]=L.backs2,this.reps[3]=L.backs3):1===w?(this.reps[0]=L.backs1,this.reps[1]=L.backs0,this.reps[2]=L.backs2,this.reps[3]=L.backs3):2===w?(this.reps[0]=L.backs2,this.reps[1]=L.backs0,this.reps[2]=L.backs1,this.reps[3]=L.backs3):(this.reps[0]=L.backs3,this.reps[1]=L.backs0,this.reps[2]=L.backs1,this.reps[3]=L.backs2):(this.reps[0]=w-xt.kNumRepDistances,this.reps[1]=L.backs0,this.reps[2]=L.backs1,this.reps[3]=L.backs2)),this._optimum[I].state=F,this._optimum[I].backs0=this.reps[0],this._optimum[I].backs1=this.reps[1],this._optimum[I].backs2=this.reps[2],this._optimum[I].backs3=this.reps[3];var T,B=this._optimum[I].price,a=this._matchFinder.getIndexByte(-1),h=this._matchFinder.getIndexByte(-this.reps[0]-2),l=t&this._posStateMask,S=B+bt.Encoder.getPrice0(this._isMatch[(F<<xt.kNumPosStatesBitsMax)+l])+this._literalEncoder.getSubCoder(t,this._matchFinder.getIndexByte(-2)).getPrice(!xt.stateIsCharState(F),h,a),A=this._optimum[I+1],P=!1;S<A.price&&(A.price=S,A.posPrev=I,A.makeAsChar(),P=!0),d=(u=B+bt.Encoder.getPrice1(this._isMatch[(F<<xt.kNumPosStatesBitsMax)+l]))+bt.Encoder.getPrice1(this._isRep[F]),h!==a||A.posPrev<I&&0===A.backPrev||(T=d+this.getRepLen1Price(F,l))<=A.price&&(A.price=T,A.posPrev=I,A.makeAsShortRep(),P=!0);var R,O=this._matchFinder.getNumAvailableBytes()+1;if(!((R=O=Math.min(4095-I,O))<2)){if(R>this._numFastBytes&&(R=this._numFastBytes),!P&&h!==a){var D=Math.min(O-1,this._numFastBytes),N=this._matchFinder.getMatchLen(0,this.reps[0],D);if(2<=N){for(var H=xt.stateUpdateChar(F),W=t+1&this._posStateMask,U=S+bt.Encoder.getPrice1(this._isMatch[(H<<xt.kNumPosStatesBitsMax)+W])+bt.Encoder.getPrice1(this._isRep[H]),j=I+1+N;p<j;)this._optimum[++p].price=Mt;var G=U+this.getRepPrice(0,N,H,W),V=this._optimum[j];G<V.price&&(V.price=G,V.posPrev=I+1,V.backPrev=0,V.prev1IsChar=!0,V.prev2=!1)}}for(var X=2,z=0;z<xt.kNumRepDistances;z++){var Y=this._matchFinder.getMatchLen(-1,this.reps[z],R);if(!(Y<2)){var K=Y;do{for(;p<I+Y;)this._optimum[++p].price=Mt;var q=d+this.getRepPrice(z,Y,F,l),Q=this._optimum[I+Y];q<Q.price&&(Q.price=q,Q.posPrev=I,Q.backPrev=z,Q.prev1IsChar=!1)}while(2<=--Y);if(Y=K,0===z&&(X=Y+1),Y<O){var Z=Math.min(O-1-Y,this._numFastBytes),J=this._matchFinder.getMatchLen(Y,this.reps[z],Z);if(2<=J){for(var $=xt.stateUpdateRep(F),tt=t+Y&this._posStateMask,et=d+this.getRepPrice(z,Y,F,l)+bt.Encoder.getPrice0(this._isMatch[($<<xt.kNumPosStatesBitsMax)+tt])+this._literalEncoder.getSubCoder(t+Y,this._matchFinder.getIndexByte(Y-2)).getPrice(!0,this._matchFinder.getIndexByte(Y-1-(this.reps[z]+1)),this._matchFinder.getIndexByte(Y-1)),$=xt.stateUpdateChar($),tt=t+Y+1&this._posStateMask,it=et+bt.Encoder.getPrice1(this._isMatch[($<<xt.kNumPosStatesBitsMax)+tt])+bt.Encoder.getPrice1(this._isRep[$]),rt=Y+1+J;p<I+rt;)this._optimum[++p].price=Mt;var st=it+this.getRepPrice(0,J,$,tt),nt=this._optimum[I+rt];st<nt.price&&(nt.price=st,nt.posPrev=I+Y+1,nt.backPrev=0,nt.prev1IsChar=!0,nt.prev2=!0,nt.posPrev2=I,nt.backPrev2=z)}}}}if(R<E){for(E=R,r=0;E>this._matchDistances[r];)r+=2;this._matchDistances[r]=E,r+=2}if(X<=E){for(v=u+bt.Encoder.getPrice0(this._isRep[F]);p<I+E;)this._optimum[++p].price=Mt;for(var ot,at=0;X>this._matchDistances[at];)at+=2;for(ot=X;;ot++){var ht=this._matchDistances[at+1],lt=v+this.getPosLenPrice(ht,ot,l),ct=this._optimum[I+ot];if(lt<ct.price&&(ct.price=lt,ct.posPrev=I,ct.backPrev=ht+xt.kNumRepDistances,ct.prev1IsChar=!1),ot===this._matchDistances[at]){if(ot<O){var ut=Math.min(O-1-ot,this._numFastBytes),dt=this._matchFinder.getMatchLen(ot,ht,ut);if(2<=dt){for(var pt=xt.stateUpdateMatch(F),ft=t+ot&this._posStateMask,mt=lt+bt.Encoder.getPrice0(this._isMatch[(pt<<xt.kNumPosStatesBitsMax)+ft])+this._literalEncoder.getSubCoder(t+ot,this._matchFinder.getIndexByte(ot-2)).getPrice(!0,this._matchFinder.getIndexByte(ot-(ht+1)-1),this._matchFinder.getIndexByte(ot-1)),pt=xt.stateUpdateChar(pt),ft=t+ot+1&this._posStateMask,yt=mt+bt.Encoder.getPrice1(this._isMatch[(pt<<xt.kNumPosStatesBitsMax)+ft])+bt.Encoder.getPrice1(this._isRep[pt]),_t=ot+1+dt;p<I+_t;)this._optimum[++p].price=Mt;var gt=yt+this.getRepPrice(0,dt,pt,ft),vt=this._optimum[I+_t];gt<vt.price&&(vt.price=gt,vt.posPrev=I+ot+1,vt.backPrev=0,vt.prev1IsChar=!0,vt.prev2=!0,vt.posPrev2=I,vt.backPrev2=ht+xt.kNumRepDistances)}}if((at+=2)===r)break}}}}}},e.prototype.changePair=function(t,e){return t<1<<25&&t<<7<=e},e.prototype.writeEndMarker=function(t){var e,i,r;this._writeEndMark&&(this._rangeEncoder.encode(this._isMatch,(this._state<<xt.kNumPosStatesBitsMax)+t,1),this._rangeEncoder.encode(this._isRep,this._state,0),this._state=xt.stateUpdateMatch(this._state),e=xt.kMatchMinLen,this._lenEncoder.encode(this._rangeEncoder,e-xt.kMatchMinLen,t),i=(1<<xt.kNumPosSlotBits)-1,r=xt.getLenToPosState(e),this._posSlotEncoder[r].encode(this._rangeEncoder,i),this._rangeEncoder.encodeDirectBits((1<<30)-1>>xt.kNumAlignBits,30-xt.kNumAlignBits),this._posAlignEncoder.reverseEncode(this._rangeEncoder,(1<<30)-1&xt.kAlignMask))},e.prototype.flush=function(t){this.releaseMFStream(),this.writeEndMarker(t&this._posStateMask),this._rangeEncoder.flushData(),this._rangeEncoder.flushStream()},e.prototype.codeOneBlock=function(t,e,i){if(i[e[t[0]=0]=0]=!0,this._inStream&&(this._matchFinder.setStream(this._inStream),this._matchFinder.init(),this._needReleaseMFStream=!0,this._inStream=null),!this._finished){this._finished=!0;var r,s=this.nowPos64;if(0===this.nowPos64){if(0===this._matchFinder.getNumAvailableBytes())return void this.flush(this.nowPos64);this.readMatchDistances(),a=this.nowPos64&this._posStateMask,this._rangeEncoder.encode(this._isMatch,(this._state<<xt.kNumPosStatesBitsMax)+a,0),this._state=xt.stateUpdateChar(this._state),r=this._matchFinder.getIndexByte(0-this._additionalOffset),this._literalEncoder.getSubCoder(this.nowPos64,this._previousByte).encode(this._rangeEncoder,r),this._previousByte=r,this._additionalOffset--,this.nowPos64++}if(0!==this._matchFinder.getNumAvailableBytes())for(;;){var n=this.getOptimum(this.nowPos64),o=this.backRes,a=this.nowPos64&this._posStateMask,h=(this._state<<xt.kNumPosStatesBitsMax)+a;if(1===n&&-1===o){this._rangeEncoder.encode(this._isMatch,h,0),r=this._matchFinder.getIndexByte(-this._additionalOffset);var l,c=this._literalEncoder.getSubCoder(this.nowPos64,this._previousByte);xt.stateIsCharState(this._state)?c.encode(this._rangeEncoder,r):(l=this._matchFinder.getIndexByte(-this._repDistances[0]-1-this._additionalOffset),c.encodeMatched(this._rangeEncoder,l,r)),this._previousByte=r,this._state=xt.stateUpdateChar(this._state)}else{if(this._rangeEncoder.encode(this._isMatch,h,1),o<xt.kNumRepDistances){this._rangeEncoder.encode(this._isRep,this._state,1),0===o?(this._rangeEncoder.encode(this._isRepG0,this._state,0),1===n?this._rangeEncoder.encode(this._isRep0Long,h,0):this._rangeEncoder.encode(this._isRep0Long,h,1)):(this._rangeEncoder.encode(this._isRepG0,this._state,1),1===o?this._rangeEncoder.encode(this._isRepG1,this._state,0):(this._rangeEncoder.encode(this._isRepG1,this._state,1),this._rangeEncoder.encode(this._isRepG2,this._state,o-2))),1===n?this._state=xt.stateUpdateShortRep(this._state):(this._repMatchLenEncoder.encode(this._rangeEncoder,n-xt.kMatchMinLen,a),this._state=xt.stateUpdateRep(this._state));var u=this._repDistances[o];if(0!==o){for(g=o;1<=g;g--)this._repDistances[g]=this._repDistances[g-1];this._repDistances[0]=u}}else{this._rangeEncoder.encode(this._isRep,this._state,0),this._state=xt.stateUpdateMatch(this._state),this._lenEncoder.encode(this._rangeEncoder,n-xt.kMatchMinLen,a),o-=xt.kNumRepDistances;var d,p,f,m=v(o),y=xt.getLenToPosState(n);this._posSlotEncoder[y].encode(this._rangeEncoder,m),m>=xt.kStartPosModelIndex&&(f=o-(p=(2|1&m)<<(d=(m>>>1)-1)),m<xt.kEndPosModelIndex?bt.BitTreeEncoder.reverseEncode(this._posEncoders,p-m-1,this._rangeEncoder,d,f):(this._rangeEncoder.encodeDirectBits(f>>xt.kNumAlignBits,d-xt.kNumAlignBits),this._posAlignEncoder.reverseEncode(this._rangeEncoder,f&xt.kAlignMask),this._alignPriceCount++));for(var _=o,g=xt.kNumRepDistances-1;1<=g;g--)this._repDistances[g]=this._repDistances[g-1];this._repDistances[0]=_,this._matchPriceCount++}this._previousByte=this._matchFinder.getIndexByte(n-1-this._additionalOffset)}if(this._additionalOffset-=n,this.nowPos64+=n,0===this._additionalOffset){if(128<=this._matchPriceCount&&this.fillDistancesPrices(),this._alignPriceCount>=xt.kAlignTableSize&&this.fillAlignPrices(),t[0]=this.nowPos64,e[0]=this._rangeEncoder.getProcessedSizeAdd(),0===this._matchFinder.getNumAvailableBytes())return void this.flush(this.nowPos64);if(4096<=this.nowPos64-s)return this._finished=!1,void(i[0]=!1)}}else this.flush(this.nowPos64)}},e.prototype.releaseMFStream=function(){this._matchFinder&&this._needReleaseMFStream&&(this._matchFinder.releaseStream(),this._needReleaseMFStream=!1)},e.prototype.setOutStream=function(t){this._rangeEncoder.setStream(t)},e.prototype.releaseOutStream=function(){this._rangeEncoder.releaseStream()},e.prototype.releaseStreams=function(){this.releaseMFStream(),this.releaseOutStream()},e.prototype.setStreams=function(t,e,i,r){this._inStream=t,this._finished=!1,this.create(),this.setOutStream(e),this.init(),this.fillDistancesPrices(),this.fillAlignPrices(),this._lenEncoder.setTableSize(this._numFastBytes+1-xt.kMatchMinLen),this._lenEncoder.updateTables(1<<this._posStateBits),this._repMatchLenEncoder.setTableSize(this._numFastBytes+1-xt.kMatchMinLen),this._repMatchLenEncoder.updateTables(1<<this._posStateBits),this.nowPos64=0},e.prototype.code=function(t,e,i,r,s){this._needReleaseMFStream=!1;try{for(this.setStreams(t,e,i,r);;){if(this.codeOneBlock(this.processedInSize,this.processedOutSize,this.finished),this.finished[0])return;s&&s.setProgress(this.processedInSize[0],this.processedOutSize[0])}}finally{this.releaseStreams()}},e.prototype.writeCoderProperties=function(t){var e,i=p(5);for(i[0]=9*(5*this._posStateBits+this._numLiteralPosStateBits)+this._numLiteralContextBits,e=0;e<4;e++)i[1+e]=this._dictionarySize>>>8*e;for(e=0;e<5;e++)t.writeByte(i[e])},e.prototype.fillDistancesPrices=function(){var t=[];for(t.length=xt.kNumFullDistances,h=xt.kStartPosModelIndex;h<xt.kNumFullDistances;h++){var e=((o=v(h))>>>1)-1,i=(2|1&o)<<e;t[h]=bt.BitTreeEncoder.reverseGetPrice(this._posEncoders,i-o-1,e,h-i)}for(var r=0;r<xt.kNumLenToPosStates;r++){for(var s=this._posSlotEncoder[r],n=r<<xt.kNumPosSlotBits,o=0;o<this._distTableSize;o++)this._posSlotPrices[n+o]=s.getPrice(o);for(o=xt.kEndPosModelIndex;o<this._distTableSize;o++)this._posSlotPrices[n+o]+=(o>>>1)-1-xt.kNumAlignBits<<bt.Encoder.kNumBitPriceShiftBits;for(var a=r*xt.kNumFullDistances,h=0;h<xt.kStartPosModelIndex;h++)this._distancesPrices[a+h]=this._posSlotPrices[n+h];for(;h<xt.kNumFullDistances;h++)this._distancesPrices[a+h]=this._posSlotPrices[n+v(h)]+t[h]}this._matchPriceCount=0},e.prototype.fillAlignPrices=function(){for(var t=0;t<xt.kAlignTableSize;t++)this._alignPrices[t]=this._posAlignEncoder.reverseGetPrice(t);this._alignPriceCount=0},e.prototype.setAlgorithm=function(t){return!0},e.prototype.setDictionarySize=function(t){if(t<1<<xt.kDicLogSizeMin||1<<29<t)return!1;this._dictionarySize=t;for(var e=0;1<<e<t;)e++;return this._distTableSize=2*e,!0},e.prototype.setNumFastBytes=function(t){return!(t<5||t>xt.kMatchMaxLen)&&(this._numFastBytes=t,!0)},e.prototype.setMatchFinder=function(t){if(t<0||2<t)return!1;var e=this._matchFinderType;return this._matchFinderType=t,this._matchFinder&&e!=this._matchFinderType&&(this._dictionarySizePrev=-1,this._matchFinder=null),!0},e.prototype.setLcLpPb=function(t,e,i){return!(e<0||e>xt.kNumLitPosStatesBitsEncodingMax||t<0||t>xt.kNumLitContextBitsMax||i<0||i>xt.kNumPosStatesBitsEncodingMax)&&(this._numLiteralPosStateBits=e,this._numLiteralContextBits=t,this._posStateBits=i,this._posStateMask=(1<<this._posStateBits)-1,!0)},e.prototype.setEndMarkerMode=function(t){this._writeEndMark=t},e.EMatchFinderTypeBT2=0,e.EMatchFinderTypeBT4=1,d.Encoder=e;function h(){this._choice=i(null,2),this._lowCoder=[],this._midCoder=[],this._highCoder=new bt.BitTreeDecoder(8),this._numPosStates=0}i=bt.Encoder.initBitModels;h.prototype.create=function(t){for(;this._numPosStates<t;++this._numPosStates)this._lowCoder[this._numPosStates]=new bt.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new bt.BitTreeDecoder(3)},h.prototype.init=function(){var t=this._numPosStates;for(i(this._choice);t--;)this._lowCoder[t].init(),this._midCoder[t].init();this._highCoder.init()},h.prototype.decode=function(t,e){return 0===t.decodeBit(this._choice,0)?this._lowCoder[e].decode(t):0===t.decodeBit(this._choice,1)?8+this._midCoder[e].decode(t):16+this._highCoder.decode(t)};function l(){}(l.Decoder2=function(){this._decoders=i(null,768)}).prototype.init=function(){i(this._decoders)},l.Decoder2.prototype.decodeNormal=function(t){for(var e=1;(e=e<<1|t.decodeBit(this._decoders,e))<256;);return 255&e},l.Decoder2.prototype.decodeWithMatchByte=function(t,e){var i,r,s=1;do{if(i=e>>7&1,e<<=1,s=s<<1|(r=t.decodeBit(this._decoders,(1+i<<8)+s)),i!==r){for(;s<256;)s=s<<1|t.decodeBit(this._decoders,s);break}}while(s<256);return 255&s},l.prototype.create=function(t,e){var i;if(!this._coders||this._numPrevBits!==e||this._numPosBits!==t)for(this._numPosBits=t,this._posMask=(1<<t)-1,this._numPrevBits=e,this._coders=[],i=1<<this._numPrevBits+this._numPosBits;i--;)this._coders[i]=new l.Decoder2},l.prototype.init=function(){for(var t=1<<this._numPrevBits+this._numPosBits;t--;)this._coders[t].init()},l.prototype.getDecoder=function(t,e){return this._coders[((t&this._posMask)<<this._numPrevBits)+((255&e)>>>8-this._numPrevBits)]};function c(){var t;for(this._outWindow=new u.OutWindow,this._rangeDecoder=new bt.Decoder,this._isMatchDecoders=i(null,xt.kNumStates<<xt.kNumPosStatesBitsMax),this._isRepDecoders=i(null,xt.kNumStates),this._isRepG0Decoders=i(null,xt.kNumStates),this._isRepG1Decoders=i(null,xt.kNumStates),this._isRepG2Decoders=i(null,xt.kNumStates),this._isRep0LongDecoders=i(null,xt.kNumStates<<xt.kNumPosStatesBitsMax),this._posSlotDecoder=[],this._posDecoders=i(null,xt.kNumFullDistances-xt.kEndPosModelIndex),this._posAlignDecoder=new bt.BitTreeDecoder(xt.kNumAlignBits),this._lenDecoder=new h,this._repLenDecoder=new h,this._literalDecoder=new l,this._dictionarySize=-1,this._dictionarySizeCheck=-1,t=this._posStateMask=0;t<xt.kNumLenToPosStates;t++)this._posSlotDecoder[t]=new bt.BitTreeDecoder(xt.kNumPosSlotBits)}c.prototype.setDictionarySize=function(t){return!(t<0)&&(this._dictionarySize!==t&&(this._dictionarySize=t,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},c.prototype.setLcLpPb=function(t,e,i){var r=1<<i;return!(t>xt.kNumLitContextBitsMax||4<e||i>xt.kNumPosStatesBitsMax)&&(this._literalDecoder.create(e,t),this._lenDecoder.create(r),this._repLenDecoder.create(r),this._posStateMask=r-1,!0)},c.prototype.init=function(){var t=xt.kNumLenToPosStates;for(this._outWindow.init(!1),i(this._isMatchDecoders),i(this._isRepDecoders),i(this._isRepG0Decoders),i(this._isRepG1Decoders),i(this._isRepG2Decoders),i(this._isRep0LongDecoders),i(this._posDecoders),this._literalDecoder.init();t--;)this._posSlotDecoder[t].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},c.prototype.code=function(t,e,i){var r,s,n,o,a,h,l,c=0,u=0,d=0,p=0,f=0,m=0;for(this._rangeDecoder.setStream(t),this._outWindow.setStream(e),this.init(),r=xt.stateInit();i<0||f<i;)if(s=f&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(r<<xt.kNumPosStatesBitsMax)+s))n=this._literalDecoder.getDecoder(f,m),m=xt.stateIsCharState(r)?n.decodeNormal(this._rangeDecoder):n.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(c)),this._outWindow.putByte(m),r=xt.stateUpdateChar(r),f++;else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,r))(o=0)===this._rangeDecoder.decodeBit(this._isRepG0Decoders,r)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(r<<xt.kNumPosStatesBitsMax)+s)&&(r=xt.stateUpdateShortRep(r),o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,r)?a=u:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,r)?a=d:(a=p,p=d),d=u),u=c,c=a),0===o&&(o=xt.kMatchMinLen+this._repLenDecoder.decode(this._rangeDecoder,s),r=xt.stateUpdateRep(r));else if(p=d,d=u,u=c,o=xt.kMatchMinLen+this._lenDecoder.decode(this._rangeDecoder,s),r=xt.stateUpdateMatch(r),(h=this._posSlotDecoder[xt.getLenToPosState(o)].decode(this._rangeDecoder))>=xt.kStartPosModelIndex){if(c=(2|1&h)<<(l=(h>>1)-1),h<xt.kEndPosModelIndex)c+=bt.BitTreeDecoder.reverseDecode(this._posDecoders,c-h-1,this._rangeDecoder,l);else if(c+=this._rangeDecoder.decodeDirectBits(l-xt.kNumAlignBits)<<xt.kNumAlignBits,(c+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===c)break;return!1}}else c=h;if(f<=c||c>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(c,o),f+=o,m=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},c.prototype.setDecoderProperties=function(t){var e,i,r,s,n,o,a;if(t.length<5)return!1;if(i=(e=255&t[0])%9,r=(e=~~(e/9))%5,s=~~(e/5),!this.setLcLpPb(i,r,s))return!1;for(o=n=0,a=1;o<4;o++,a*=256)n+=(255&t[1+o])*a;return this.setDictionarySize(n)},c.prototype.setDecoderPropertiesFromStream=function(t){for(var e=[],i=0;i<5;i++)e[i]=t.readByte();return this.setDecoderProperties(e)},d.Decoder=c}.call(this);var t=Object.create(null);t.decompress=function(t,e,i,r){var s=new d.Decoder;if(!s.setDecoderProperties(t))throw"Incorrect stream properties";if(!s.code(e,i,r))throw"Error in data stream";return!0},t.decompressFile=function(t,e){var i,r=new d.Decoder,s=!0;if("readByte"in t||(t={size:(i=t).length,pos:0,readByte:function(){return i[this.pos++]}}),!r.setDecoderPropertiesFromStream(t))throw"Incorrect stream properties";for(var n=0,o=0,a=1;o<4;o++,a*=256)n+=t.readByte()*a;var h=0;for(o=0,a=1;o<4;o++,a*=256)h+=t.readByte()*a;var l=4294967295===n&&4294967295===h||2097152<=h?-1:n+4294967296*h;if(e&&"writeByte"in e||(s=(e={buffer:0<=l?p(l):[],pos:0,writeByte:function(t){this.buffer[this.pos++]=t}}).buffer),!r.code(t,e,l))throw"Error in data stream";return s};function h(t){var e,i=new d.Encoder,r={a:1,d:23,fb:128,lc:3,lp:0,pb:2,mf:"bt4",eos:!1};if(t)for(e in"number"==typeof t&&(t=s[t]),t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return i.setAlgorithm(r.a),i.setDictionarySize(1<<+r.d),i.setNumFastBytes(+r.fb),i.setMatchFinder("bt4"===r.mf?d.Encoder.EMatchFinderTypeBT4:d.Encoder.EMatchFinderTypeBT2),i.setLcLpPb(+r.lc,+r.lp,+r.pb),i.setEndMarkerMode(!!r.eos),i}var s=[{a:0,d:0,fb:0,mf:null,lc:0,lp:0,pb:0},{a:0,d:16,fb:64,mf:"hc4",lc:3,lp:0,pb:2},{a:0,d:20,fb:64,mf:"hc4",lc:3,lp:0,pb:2},{a:1,d:19,fb:64,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:20,fb:64,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:21,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:22,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:23,fb:128,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:24,fb:255,mf:"bt4",lc:3,lp:0,pb:2},{a:2,d:25,fb:255,mf:"bt4",lc:3,lp:0,pb:2}];t.compress=function(t,e,i,r){var s=h(i);return s.writeCoderProperties(e),s.code(t,e,-1,-1,{setProgress:function(t,e){r&&r(t,e)}}),!0},t.compressFile=function(t,i,e,r){var s,n,o=h(e),a=!0;"readByte"in t||(t={size:(s=t).length,pos:0,readByte:function(){return s[this.pos++]},read:function(t,e,i){for(var r=0;r<i&&this.pos<s.length;)t[e++]=s[this.pos++],r++;return r}}),"size"in t&&0<=t.size?n=t.size:(n=-1,o.setEndMarkerMode(!0)),i&&"writeByte"in i||(a=(i={buffer:[],pos:0,writeByte:function(t){this.buffer[this.pos++]=t},flush:function(){}}).buffer),o.writeCoderProperties(i);return function(t){for(var e=0;e<8;e++)i.writeByte(255&t),t=Math.floor(t/256)}(n),o.code(t,i,n,-1,{setProgress:function(t,e){r&&r(t,e)}}),a},global.LWF.LZMA=t}.call(this);